!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=11)}([function(e,t,n){e.exports=function(){function e(e){var t;return function(n){return t||e(t={exports:{},parent:n},t.exports),t.exports}}var t=e((function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Interactable=void 0;var o=v(E),i=h(C),a=h(U),c=h(ce),u=v(p),l=h(ue),d=h(me),f=n({});function h(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._scopeEvents=o,b(this,"options",void 0),b(this,"_actions",void 0),b(this,"target",void 0),b(this,"events",new d.default),b(this,"_context",void 0),b(this,"_win",void 0),b(this,"_doc",void 0),this._actions=n.actions,this.target=t,this._context=n.context||r,this._win=(0,s.getWindow)((0,G.trySelector)(t)?this._context:t),this._doc=this._win.document,this.set(n)}return g(e,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}}]),g(e,[{key:"setOnEvents",value:function(e,t){return u.func(t.onstart)&&this.on("".concat(e,"start"),t.onstart),u.func(t.onmove)&&this.on("".concat(e,"move"),t.onmove),u.func(t.onend)&&this.on("".concat(e,"end"),t.onend),u.func(t.oninertiastart)&&this.on("".concat(e,"inertiastart"),t.oninertiastart),this}},{key:"updatePerActionListeners",value:function(e,t,n){(u.array(t)||u.object(t))&&this.off(e,t),(u.array(n)||u.object(n))&&this.on(e,n)}},{key:"setPerAction",value:function(e,t){var n=this._defaults;for(var r in t){var i=r,s=this.options[e],l=t[i];"listeners"===i&&this.updatePerActionListeners(e,s.listeners,l),u.array(l)?s[i]=o.from(l):u.plainObject(l)?(s[i]=(0,c.default)(s[i]||{},(0,a.default)(l)),u.object(n.perAction[i])&&"enabled"in n.perAction[i]&&(s[i].enabled=!1!==l.enabled)):u.bool(l)&&u.object(n.perAction[i])?s[i].enabled=l:s[i]=l}}},{key:"getRect",value:function(e){return e=e||(u.element(this.target)?this.target:null),u.string(this.target)&&(e=e||this._context.querySelector(this.target)),(0,G.getElementRect)(e)}},{key:"rectChecker",value:function(e){return u.func(e)?(this.getRect=e,this):null===e?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(e,t){if((0,G.trySelector)(t)||u.object(t)){for(var n in this.options[e]=t,this._actions.map)this.options[n][e]=t;return this}return this.options[e]}},{key:"origin",value:function(e){return this._backCompatOption("origin",e)}},{key:"deltaSource",value:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(e){return this._context===e.ownerDocument||(0,G.nodeContains)(this._context,e)}},{key:"testIgnoreAllow",value:function(e,t,n){return!this.testIgnore(e.ignoreFrom,t,n)&&this.testAllow(e.allowFrom,t,n)}},{key:"testAllow",value:function(e,t,n){return!e||!!u.element(n)&&(u.string(e)?(0,G.matchesUpTo)(n,e,t):!!u.element(e)&&(0,G.nodeContains)(e,n))}},{key:"testIgnore",value:function(e,t,n){return!(!e||!u.element(n))&&(u.string(e)?(0,G.matchesUpTo)(n,e,t):!!u.element(e)&&(0,G.nodeContains)(e,n))}},{key:"fire",value:function(e){return this.events.fire(e),this}},{key:"_onOff",value:function(e,t,n,r){u.object(t)&&!u.array(t)&&(r=n,n=null);var o="on"===e?"add":"remove",s=(0,l.default)(t,n);for(var a in s){"wheel"===a&&(a=i.default.wheelEvent);for(var c=0;c<s[a].length;c++){var d=s[a][c];(0,f.isNonNativeEvent)(a,this._actions)?this.events[e](a,d):u.string(this.target)?this._scopeEvents["".concat(o,"Delegate")](this.target,this._context,a,d,r):this._scopeEvents[o](this.target,a,d,r)}}return this}},{key:"on",value:function(e,t,n){return this._onOff("on",e,t,n)}},{key:"off",value:function(e,t,n){return this._onOff("off",e,t,n)}},{key:"set",value:function(e){var t=this._defaults;for(var n in u.object(e)||(e={}),this.options=(0,a.default)(t.base),this._actions.methodDict){var r=n,o=this._actions.methodDict[r];this.options[r]={},this.setPerAction(r,(0,c.default)((0,c.default)({},t.perAction),t.actions[r])),this[o](e[r])}for(var i in e)u.func(this[i])&&this[i](e[i]);return this}},{key:"unset",value:function(){if(u.string(this.target))for(var e in this._scopeEvents.delegatedEvents)for(var t=this._scopeEvents.delegatedEvents[e],n=t.length-1;0<=n;n--){var r=t[n],o=r.selector,i=r.context,s=r.listeners;o===this.target&&i===this._context&&t.splice(n,1);for(var a=s.length-1;0<=a;a--)this._scopeEvents.removeDelegate(this.target,this._context,e,s[a][0],s[a][1])}else this._scopeEvents.remove(this.target,"all")}}]),e}(),_=t.Interactable=w;t.default=_})),n=e((function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isNonNativeEvent=function(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(0===e.indexOf(n)&&e.substr(n.length)in t.phases)return!0;return!1},n.initScope=M,n.Scope=n.default=void 0;var i=m(k),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(ot),a=m(me),c=m(kt),u=m(o({})),l=m(t({})),d=m(Vt),f=m(Mt),p=m(rn),h=m(r({}));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=s.win,P=s.browser,j=s.raf,E=function(){function e(){var t=this;w(this,e),O(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),O(this,"isInitialized",!1),O(this,"listenerMaps",[]),O(this,"browser",P),O(this,"utils",s),O(this,"defaults",s.clone(f.default)),O(this,"Eventable",a.default),O(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),O(this,"interactStatic",new u.default(this)),O(this,"InteractEvent",c.default),O(this,"Interactable",void 0),O(this,"interactables",new d.default(this)),O(this,"_win",void 0),O(this,"document",void 0),O(this,"window",void 0),O(this,"documents",[]),O(this,"_plugins",{list:[],map:{}}),O(this,"onWindowUnload",(function(e){return t.removeDocument(e.target)}));var n=this;this.Interactable=function(){function e(){return w(this,e),function(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,g(e).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(e,l.default),x(e,[{key:"set",value:function(t){return y(g(e.prototype),"set",this).call(this,t),n.fire("interactable:set",{options:t,interactable:this}),this}},{key:"unset",value:function(){y(g(e.prototype),"unset",this).call(this),n.interactables.list.splice(n.interactables.list.indexOf(this),1),n.fire("interactable:unset",{interactable:this})}},{key:"_defaults",get:function(){return n.defaults}}]),e}()}return x(e,[{key:"addListeners",value:function(e,t){this.listenerMaps.push({id:t,map:e})}},{key:"fire",value:function(e,t){for(var n=0;n<this.listenerMaps.length;n++){var r=this.listenerMaps[n].map[e];if(r&&!1===r(t,this,e))return!1}}},{key:"init",value:function(e){return this.isInitialized?this:M(this,e)}},{key:"pluginIsInstalled",value:function(e){return this._plugins.map[e.id]||-1!==this._plugins.list.indexOf(e)}},{key:"usePlugin",value:function(e,t){if(this.pluginIsInstalled(e))return this;if(e.id&&(this._plugins.map[e.id]=e),this._plugins.list.push(e),e.install&&e.install(this,t),e.listeners&&e.before){for(var n=0,r=this.listenerMaps.length,o=e.before.reduce((function(e,t){return e[t]=!0,e}),{});n<r&&!o[this.listenerMaps[n].id];n++);this.listenerMaps.splice(n,0,{id:e.id,map:e.listeners})}else e.listeners&&this.listenerMaps.push({id:e.id,map:e.listeners});return this}},{key:"addDocument",value:function(e,t){if(-1!==this.getDocIndex(e))return!1;var n=S.getWindow(e);t=t?s.extend({},t):{},this.documents.push({doc:e,options:t}),this.events.documents.push(e),e!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:e,window:n,scope:this,options:t})}},{key:"removeDocument",value:function(e){var t=this.getDocIndex(e),n=S.getWindow(e),r=this.documents[t].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(t,1),this.events.documents.splice(t,1),this.fire("scope:remove-document",{doc:e,window:n,scope:this,options:r})}},{key:"getDocIndex",value:function(e){for(var t=0;t<this.documents.length;t++)if(this.documents[t].doc===e)return t;return-1}},{key:"getDocOptions",value:function(e){var t=this.getDocIndex(e);return-1===t?null:this.documents[t].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function M(e,t){return e.isInitialized=!0,S.init(t),i.default.init(t),P.init(t),j.init(t),e.window=t,e.document=t.document,e.usePlugin(h.default),e.usePlugin(p.default),e}n.Scope=n.default=E})),r=e((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(C),o=u(k),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(Te),s=u(xn),a=u(zn),c=u(Vn);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}u(n({}));var m=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function v(e,t){return function(n){var o=t.interactions.list,s=i.getPointerType(n),a=d(i.getEventTargets(n),2),c=a[0],u=a[1],l=[];if(/^touch/.test(n.type)){t.prevTouchTime=t.now();for(var f=0;f<n.changedTouches.length;f++){var p,h={pointer:p=n.changedTouches[f],pointerId:i.getPointerId(p),pointerType:s,eventType:n.type,eventTarget:c,curEventTarget:u,scope:t},m=y(h);l.push([h.pointer,h.eventTarget,h.curEventTarget,m])}}else{var v=!1;if(!r.default.supportsPointerEvent&&/mouse/.test(n.type)){for(var g=0;g<o.length&&!v;g++)v="mouse"!==o[g].pointerType&&o[g].pointerIsDown;v=v||t.now()-t.prevTouchTime<500||0===n.timeStamp}if(!v){var b={pointer:n,pointerId:i.getPointerId(n),pointerType:s,eventType:n.type,curEventTarget:u,eventTarget:c,scope:t},w=y(b);l.push([b.pointer,b.eventTarget,b.curEventTarget,w])}}for(var _=0;_<l.length;_++){var x=d(l[_],4),O=x[0],S=x[1],P=x[2];x[3][e](O,n,S,P)}}}function y(e){var t=e.pointerType,n=e.scope,r={interaction:c.default.search(e),searchDetails:e};return n.fire("interactions:find",r),r.interaction||n.interactions.new({pointerType:t})}function g(e,t){var n=e.doc,r=e.scope,o=e.options,i=r.interactions.docEvents,s=r.events,a=s[t];for(var c in r.browser.isIOS&&!o.events&&(o.events={passive:!1}),s.delegatedEvents)a(n,c,s.delegateListener),a(n,c,s.delegateUseCapture,!0);for(var u=o&&o.events,l=0;l<i.length;l++){var d;a(n,(d=i[l]).type,d.listener,u)}}var b={id:"core/interactions",install:function(e){for(var t={},n=0;n<m.length;n++){var i;t[i=m[n]]=v(i,e)}var c,u=r.default.pEventTypes;function d(){for(var t=0;t<e.interactions.list.length;t++){var n=e.interactions.list[t];if(n.pointerIsDown&&"touch"===n.pointerType&&!n._interacting)for(var r=function(){var t=n.pointers[o];e.documents.some((function(e){var n=e.doc;return(0,G.nodeContains)(n,t.downTarget)}))||n.removePointer(t.pointer,t.event)},o=0;o<n.pointers.length;o++)r()}}(c=o.default.PointerEvent?[{type:u.down,listener:d},{type:u.down,listener:t.pointerDown},{type:u.move,listener:t.pointerMove},{type:u.up,listener:t.pointerUp},{type:u.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:d},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(t){for(var n=0;n<e.interactions.list.length;n++)e.interactions.list[n].documentBlur(t)}}),e.prevTouchTime=0,e.Interaction=function(){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,p(t).apply(this,arguments))}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,s.default),n=t,(r=[{key:"_now",value:function(){return e.now()}},{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(t){e.interactions.pointerMoveTolerance=t}}])&&f(n.prototype,r),t}(),e.interactions={list:[],new:function(t){t.scopeFire=function(t,n){return e.fire(t,n)};var n=new e.Interaction(t);return e.interactions.list.push(n),n},listeners:t,docEvents:c,pointerMoveTolerance:1},e.usePlugin(a.default)},listeners:{"scope:add-document":function(e){return g(e,"add")},"scope:remove-document":function(e){return g(e,"remove")},"interactable:unset":function(e,t){for(var n=e.interactable,r=t.interactions.list.length-1;0<=r;r--){var o=t.interactions.list[r];o.interactable===n&&(o.stop(),t.fire("interactions:destroy",{interaction:o}),o.destroy(),2<t.interactions.list.length&&t.interactions.list.splice(r,1))}}},onDocSignal:g,doOnInteractions:v,methodNames:m};t.default=b})),o=e((function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InteractStatic=void 0;var o,i=(o=C)&&o.__esModule?o:{default:o},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(ot),a=n({});function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,u(this,"getPointerAverage",s.pointer.pointerAverage),u(this,"getTouchBBox",s.pointer.touchBBox),u(this,"getTouchDistance",s.pointer.touchDistance),u(this,"getTouchAngle",s.pointer.touchAngle),u(this,"getElementRect",s.dom.getElementRect),u(this,"getElementClientRect",s.dom.getElementClientRect),u(this,"matchesSelector",s.dom.matchesSelector),u(this,"closest",s.dom.closest),u(this,"globalEvents",{}),u(this,"dynamicDrop",void 0),u(this,"version","1.9.8"),u(this,"interact",void 0);for(var r=this.constructor.prototype,o=function(e,r){var o=t.interactables.get(e,r);return o||((o=t.interactables.new(e,r)).events.global=n.globalEvents),o},i=0;i<Object.getOwnPropertyNames(this.constructor.prototype).length;i++){var a;o[a=Object.getOwnPropertyNames(this.constructor.prototype)[i]]=r[a]}return s.extend(o,this),o.constructor=this.constructor,this.interact=o}var t,n;return t=e,(n=[{key:"use",value:function(e,t){return this.scope.usePlugin(e,t),this}},{key:"isSet",value:function(e,t){return!!this.scope.interactables.get(e,t&&t.context)}},{key:"on",value:function(e,t,n){if(s.is.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),s.is.array(e)){for(var r=0;r<e.length;r++){var o=e[r];this.on(o,t,n)}return this}if(s.is.object(e)){for(var i in e)this.on(i,e[i],t);return this}return(0,a.isNonNativeEvent)(e,this.scope.actions)?this.globalEvents[e]?this.globalEvents[e].push(t):this.globalEvents[e]=[t]:this.scope.events.add(this.scope.document,e,t,{options:n}),this}},{key:"off",value:function(e,t,n){if(s.is.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),s.is.array(e)){for(var r=0;r<e.length;r++){var o=e[r];this.off(o,t,n)}return this}if(s.is.object(e)){for(var i in e)this.off(i,e[i],t);return this}var c;return(0,a.isNonNativeEvent)(e,this.scope.actions)?e in this.globalEvents&&-1!==(c=this.globalEvents[e].indexOf(t))&&this.globalEvents[e].splice(c,1):this.scope.events.remove(this.scope.document,e,t,n),this}},{key:"debug",value:function(){return this.scope}},{key:"supportsTouch",value:function(){return i.default.supportsTouch}},{key:"supportsPointerEvent",value:function(){return i.default.supportsPointerEvent}},{key:"stop",value:function(){for(var e=0;e<this.scope.interactions.list.length;e++)this.scope.interactions.list[e].stop();return this}},{key:"pointerMoveTolerance",value:function(e){return s.is.number(e)?(this.scope.interactions.pointerMoveTolerance=e,this):this.scope.interactions.pointerMoveTolerance}},{key:"addDocument",value:function(e,t){this.scope.addDocument(e,t)}},{key:"removeDocument",value:function(e){this.scope.removeDocument(e)}}])&&c(t.prototype,n),e}(),d=t.InteractStatic=l;t.default=d})),i={};Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.init=l,s.getWindow=d,s.default=void 0;var a,c=(a=i)&&a.__esModule?a:{default:a},u={realWindow:void 0,window:void 0,getWindow:d,init:l};function l(e){var t=(u.realWindow=e).document.createTextNode("");t.ownerDocument!==e.document&&"function"==typeof e.wrap&&e.wrap(t)===t&&(e=e.wrap(e)),u.window=e}function d(e){return(0,c.default)(e)?e:(e.ownerDocument||e).defaultView||u.window}"undefined"==typeof window?(u.window=void 0,u.realWindow=void 0):l(window),u.init=l;var f=u;s.default=f;var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.array=p.plainObject=p.element=p.string=p.bool=p.number=p.func=p.object=p.docFrag=p.window=void 0;var h=v(i),m=v(s);function v(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}p.window=function(e){return e===m.default.window||(0,h.default)(e)},p.docFrag=function(e){return g(e)&&11===e.nodeType};var g=function(e){return!!e&&"object"===y(e)};function b(e){return"function"==typeof e}p.object=g,p.func=b,p.number=function(e){return"number"==typeof e},p.bool=function(e){return"boolean"==typeof e},p.string=function(e){return"string"==typeof e},p.element=function(e){if(!e||"object"!==y(e))return!1;var t=m.default.getWindow(e)||m.default.window;return/object|function/.test(y(t.Element))?e instanceof t.Element:1===e.nodeType&&"string"==typeof e.nodeName},p.plainObject=function(e){return g(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},p.array=function(e){return g(e)&&void 0!==e.length&&b(e.splice)};var w={};function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(p);function O(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.prepared.axis;"x"===n?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):"y"===n&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function S(e){var t=e.iEvent,n=e.interaction;if("drag"===n.prepared.name){var r=n.prepared.axis;if("x"===r||"y"===r){var o="x"===r?"y":"x";t.page[o]=n.coords.start.page[o],t.client[o]=n.coords.start.client[o],t.delta[o]=0}}}var P={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,r=e.defaults;n.prototype.draggable=P.draggable,t.map.drag=P,t.methodDict.drag="draggable",r.actions.drag=P.defaults},listeners:{"interactions:before-action-move":O,"interactions:action-resume":O,"interactions:action-move":S,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,r=e.buttons,o=n.options.drag;if(o&&o.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(r&n.options.drag.mouseButtons)))return!(e.action={name:"drag",axis:"start"===o.lockAxis?o.startAxis:o.lockAxis})}},draggable:function(e){return x.object(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):x.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:O,move:S,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},j=P;w.default=j;var E={};function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function T(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}Object.defineProperty(E,"__esModule",{value:!0}),E.find=E.findIndex=E.from=E.merge=E.remove=E.contains=void 0,E.contains=function(e,t){return-1!==e.indexOf(t)},E.remove=function(e,t){return e.splice(e.indexOf(t),1)},E.merge=M,E.from=function(e){return M([],e)},E.findIndex=T,E.find=function(e,t){return e[T(e,t)]};var k={};Object.defineProperty(k,"__esModule",{value:!0}),k.default=void 0;var I={init:function(e){var t=e;I.document=t.document,I.DocumentFragment=t.DocumentFragment||q,I.SVGElement=t.SVGElement||q,I.SVGSVGElement=t.SVGSVGElement||q,I.SVGElementInstance=t.SVGElementInstance||q,I.Element=t.Element||q,I.HTMLElement=t.HTMLElement||I.Element,I.Event=t.Event,I.Touch=t.Touch||q,I.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function q(){}var A=I;k.default=A;var C={};function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var R=F(k),L=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==D(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(p),z=F(s);function F(e){return e&&e.__esModule?e:{default:e}}var N={init:function(e){var t=R.default.Element,n=z.default.window.navigator;N.supportsTouch="ontouchstart"in e||L.func(e.DocumentTouch)&&R.default.document instanceof e.DocumentTouch,N.supportsPointerEvent=!1!==n.pointerEnabled&&!!R.default.PointerEvent,N.isIOS=/iP(hone|od|ad)/.test(n.platform),N.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),N.isIe9=/MSIE 9/.test(n.userAgent),N.isOperaMobile="Opera"===n.appName&&N.supportsTouch&&/Presto/.test(n.userAgent),N.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",N.pEventTypes=N.supportsPointerEvent?R.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,N.wheelEvent="onmousewheel"in R.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},W=N;C.default=W;var U={};function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(U,"__esModule",{value:!0}),U.default=function e(t){var n={};for(var r in t){var o=t[r];V.plainObject(o)?n[r]=e(o):V.array(o)?n[r]=H.from(o):n[r]=o}return n};var H=$(E),V=$(p);function Y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Y=function(){return e},e}function $(e){if(e&&e.__esModule)return e;if(null===e||"object"!==B(e)&&"function"!=typeof e)return{default:e};var t=Y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}var G={};function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(G,"__esModule",{value:!0}),G.nodeContains=function(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},G.closest=function(e,t){for(;J.element(e);){if(oe(e,t))return e;e=re(e)}return null},G.parentNode=re,G.matchesSelector=oe,G.indexOfDeepestElement=function(e){var t,n,r=[],o=e[0],i=o?0:-1;for(t=1;t<e.length;t++){var s=e[t];if(s&&s!==o)if(o){if(s.parentNode!==s.ownerDocument)if(o.parentNode!==s.ownerDocument)if(s.parentNode!==o.parentNode){if(!r.length)for(var a=o,c=void 0;(c=ie(a))&&c!==a.ownerDocument;)r.unshift(a),a=c;var u=void 0;if(o instanceof K.default.HTMLElement&&s instanceof K.default.SVGElement&&!(s instanceof K.default.SVGSVGElement)){if(s===o.parentNode)continue;u=s.ownerSVGElement}else u=s;for(var l=[];u.parentNode!==u.ownerDocument;)l.unshift(u),u=ie(u);for(n=0;l[n]&&l[n]===r[n];)n++;for(var d=[l[n-1],l[n],r[n]],f=d[0].lastChild;f;){if(f===d[1]){o=s,i=t,r=l;break}if(f===d[2])break;f=f.previousSibling}}else(parseInt((0,Q.getWindow)(o).getComputedStyle(o).zIndex,10)||0)<=(parseInt((0,Q.getWindow)(s).getComputedStyle(s).zIndex,10)||0)&&(o=s,i=t);else o=s,i=t}else o=s,i=t}return i},G.matchesUpTo=function(e,t,n){for(;J.element(e);){if(oe(e,t))return!0;if((e=re(e))===n)return oe(e,t)}return!1},G.getActualElement=function(e){return e instanceof K.default.SVGElementInstance?e.correspondingUseElement:e},G.getScrollXY=se,G.getElementClientRect=ae,G.getElementRect=function(e){var t=ae(e);if(!Z.default.isIOS7&&t){var n=se(Q.default.getWindow(e));t.left+=n.x,t.right+=n.x,t.top+=n.y,t.bottom+=n.y}return t},G.getPath=function(e){for(var t=[];e;)t.push(e),e=re(e);return t},G.trySelector=function(e){return!!J.string(e)&&(K.default.document.querySelector(e),!0)};var Z=ne(C),K=ne(k),J=te(p),Q=te(s);function ee(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return ee=function(){return e},e}function te(e){if(e&&e.__esModule)return e;if(null===e||"object"!==X(e)&&"function"!=typeof e)return{default:e};var t=ee();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function ne(e){return e&&e.__esModule?e:{default:e}}function re(e){var t=e.parentNode;if(J.docFrag(t)){for(;(t=t.host)&&J.docFrag(t););return t}return t}function oe(e,t){return Q.default.window!==Q.default.realWindow&&(t=t.replace(/\/deep\//g," ")),e[Z.default.prefixedMatchesSelector](t)}var ie=function(e){return e.parentNode?e.parentNode:e.host};function se(e){return{x:(e=e||Q.default.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function ae(e){var t=e instanceof K.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.default=function(e,t){for(var n in t)e[n]=t[n];return e};var ue={};function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(ue,"__esModule",{value:!0}),ue.default=function e(t,n,r){if(r=r||{},pe.string(t)&&-1!==t.search(" ")&&(t=he(t)),pe.array(t))return t.reduce((function(t,o){return(0,fe.default)(t,e(o,n,r))}),r);if(pe.object(t)&&(n=t,t=""),pe.func(n))r[t]=r[t]||[],r[t].push(n);else if(pe.array(n))for(var o=0;o<n.length;o++){var i=n[o];e(t,i,r)}else if(pe.object(n))for(var s in n){var a=he(s).map((function(e){return"".concat(t).concat(e)}));e(a,n[s],r)}return r};var de,fe=(de=ce)&&de.__esModule?de:{default:de},pe=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==le(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(p);function he(e){return e.trim().split(/ +/)}var me={};function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;var ye=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ve(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(E),ge=we(ce),be=we(ue);function we(e){return e&&e.__esModule?e:{default:e}}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e.immediatePropagationStopped)break;r(e)}}var Se=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xe(this,"options",void 0),xe(this,"types",{}),xe(this,"propagationStopped",!1),xe(this,"immediatePropagationStopped",!1),xe(this,"global",void 0),this.options=(0,ge.default)({},t||{})}var t,n;return t=e,(n=[{key:"fire",value:function(e){var t,n=this.global;(t=this.types[e.type])&&Oe(e,t),!e.propagationStopped&&n&&(t=n[e.type])&&Oe(e,t)}},{key:"on",value:function(e,t){var n=(0,be.default)(e,t);for(e in n)this.types[e]=ye.merge(this.types[e]||[],n[e])}},{key:"off",value:function(e,t){var n=(0,be.default)(e,t);for(e in n){var r=this.types[e];if(r&&r.length)for(var o=0;o<n[e].length;o++){var i=n[e][o],s=r.indexOf(i);-1!==s&&r.splice(s,1)}}}},{key:"getRect",value:function(){return null}}])&&_e(t.prototype,n),e}();me.default=Se;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=void 0,Pe.default=function(e,t){return Math.sqrt(e*e+t*t)};var je={};function Ee(e,t){for(var n in t){var r=Ee.prefixedPropREs,o=!1;for(var i in r)if(0===n.indexOf(i)&&r[i].test(n)){o=!0;break}o||"function"==typeof t[n]||(e[n]=t[n])}return e}Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0,Ee.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var Me=Ee;je.default=Me;var Te={};function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Te,"__esModule",{value:!0}),Te.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},Te.setCoordDeltas=function(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=n.timeStamp-t.timeStamp},Te.setCoordVelocity=function(e,t){var n=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/n,e.page.y=t.page.y/n,e.client.x=t.client.x/n,e.client.y=t.client.y/n,e.timeStamp=n},Te.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},Te.isNativePointer=Ne,Te.getXY=We,Te.getPageXY=Ue,Te.getClientXY=Be,Te.getPointerId=function(e){return De.number(e.pointerId)?e.pointerId:e.identifier},Te.setCoords=function(e,t,n){var r=1<t.length?Ve(t):t[0],o={};Ue(r,o),e.page.x=o.x,e.page.y=o.y,Be(r,o),e.client.x=o.x,e.client.y=o.y,e.timeStamp=n},Te.getTouchPair=He,Te.pointerAverage=Ve,Te.touchBBox=function(e){if(!(e.length||e.touches&&1<e.touches.length))return null;var t=He(e),n=Math.min(t[0].pageX,t[1].pageX),r=Math.min(t[0].pageY,t[1].pageY),o=Math.max(t[0].pageX,t[1].pageX),i=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:r,left:n,top:r,right:o,bottom:i,width:o-n,height:i-r}},Te.touchDistance=function(e,t){var n=t+"X",r=t+"Y",o=He(e),i=o[0][n]-o[1][n],s=o[0][r]-o[1][r];return(0,Ce.default)(i,s)},Te.touchAngle=function(e,t){var n=t+"X",r=t+"Y",o=He(e),i=o[1][n]-o[0][n],s=o[1][r]-o[0][r];return 180*Math.atan2(s,i)/Math.PI},Te.getPointerType=function(e){return De.string(e.pointerType)?e.pointerType:De.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type)||e instanceof qe.default.Touch?"touch":"mouse"},Te.getEventTargets=function(e){var t=De.func(e.composedPath)?e.composedPath():e.path;return[Ae.getActualElement(t?t[0]:e.target),Ae.getActualElement(e.currentTarget)]},Te.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},Te.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(Te,"pointerExtend",{enumerable:!0,get:function(){return Re.default}});var Ie=Fe(C),qe=Fe(k),Ae=ze(G),Ce=Fe(Pe),De=ze(p),Re=Fe(je);function Le(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Le=function(){return e},e}function ze(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ke(e)&&"function"!=typeof e)return{default:e};var t=Le();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function Fe(e){return e&&e.__esModule?e:{default:e}}function Ne(e){return e instanceof qe.default.Event||e instanceof qe.default.Touch}function We(e,t,n){return(n=n||{}).x=t[(e=e||"page")+"X"],n.y=t[e+"Y"],n}function Ue(e,t){return t=t||{x:0,y:0},Ie.default.isOperaMobile&&Ne(e)?(We("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):We("page",e,t),t}function Be(e,t){return t=t||{},Ie.default.isOperaMobile&&Ne(e)?We("screen",e,t):We("client",e,t),t}function He(e){var t=[];return De.array(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function Ve(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var r=e[n];for(var o in t)t[o]+=r[o]}for(var i in t)t[i]/=e.length;return t}var Ye={};function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.getStringOptionResult=Ke,Ye.resolveRectLike=function(e,t,n,r){var o=e;return Ze.string(o)?o=Ke(o,t,n):Ze.func(o)&&(o=o.apply(void 0,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(r))),Ze.element(o)&&(o=(0,G.getElementRect)(o)),o},Ye.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},Ye.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,Xe.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},Ye.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,Xe.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||e.right||0-e.x,e.height=e.height||e.bottom||0-e.y),e},Ye.addEdges=function(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top};var Ge,Xe=(Ge=ce)&&Ge.__esModule?Ge:{default:Ge},Ze=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==$e(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(p);function Ke(e,t,n){return"parent"===e?(0,G.parentNode)(n):"self"===e?t.getRect(n):(0,G.closest)(n,e)}var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.default=function(e,t,n){var r=e.options[n],o=r&&r.origin||e.options.origin,i=(0,Ye.resolveRectLike)(o,e,t,[e&&t]);return(0,Ye.rectToXY)(i)||{x:0,y:0}};var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=void 0;var et,tt,nt=0,rt={request:function(e){return et(e)},cancel:function(e){return tt(e)},init:function(e){if(et=e.requestAnimationFrame,tt=e.cancelAnimationFrame,!et)for(var t=["ms","moz","webkit","o"],n=0;n<t.length;n++){var r=t[n];et=e["".concat(r,"RequestAnimationFrame")],tt=e["".concat(r,"CancelAnimationFrame")]||e["".concat(r,"CancelRequestAnimationFrame")]}et||(et=function(e){var t=Date.now(),n=Math.max(0,16-(t-nt)),r=setTimeout((function(){e(t+n)}),n);return nt=t+n,r},tt=function(e){return clearTimeout(e)})}};Qe.default=rt;var ot={};function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(ot,"__esModule",{value:!0}),ot.warnOnce=function(e,t){var n=!1;return function(){return n||(dt.default.window.console.warn(t),n=!0),e.apply(this,arguments)}},ot.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},Object.defineProperty(ot,"win",{enumerable:!0,get:function(){return dt.default}}),Object.defineProperty(ot,"browser",{enumerable:!0,get:function(){return ft.default}}),Object.defineProperty(ot,"clone",{enumerable:!0,get:function(){return pt.default}}),Object.defineProperty(ot,"extend",{enumerable:!0,get:function(){return ht.default}}),Object.defineProperty(ot,"getOriginXY",{enumerable:!0,get:function(){return mt.default}}),Object.defineProperty(ot,"hypot",{enumerable:!0,get:function(){return vt.default}}),Object.defineProperty(ot,"normalizeListeners",{enumerable:!0,get:function(){return yt.default}}),Object.defineProperty(ot,"raf",{enumerable:!0,get:function(){return gt.default}}),ot.rect=ot.pointer=ot.is=ot.dom=ot.arr=void 0;var st=_t(E);ot.arr=st;var at=_t(G);ot.dom=at;var ct=_t(p);ot.is=ct;var ut=_t(Te);ot.pointer=ut;var lt=_t(Ye);ot.rect=lt;var dt=bt(s),ft=bt(C),pt=bt(U),ht=bt(ce),mt=bt(Je),vt=bt(Pe),yt=bt(ue),gt=bt(Qe);function bt(e){return e&&e.__esModule?e:{default:e}}function wt(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return wt=function(){return e},e}function _t(e){if(e&&e.__esModule)return e;if(null===e||"object"!==it(e)&&"function"!=typeof e)return{default:e};var t=wt();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}var xt={};function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(xt,"__esModule",{value:!0}),xt.default=xt.BaseEvent=void 0;var jt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pt(this,"type",void 0),Pt(this,"target",void 0),Pt(this,"currentTarget",void 0),Pt(this,"interactable",void 0),Pt(this,"_interaction",void 0),Pt(this,"timeStamp",void 0),Pt(this,"immediatePropagationStopped",!1),Pt(this,"propagationStopped",!1),this._interaction=t}return St(e,[{key:"interaction",get:function(){return this._interaction._proxy}}]),St(e,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),e}(),Et=xt.BaseEvent=jt;xt.default=Et;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.default=Mt.defaults=void 0;var Tt=Mt.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};Mt.default=Tt;var kt={};Object.defineProperty(kt,"__esModule",{value:!0}),kt.default=kt.InteractEvent=void 0;var It=Rt(ce),qt=Rt(Je),At=Rt(Pe),Ct=Rt(xt),Dt=Rt(Mt);function Rt(e){return e&&e.__esModule?e:{default:e}}function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bt=function(){function e(t,n,r,o,i,s,a){var c,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c=!(u=Ft(e).call(this,t))||"object"!==Lt(u)&&"function"!=typeof u?Nt(this):u,Ut(Nt(c),"target",void 0),Ut(Nt(c),"currentTarget",void 0),Ut(Nt(c),"relatedTarget",null),Ut(Nt(c),"screenX",void 0),Ut(Nt(c),"screenY",void 0),Ut(Nt(c),"button",void 0),Ut(Nt(c),"buttons",void 0),Ut(Nt(c),"ctrlKey",void 0),Ut(Nt(c),"shiftKey",void 0),Ut(Nt(c),"altKey",void 0),Ut(Nt(c),"metaKey",void 0),Ut(Nt(c),"page",void 0),Ut(Nt(c),"client",void 0),Ut(Nt(c),"delta",void 0),Ut(Nt(c),"rect",void 0),Ut(Nt(c),"x0",void 0),Ut(Nt(c),"y0",void 0),Ut(Nt(c),"t0",void 0),Ut(Nt(c),"dt",void 0),Ut(Nt(c),"duration",void 0),Ut(Nt(c),"clientX0",void 0),Ut(Nt(c),"clientY0",void 0),Ut(Nt(c),"velocity",void 0),Ut(Nt(c),"speed",void 0),Ut(Nt(c),"swipe",void 0),Ut(Nt(c),"timeStamp",void 0),Ut(Nt(c),"dragEnter",void 0),Ut(Nt(c),"dragLeave",void 0),Ut(Nt(c),"axes",void 0),Ut(Nt(c),"preEnd",void 0),i=i||t.element;var l=t.interactable,d=(l&&l.options||Dt.default).deltaSource,f=(0,qt.default)(l,i,r),p="start"===o,h="end"===o,m=p?Nt(c):t.prevEvent,v=p?t.coords.start:h?{page:m.page,client:m.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;return c.page=(0,It.default)({},v.page),c.client=(0,It.default)({},v.client),c.rect=(0,It.default)({},t.rect),c.timeStamp=v.timeStamp,h||(c.page.x-=f.x,c.page.y-=f.y,c.client.x-=f.x,c.client.y-=f.y),c.ctrlKey=n.ctrlKey,c.altKey=n.altKey,c.shiftKey=n.shiftKey,c.metaKey=n.metaKey,c.button=n.button,c.buttons=n.buttons,c.target=i,c.currentTarget=i,c.preEnd=s,c.type=a||r+(o||""),c.interactable=l,c.t0=p?t.pointers[t.pointers.length-1].downTime:m.t0,c.x0=t.coords.start.page.x-f.x,c.y0=t.coords.start.page.y-f.y,c.clientX0=t.coords.start.client.x-f.x,c.clientY0=t.coords.start.client.y-f.y,c.delta=p||h?{x:0,y:0}:{x:c[d].x-m[d].x,y:c[d].y-m[d].y},c.dt=t.coords.delta.timeStamp,c.duration=c.timeStamp-c.t0,c.velocity=(0,It.default)({},t.coords.velocity[d]),c.speed=(0,At.default)(c.velocity.x,c.velocity.y),c.swipe=h||"inertiastart"===o?c.getSwipe():null,c}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(e,Ct.default),t=e,(n=[{key:"getSwipe",value:function(){var e=this._interaction;if(e.prevEvent.speed<600||150<this.timeStamp-e.prevEvent.timeStamp)return null;var t=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI;t<0&&(t+=360);var n=112.5<=t&&t<247.5,r=202.5<=t&&t<337.5;return{up:r,down:!r&&22.5<=t&&t<157.5,left:n,right:!n&&(292.5<=t||t<67.5),angle:t,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"pageX",get:function(){return this.page.x},set:function(e){this.page.x=e}},{key:"pageY",get:function(){return this.page.y},set:function(e){this.page.y=e}},{key:"clientX",get:function(){return this.client.x},set:function(e){this.client.x=e}},{key:"clientY",get:function(){return this.client.y},set:function(e){this.client.y=e}},{key:"dx",get:function(){return this.delta.x},set:function(e){this.delta.x=e}},{key:"dy",get:function(){return this.delta.y},set:function(e){this.delta.y=e}},{key:"velocityX",get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},{key:"velocityY",get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}])&&zt(t.prototype,n),e}(),Ht=kt.InteractEvent=Bt;kt.default=Ht;var Vt={};function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.default=void 0;var $t,Gt=Qt(E),Xt=Qt(G),Zt=($t=ce)&&$t.__esModule?$t:{default:$t},Kt=Qt(p);function Jt(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Jt=function(){return e},e}function Qt(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Yt(e)&&"function"!=typeof e)return{default:e};var t=Jt();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,tn(this,"list",[]),tn(this,"selectorMap",{}),t.addListeners({"interactable:unset":function(e){var t=e.interactable,r=t.target,o=t._context,i=Kt.string(r)?n.selectorMap[r]:r[n.scope.id],s=i.findIndex((function(e){return e.context===o}));i[s]&&(i[s].context=null,i[s].interactable=null),i.splice(s,1)}})}var t,n;return t=e,(n=[{key:"new",value:function(e,t){t=(0,Zt.default)(t||{},{actions:this.scope.actions});var n=new this.scope.Interactable(e,t,this.scope.document,this.scope.events),r={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),Kt.string(e)?(this.selectorMap[e]||(this.selectorMap[e]=[]),this.selectorMap[e].push(r)):(n.target[this.scope.id]||Object.defineProperty(e,this.scope.id,{value:[],configurable:!0}),e[this.scope.id].push(r)),this.scope.fire("interactable:new",{target:e,options:t,interactable:n,win:this.scope._win}),n}},{key:"get",value:function(e,t){var n=t&&t.context||this.scope.document,r=Kt.string(e),o=r?this.selectorMap[e]:e[this.scope.id];if(!o)return null;var i=Gt.find(o,(function(t){return t.context===n&&(r||t.interactable.inContext(e))}));return i&&i.interactable}},{key:"forEachMatch",value:function(e,t){for(var n=0;n<this.list.length;n++){var r=this.list[n],o=void 0;if((Kt.string(r.target)?Kt.element(e)&&Xt.matchesSelector(e,r.target):e===r.target)&&r.inContext(e)&&(o=t(r)),void 0!==o)return o}}}])&&en(t.prototype,n),e}();Vt.default=nn;var rn={};function on(e){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(rn,"__esModule",{value:!0}),rn.default=rn.FakeEvent=void 0;var sn=hn(E),an=hn(G),cn=fn(ce),un=hn(p),ln=fn(je),dn=hn(Te);function fn(e){return e&&e.__esModule?e:{default:e}}function pn(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return pn=function(){return e},e}function hn(e){if(e&&e.__esModule)return e;if(null===e||"object"!==on(e)&&"function"!=typeof e)return{default:e};var t=pn();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var yn=function(){function e(t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.originalEvent=t,r=void 0,(n="currentTarget")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,(0,ln.default)(this,t)}var t,n;return t=e,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&mn(t.prototype,n),e}();function gn(e){if(!un.object(e))return{capture:!!e,passive:!1};var t=(0,cn.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}rn.FakeEvent=yn;var bn={id:"events",install:function(e){var t=[],n={},r=[],o={add:i,remove:s,addDelegate:function(e,t,o,s,u){var l=gn(u);if(!n[o]){n[o]=[];for(var d=0;d<r.length;d++){var f=r[d];i(f,o,a),i(f,o,c,!0)}}var p=n[o],h=sn.find(p,(function(n){return n.selector===e&&n.context===t}));h||(h={selector:e,context:t,listeners:[]},p.push(h)),h.listeners.push([s,l])},removeDelegate:function(e,t,r,o,i){var u,l=gn(i),d=n[r],f=!1;if(d)for(u=d.length-1;0<=u;u--){var p=d[u];if(p.selector===e&&p.context===t){for(var h=p.listeners,m=h.length-1;0<=m;m--){var v=vn(h[m],2),y=v[0],g=v[1],b=g.capture,w=g.passive;if(y===o&&b===l.capture&&w===l.passive){h.splice(m,1),h.length||(d.splice(u,1),s(t,r,a),s(t,r,c,!0)),f=!0;break}}if(f)break}}},delegateListener:a,delegateUseCapture:c,delegatedEvents:n,documents:r,targets:t,supportsOptions:!1,supportsPassive:!1};function i(e,n,r,i){var s=gn(i),a=sn.find(t,(function(t){return t.eventTarget===e}));a||(a={eventTarget:e,events:{}},t.push(a)),a.events[n]||(a.events[n]=[]),e.addEventListener&&!sn.contains(a.events[n],r)&&(e.addEventListener(n,r,o.supportsOptions?s:s.capture),a.events[n].push(r))}function s(e,n,r,i){var a=gn(i),c=sn.findIndex(t,(function(t){return t.eventTarget===e})),u=t[c];if(u&&u.events)if("all"!==n){var l=!1,d=u.events[n];if(d){if("all"===r){for(var f=d.length-1;0<=f;f--)s(e,n,d[f],a);return}for(var p=0;p<d.length;p++)if(d[p]===r){e.removeEventListener(n,r,o.supportsOptions?a:a.capture),d.splice(p,1),0===d.length&&(delete u.events[n],l=!0);break}}l&&!Object.keys(u.events).length&&t.splice(c,1)}else for(n in u.events)u.events.hasOwnProperty(n)&&s(e,n,"all")}function a(e,t){for(var r=gn(t),o=new yn(e),i=n[e.type],s=vn(dn.getEventTargets(e),1)[0],a=s;un.element(a);){for(var c=0;c<i.length;c++){var u=i[c],l=u.selector,d=u.context;if(an.matchesSelector(a,l)&&an.nodeContains(d,s)&&an.nodeContains(d,a)){var f=u.listeners;o.currentTarget=a;for(var p=0;p<f.length;p++){var h=vn(f[p],2),m=h[0],v=h[1],y=v.capture,g=v.passive;y===r.capture&&g===r.passive&&m(o)}}}a=an.parentNode(a)}}function c(e){return a.call(this,e,!0)}return e.document.createElement("div").addEventListener("test",null,{get capture(){return o.supportsOptions=!0},get passive(){return o.supportsPassive=!0}}),e.events=o}};rn.default=bn;var wn={};Object.defineProperty(wn,"__esModule",{value:!0}),wn.default=wn.PointerInfo=void 0;var _n=wn.PointerInfo=function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.pointer=n,this.event=r,this.downTime=o,this.downTarget=i};wn.default=_n;var xn={};function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(xn,"__esModule",{value:!0}),Object.defineProperty(xn,"PointerInfo",{enumerable:!0,get:function(){return kn.default}}),xn.default=xn.Interaction=xn._ProxyMethods=xn._ProxyValues=void 0;var Sn,Pn,jn,En,Mn=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==On(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(ot),Tn=In(kt),kn=In(wn);function In(e){return e&&e.__esModule?e:{default:e}}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e,t,n){return t&&qn(e.prototype,t),n&&qn(e,n),e}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}xn._ProxyValues=Sn,(Pn=Sn||(xn._ProxyValues=Sn={})).interactable="",Pn.element="",Pn.prepared="",Pn.pointerIsDown="",Pn.pointerWasMoved="",Pn._proxy="",xn._ProxyMethods=jn,(En=jn||(xn._ProxyMethods=jn={})).start="",En.move="",En.end="",En.stop="",En.interacting="";var Dn=0,Rn=function(){function e(t){var n=this,r=t.pointerType,o=t.scopeFire;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Cn(this,"interactable",null),Cn(this,"element",null),Cn(this,"rect",void 0),Cn(this,"_rects",void 0),Cn(this,"edges",void 0),Cn(this,"_scopeFire",void 0),Cn(this,"prepared",{name:null,axis:null,edges:null}),Cn(this,"pointerType",void 0),Cn(this,"pointers",[]),Cn(this,"downEvent",null),Cn(this,"downPointer",{}),Cn(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),Cn(this,"prevEvent",null),Cn(this,"pointerIsDown",!1),Cn(this,"pointerWasMoved",!1),Cn(this,"_interacting",!1),Cn(this,"_ending",!1),Cn(this,"_stopped",!0),Cn(this,"_proxy",null),Cn(this,"simulation",null),Cn(this,"doMove",Mn.warnOnce((function(e){this.move(e)}),"The interaction.doMove() method has been renamed to interaction.move()")),Cn(this,"coords",{start:Mn.pointer.newCoords(),prev:Mn.pointer.newCoords(),cur:Mn.pointer.newCoords(),delta:Mn.pointer.newCoords(),velocity:Mn.pointer.newCoords()}),Cn(this,"_id",Dn++),this._scopeFire=o,this.pointerType=r;var i=this;function s(e){Object.defineProperty(n._proxy,e,{get:function(){return i[e]}})}for(var a in this._proxy={},Sn)s(a);function c(e){Object.defineProperty(n._proxy,e,{value:function(){return i[e].apply(i,arguments)}})}for(var u in jn)c(u);this._scopeFire("interactions:new",{interaction:this})}return An(e,[{key:"pointerMoveTolerance",get:function(){return 1}}]),An(e,[{key:"pointerDown",value:function(e,t,n){var r=this.updatePointer(e,t,n,!0),o=this.pointers[r];this._scopeFire("interactions:down",{pointer:e,event:t,eventTarget:n,pointerIndex:r,pointerInfo:o,type:"down",interaction:this})}},{key:"start",value:function(e,t,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===e.name?2:1)||!t.options[e.name].enabled)&&(Mn.copyAction(this.prepared,e),this.interactable=t,this.element=n,this.rect=t.getRect(n),this.edges=this.prepared.edges?Mn.extend({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(e,t,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(e,t,n,!1);var r,o,i=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(r=this.coords.cur.client.x-this.coords.start.client.x,o=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Mn.hypot(r,o)>this.pointerMoveTolerance);var s=this.getPointerIndex(e),a={pointer:e,pointerIndex:s,pointerInfo:this.pointers[s],event:t,type:"move",eventTarget:n,dx:r,dy:o,duplicate:i,interaction:this};i||Mn.pointer.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",a),i||this.simulation||(this.interacting()&&(a.type=null,this.move(a)),this.pointerWasMoved&&Mn.pointer.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(e){e&&e.event||Mn.pointer.setZeroCoords(this.coords.delta),(e=Mn.extend({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},e||{})).phase="move",this._doPhase(e)}},{key:"pointerUp",value:function(e,t,n,r){var o=this.getPointerIndex(e);-1===o&&(o=this.updatePointer(e,t,n,!1));var i=/cancel$/i.test(t.type)?"cancel":"up";this._scopeFire("interactions:".concat(i),{pointer:e,pointerIndex:o,pointerInfo:this.pointers[o],event:t,eventTarget:n,type:i,curEventTarget:r,interaction:this}),this.simulation||this.end(t),this.pointerIsDown=!1,this.removePointer(e,t)}},{key:"documentBlur",value:function(e){this.end(e),this._scopeFire("interactions:blur",{event:e,type:"blur",interaction:this})}},{key:"end",value:function(e){var t;this._ending=!0,e=e||this._latestPointer.event,this.interacting()&&(t=this._doPhase({event:e,interaction:this,phase:"end"})),!(this._ending=!1)===t&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(e){var t=Mn.pointer.getPointerId(e);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:Mn.arr.findIndex(this.pointers,(function(e){return e.id===t}))}},{key:"getPointerInfo",value:function(e){return this.pointers[this.getPointerIndex(e)]}},{key:"updatePointer",value:function(e,t,n,r){var o=Mn.pointer.getPointerId(e),i=this.getPointerIndex(e),s=this.pointers[i];return r=!1!==r&&(r||/(down|start)$/i.test(t.type)),s?s.pointer=e:(s=new kn.default(o,e,t,null,null),i=this.pointers.length,this.pointers.push(s)),Mn.pointer.setCoords(this.coords.cur,this.pointers.map((function(e){return e.pointer})),this._now()),Mn.pointer.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),r&&(this.pointerIsDown=!0,s.downTime=this.coords.cur.timeStamp,s.downTarget=n,Mn.pointer.pointerExtend(this.downPointer,e),this.interacting()||(Mn.pointer.copyCoords(this.coords.start,this.coords.cur),Mn.pointer.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=t,this.pointerWasMoved=!1)),this._updateLatestPointer(e,t,n),this._scopeFire("interactions:update-pointer",{pointer:e,event:t,eventTarget:n,down:r,pointerInfo:s,pointerIndex:i,interaction:this}),i}},{key:"removePointer",value:function(e,t){var n=this.getPointerIndex(e);if(-1!==n){var r=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:e,event:t,eventTarget:null,pointerIndex:n,pointerInfo:r,interaction:this}),this.pointers.splice(n,1)}}},{key:"_updateLatestPointer",value:function(e,t,n){this._latestPointer.pointer=e,this._latestPointer.event=t,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(e,t,n,r){return new Tn.default(this,e,this.prepared.name,t,this.element,n,r)}},{key:"_fireEvent",value:function(e){this.interactable.fire(e),(!this.prevEvent||e.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=e)}},{key:"_doPhase",value:function(e){var t=e.event,n=e.phase,r=e.preEnd,o=e.type,i=this.rect;if(i&&"move"===n&&(Mn.rect.addEdges(this.edges,i,this.coords.delta[this.interactable.options.deltaSource]),i.width=i.right-i.left,i.height=i.bottom-i.top),!1===this._scopeFire("interactions:before-action-".concat(n),e))return!1;var s=e.iEvent=this._createPreparedEvent(t,n,r,o);return this._scopeFire("interactions:action-".concat(n),e),"start"===n&&(this.prevEvent=s),this._fireEvent(s),this._scopeFire("interactions:after-action-".concat(n),e),!0}},{key:"_now",value:function(){return Date.now()}}]),e}(),Ln=xn.Interaction=Rn;xn.default=Ln;var zn={};function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(zn,"__esModule",{value:!0}),zn.install=Bn,zn.default=void 0;var Nn=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Fn(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(p);function Wn(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):Nn.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function Un(e){var t=e.interaction,n=e.event;t.interactable&&t.interactable.checkAndPreventDefault(n)}function Bn(e){var t=e.Interactable;t.prototype.preventDefault=Wn,t.prototype.checkAndPreventDefault=function(t){return function(e,t,n){var r=e.options.preventDefault;if("never"!==r)if("always"!==r){if(t.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){var o=(0,s.getWindow)(n.target).document,i=t.getDocOptions(o);if(!i||!i.events||!1!==i.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||Nn.element(n.target)&&(0,G.matchesSelector)(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,e,t)},e.interactions.docEvents.push({type:"dragstart",listener:function(t){for(var n=0;n<e.interactions.list.length;n++){var r=e.interactions.list[n];if(r.element&&(r.element===t.target||(0,G.nodeContains)(r.element,t.target)))return void r.interactable.checkAndPreventDefault(t)}}})}var Hn={id:"core/interactablePreventDefault",install:Bn,listeners:["down","move","up","cancel"].reduce((function(e,t){return e["interactions:".concat(t)]=Un,e}),{})};zn.default=Hn;var Vn={};function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.default=void 0;var $n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Yn(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(G),Gn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<Gn.methodOrder.length;t++){var n;n=Gn.methodOrder[t];var r=Gn[n](e);if(r)return r}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,r=e.eventTarget,o=e.scope;if(!/down|start/i.test(n))return null;for(var i=0;i<o.interactions.list.length;i++){var s=o.interactions.list[i],a=r;if(s.simulation&&s.simulation.allowResume&&s.pointerType===t)for(;a;){if(a===s.element)return s;a=$n.parentNode(a)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,r=e.pointerType,o=e.eventType,i=e.scope;if("mouse"!==r&&"pen"!==r)return null;for(var s=0;s<i.interactions.list.length;s++){var a=i.interactions.list[s];if(a.pointerType===r){if(a.simulation&&!Xn(a,n))continue;if(a.interacting())return a;t=t||a}}if(t)return t;for(var c=0;c<i.interactions.list.length;c++){var u=i.interactions.list[c];if(!(u.pointerType!==r||/down/i.test(o)&&u.simulation))return u}return null},hasPointer:function(e){for(var t=e.pointerId,n=e.scope,r=0;r<n.interactions.list.length;r++){var o=n.interactions.list[r];if(Xn(o,t))return o}return null},idle:function(e){for(var t=e.pointerType,n=e.scope,r=0;r<n.interactions.list.length;r++){var o=n.interactions.list[r];if(1===o.pointers.length){var i=o.interactable;if(i&&(!i.options.gesture||!i.options.gesture.enabled))continue}else if(2<=o.pointers.length)continue;if(!o.interacting()&&t===o.pointerType)return o}return null}};function Xn(e,t){return e.pointers.some((function(e){return e.id===t}))}var Zn=Gn;Vn.default=Zn;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.default=void 0;var Jn,Qn=(Jn=xt)&&Jn.__esModule?Jn:{default:Jn},er=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==tr(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(E);function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rr(e){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(e,t){return(ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ar=function(){function e(t,n,r){var o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=!(i=rr(e).call(this,n._interaction))||"object"!==tr(i)&&"function"!=typeof i?or(this):i,sr(or(o),"target",void 0),sr(or(o),"dropzone",void 0),sr(or(o),"dragEvent",void 0),sr(or(o),"relatedTarget",void 0),sr(or(o),"draggable",void 0),sr(or(o),"timeStamp",void 0),sr(or(o),"propagationStopped",!1),sr(or(o),"immediatePropagationStopped",!1);var s="dragleave"===r?t.prev:t.cur,a=s.element,c=s.dropzone;return o.type=r,o.target=a,o.currentTarget=a,o.dropzone=c,o.dragEvent=n,o.relatedTarget=n.target,o.draggable=n.interactable,o.timeStamp=n.timeStamp,o}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ir(e,t)}(e,Qn.default),t=e,(n=[{key:"reject",value:function(){var t=this,n=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&n.cur.dropzone===this.dropzone&&n.cur.element===this.target)if(n.prev.dropzone=this.dropzone,n.prev.element=this.target,n.rejected=!0,n.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var r=n.activeDrops,o=er.findIndex(r,(function(e){var n=e.dropzone,r=e.element;return n===t.dropzone&&r===t.target}));n.activeDrops.splice(o,1);var i=new e(n,this.dragEvent,"dropdeactivate");i.dropzone=this.dropzone,i.target=this.target,this.dropzone.fire(i)}else this.dropzone.fire(new e(n,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&nr(t.prototype,n),e}();Kn.default=ar;var cr={};function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(cr,"__esModule",{value:!0}),cr.default=void 0,pr(t({})),pr(n({}));var lr=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ur(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(ot),dr=pr(w),fr=pr(Kn);function pr(e){return e&&e.__esModule?e:{default:e}}function hr(e,t){for(var n=0;n<e.slice().length;n++){var r,o=(r=e.slice()[n]).dropzone,i=r.element;t.dropzone=o,t.target=i,o.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function mr(e,t){for(var n=function(e,t){for(var n=e.interactables,r=[],o=0;o<n.list.length;o++){var i=n.list[o];if(i.options.drop.enabled){var s=i.options.drop.accept;if(!(lr.is.element(s)&&s!==t||lr.is.string(s)&&!lr.dom.matchesSelector(t,s)||lr.is.func(s)&&!s({dropzone:i,draggableElement:t})))for(var a=lr.is.string(i.target)?i._context.querySelectorAll(i.target):lr.is.array(i.target)?i.target:[i.target],c=0;c<a.length;c++){var u;(u=a[c])!==t&&r.push({dropzone:i,element:u})}}}return r}(e,t),r=0;r<n.length;r++){var o;(o=n[r]).rect=o.dropzone.getRect(o.element)}return n}function vr(e,t,n){for(var r=e.dropState,o=e.interactable,i=e.element,s=[],a=0;a<r.activeDrops.length;a++){var c,u=(c=r.activeDrops[a]).dropzone,l=c.element,d=c.rect;s.push(u.dropCheck(t,n,o,i,l,d)?l:null)}var f=lr.dom.indexOfDeepestElement(s);return r.activeDrops[f]||null}function yr(e,t,n){var r=e.dropState,o={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(o.activate=new fr.default(r,n,"dropactivate"),o.activate.target=null,o.activate.dropzone=null),"dragend"===n.type&&(o.deactivate=new fr.default(r,n,"dropdeactivate"),o.deactivate.target=null,o.deactivate.dropzone=null),r.rejected||(r.cur.element!==r.prev.element&&(r.prev.dropzone&&(o.leave=new fr.default(r,n,"dragleave"),n.dragLeave=o.leave.target=r.prev.element,n.prevDropzone=o.leave.dropzone=r.prev.dropzone),r.cur.dropzone&&(o.enter=new fr.default(r,n,"dragenter"),n.dragEnter=r.cur.element,n.dropzone=r.cur.dropzone)),"dragend"===n.type&&r.cur.dropzone&&(o.drop=new fr.default(r,n,"drop"),n.dropzone=r.cur.dropzone,n.relatedTarget=r.cur.element),"dragmove"===n.type&&r.cur.dropzone&&(o.move=new fr.default(r,n,"dropmove"),(o.move.dragmove=n).dropzone=r.cur.dropzone)),o}function gr(e,t){var n=e.dropState,r=n.activeDrops,o=n.cur,i=n.prev;t.leave&&i.dropzone.fire(t.leave),t.move&&o.dropzone.fire(t.move),t.enter&&o.dropzone.fire(t.enter),t.drop&&o.dropzone.fire(t.drop),t.deactivate&&hr(r,t.deactivate),n.prev.dropzone=o.dropzone,n.prev.element=o.element}function br(e,t){var n=e.interaction,r=e.iEvent,o=e.event;if("dragmove"===r.type||"dragend"===r.type){var i=n.dropState;t.dynamicDrop&&(i.activeDrops=mr(t,n.element));var s=r,a=vr(n,s,o);i.rejected=i.rejected&&!!a&&a.dropzone===i.cur.dropzone&&a.element===i.cur.element,i.cur.dropzone=a&&a.dropzone,i.cur.element=a&&a.element,i.events=yr(n,0,s)}}var wr={id:"actions/drop",install:function(e){var t=e.actions,n=e.interactStatic,r=e.Interactable,o=e.defaults;e.usePlugin(dr.default),r.prototype.dropzone=function(e){return function(e,t){if(lr.is.object(t)){if(e.options.drop.enabled=!1!==t.enabled,t.listeners){var n=lr.normalizeListeners(t.listeners),r=Object.keys(n).reduce((function(e,t){return e[/^(enter|leave)/.test(t)?"drag".concat(t):/^(activate|deactivate|move)/.test(t)?"drop".concat(t):t]=n[t],e}),{});e.off(e.options.drop.listeners),e.on(r),e.options.drop.listeners=r}return lr.is.func(t.ondrop)&&e.on("drop",t.ondrop),lr.is.func(t.ondropactivate)&&e.on("dropactivate",t.ondropactivate),lr.is.func(t.ondropdeactivate)&&e.on("dropdeactivate",t.ondropdeactivate),lr.is.func(t.ondragenter)&&e.on("dragenter",t.ondragenter),lr.is.func(t.ondragleave)&&e.on("dragleave",t.ondragleave),lr.is.func(t.ondropmove)&&e.on("dropmove",t.ondropmove),/^(pointer|center)$/.test(t.overlap)?e.options.drop.overlap=t.overlap:lr.is.number(t.overlap)&&(e.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(e.options.drop.accept=t.accept),"checker"in t&&(e.options.drop.checker=t.checker),e}return lr.is.bool(t)?(e.options.drop.enabled=t,e):e.options.drop}(this,e)},r.prototype.dropCheck=function(e,t,n,r,o,i){return function(e,t,n,r,o,i,s){var a=!1;if(!(s=s||e.getRect(i)))return!!e.options.drop.checker&&e.options.drop.checker(t,n,a,e,i,r,o);var c=e.options.drop.overlap;if("pointer"===c){var u=lr.getOriginXY(r,o,"drag"),l=lr.pointer.getPageXY(t);l.x+=u.x,l.y+=u.y;var d=l.x>s.left&&l.x<s.right,f=l.y>s.top&&l.y<s.bottom;a=d&&f}var p=r.getRect(o);if(p&&"center"===c){var h=p.left+p.width/2,m=p.top+p.height/2;a=h>=s.left&&h<=s.right&&m>=s.top&&m<=s.bottom}return p&&lr.is.number(c)&&(a=c<=Math.max(0,Math.min(s.right,p.right)-Math.max(s.left,p.left))*Math.max(0,Math.min(s.bottom,p.bottom)-Math.max(s.top,p.top))/(p.width*p.height)),e.options.drop.checker&&(a=e.options.drop.checker(t,n,a,e,i,r,o)),a}(this,e,t,n,r,o,i)},n.dynamicDrop=function(t){return lr.is.bool(t)?(e.dynamicDrop=t,n):e.dynamicDrop},lr.extend(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,o.actions.drop=wr.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;"drag"===t.prepared.name&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,r=(e.event,e.iEvent);if("drag"===n.prepared.name){var o=n.dropState;o.activeDrops=null,o.events=null,o.activeDrops=mr(t,n.element),o.events=yr(n,0,r),o.events.activate&&(hr(o.activeDrops,o.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:r}))}},"interactions:action-move":br,"interactions:action-end":br,"interactions:after-action-move":function(e,t){var n=e.interaction,r=e.iEvent;"drag"===n.prepared.name&&(gr(n,n.dropState.events),t.fire("actions/drop:move",{interaction:n,dragEvent:r}),n.dropState.events={})},"interactions:after-action-end":function(e,t){var n=e.interaction,r=e.iEvent;"drag"===n.prepared.name&&(gr(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:r}))},"interactions:stop":function(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:mr,getDrop:vr,getDropEvents:yr,fireDropEvents:gr,defaults:{enabled:!1,accept:null,overlap:"pointer"}},_r=wr;cr.default=_r;var xr={};function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(xr,"__esModule",{value:!0}),xr.default=void 0;var Sr=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Or(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(ot);function Pr(e){var t=e.interaction,n=e.iEvent,r=e.phase;if("gesture"===t.prepared.name){var o=t.pointers.map((function(e){return e.pointer})),i="start"===r,s="end"===r,a=t.interactable.options.deltaSource;if(n.touches=[o[0],o[1]],i)n.distance=Sr.pointer.touchDistance(o,a),n.box=Sr.pointer.touchBBox(o),n.scale=1,n.ds=0,n.angle=Sr.pointer.touchAngle(o,a),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(s){var c=t.prevEvent;n.distance=c.distance,n.box=c.box,n.scale=c.scale,n.ds=0,n.angle=c.angle,n.da=0}else n.distance=Sr.pointer.touchDistance(o,a),n.box=Sr.pointer.touchBBox(o),n.scale=n.distance/t.gesture.startDistance,n.angle=Sr.pointer.touchAngle(o,a),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,Sr.is.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}var jr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,r=e.defaults;n.prototype.gesturable=function(e){return Sr.is.object(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):Sr.is.bool(e)?(this.options.gesture.enabled=e,this):this.options.gesture},t.map.gesture=jr,t.methodDict.gesture="gesturable",r.actions.gesture=jr.defaults},listeners:{"interactions:action-start":Pr,"interactions:action-move":Pr,"interactions:action-end":Pr,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return!(e.action={name:"gesture"})}}},defaults:{},getCursor:function(){return""}},Er=jr;xr.default=Er;var Mr={};function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.default=void 0;var kr,Ir=Dr(G),qr=(kr=ce)&&kr.__esModule?kr:{default:kr},Ar=Dr(p);function Cr(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Cr=function(){return e},e}function Dr(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Tr(e)&&"function"!=typeof e)return{default:e};var t=Cr();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function Rr(e,t,n,r,o,i,s){if(!t)return!1;if(!0===t){var a=Ar.number(i.width)?i.width:i.right-i.left,c=Ar.number(i.height)?i.height:i.bottom-i.top;if(s=Math.min(s,("left"===e||"right"===e?a:c)/2),a<0&&("left"===e?e="right":"right"===e&&(e="left")),c<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e)return n.x<(0<=a?i.left:i.right)+s;if("top"===e)return n.y<(0<=c?i.top:i.bottom)+s;if("right"===e)return n.x>(0<=a?i.right:i.left)-s;if("bottom"===e)return n.y>(0<=c?i.bottom:i.top)-s}return!!Ar.element(r)&&(Ar.element(t)?t===r:Ir.matchesUpTo(r,t,o))}function Lr(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var r=t;n.interactable.options.resize.square?("y"===n.resizeAxes?r.delta.x=r.delta.y:r.delta.y=r.delta.x,r.axes="xy"):(r.axes=n.resizeAxes,"x"===n.resizeAxes?r.delta.y=0:"y"===n.resizeAxes&&(r.delta.x=0))}}var zr={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,n=e.browser,r=e.Interactable,o=e.defaults;zr.cursors=n.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},zr.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,r.prototype.resizable=function(t){return function(e,t,n){return Ar.object(t)?(e.options.resize.enabled=!1!==t.enabled,e.setPerAction("resize",t),e.setOnEvents("resize",t),Ar.string(t.axis)&&/^x$|^y$|^xy$/.test(t.axis)?e.options.resize.axis=t.axis:null===t.axis&&(e.options.resize.axis=n.defaults.actions.resize.axis),Ar.bool(t.preserveAspectRatio)?e.options.resize.preserveAspectRatio=t.preserveAspectRatio:Ar.bool(t.square)&&(e.options.resize.square=t.square),e):Ar.bool(t)?(e.options.resize.enabled=t,e):e.options.resize}(this,t,e)},t.map.resize=zr,t.methodDict.resize="resizable",o.actions.resize=zr.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=t,o=n.rect;n._rects={start:(0,qr.default)({},o),corrected:(0,qr.default)({},o),previous:(0,qr.default)({},o),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}}(e),Lr(e)},"interactions:action-move":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=t,o=n.interactable.options.resize.invert,i="reposition"===o||"negate"===o,s=n.rect,a=n._rects,c=a.start,u=a.corrected,l=a.delta,d=a.previous;if((0,qr.default)(d,u),i){if((0,qr.default)(u,s),"reposition"===o){if(u.top>u.bottom){var f=u.top;u.top=u.bottom,u.bottom=f}if(u.left>u.right){var p=u.left;u.left=u.right,u.right=p}}}else u.top=Math.min(s.top,c.bottom),u.bottom=Math.max(s.bottom,c.top),u.left=Math.min(s.left,c.right),u.right=Math.max(s.right,c.left);for(var h in u.width=u.right-u.left,u.height=u.bottom-u.top,u)l[h]=u[h]-d[h];r.edges=n.prepared.edges,r.rect=u,r.deltaRect=l}}(e),Lr(e)},"interactions:action-end":function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=t;r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,r=e.element,o=e.rect,i=e.buttons;if(o){var s=(0,qr.default)({},t.coords.cur.page),a=n.options.resize;if(a&&a.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(i&a.mouseButtons))){if(Ar.object(a.edges)){var c={left:!1,right:!1,top:!1,bottom:!1};for(var u in c)c[u]=Rr(u,a.edges[u],s,t._latestPointer.eventTarget,r,o,a.margin||zr.defaultMargin);c.left=c.left&&!c.right,c.top=c.top&&!c.bottom,(c.left||c.right||c.top||c.bottom)&&(e.action={name:"resize",edges:c})}else{var l="y"!==a.axis&&s.x>o.right-zr.defaultMargin,d="x"!==a.axis&&s.y>o.bottom-zr.defaultMargin;(l||d)&&(e.action={name:"resize",axes:(l?"x":"")+(d?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,r=e.name,o=zr.cursors,i=null;if(n)i=o[r+n];else if(t){for(var s="",a=["top","bottom","left","right"],c=0;c<a.length;c++){var u=a[c];t[u]&&(s+=u)}i=o[s]}return i},defaultMargin:null},Fr=zr;Mr.default=Fr;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0}),Object.defineProperty(Nr,"drag",{enumerable:!0,get:function(){return Wr.default}}),Object.defineProperty(Nr,"drop",{enumerable:!0,get:function(){return Ur.default}}),Object.defineProperty(Nr,"gesture",{enumerable:!0,get:function(){return Br.default}}),Object.defineProperty(Nr,"resize",{enumerable:!0,get:function(){return Hr.default}}),Nr.default=void 0;var Wr=Vr(w),Ur=Vr(cr),Br=Vr(xr),Hr=Vr(Mr);function Vr(e){return e&&e.__esModule?e:{default:e}}var Yr={id:"actions",install:function(e){e.usePlugin(Br.default),e.usePlugin(Hr.default),e.usePlugin(Wr.default),e.usePlugin(Ur.default)}};Nr.default=Yr;var $r={};Object.defineProperty($r,"__esModule",{value:!0}),$r.default=void 0,$r.default={};var Gr={};function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.getContainer=ro,Gr.getScroll=oo,Gr.getScrollSize=function(e){return Jr.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},Gr.getScrollSizeDelta=function(e,t){var n=e.interaction,r=e.element,o=n&&n.interactable.options[n.prepared.name].autoScroll;if(!o||!o.enabled)return t(),{x:0,y:0};var i=ro(o.container,n.interactable,r),s=oo(i);t();var a=oo(i);return{x:a.x-s.x,y:a.y-s.y}},Gr.default=void 0;var Zr,Kr=to(G),Jr=to(p),Qr=(Zr=Qe)&&Zr.__esModule?Zr:{default:Zr};function eo(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return eo=function(){return e},e}function to(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Xr(e)&&"function"!=typeof e)return{default:e};var t=eo();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}var no={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){no.isScrolling=!0,Qr.default.cancel(no.i),(e.autoScroll=no).interaction=e,no.prevTime=no.now(),no.i=Qr.default.request(no.scroll)},stop:function(){no.isScrolling=!1,no.interaction&&(no.interaction.autoScroll=null),Qr.default.cancel(no.i)},scroll:function(){var e=no.interaction,t=e.interactable,n=e.element,r=e.prepared.name,o=t.options[r].autoScroll,i=ro(o.container,t,n),s=no.now(),a=(s-no.prevTime)/1e3,c=o.speed*a;if(1<=c){var u={x:no.x*c,y:no.y*c};if(u.x||u.y){var l=oo(i);Jr.window(i)?i.scrollBy(u.x,u.y):i&&(i.scrollLeft+=u.x,i.scrollTop+=u.y);var d=oo(i),f={x:d.x-l.x,y:d.y-l.y};(f.x||f.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:f,interaction:e,container:i})}no.prevTime=s}no.isScrolling&&(Qr.default.cancel(no.i),no.i=Qr.default.request(no.scroll))},check:function(e,t){var n=e.options;return n[t].autoScroll&&n[t].autoScroll.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&no.check(t.interactable,t.prepared.name))if(t.simulation)no.x=no.y=0;else{var r,o,i,s,a=t.interactable,c=t.element,u=t.prepared.name,l=a.options[u].autoScroll,d=ro(l.container,a,c);if(Jr.window(d))s=n.clientX<no.margin,r=n.clientY<no.margin,o=n.clientX>d.innerWidth-no.margin,i=n.clientY>d.innerHeight-no.margin;else{var f=Kr.getElementClientRect(d);s=n.clientX<f.left+no.margin,r=n.clientY<f.top+no.margin,o=n.clientX>f.right-no.margin,i=n.clientY>f.bottom-no.margin}no.x=o?1:s?-1:0,no.y=i?1:r?-1:0,no.isScrolling||(no.margin=l.margin,no.speed=l.speed,no.start(t))}}};function ro(e,t,n){return(Jr.string(e)?(0,Ye.getStringOptionResult)(e,t,n):e)||(0,s.getWindow)(n)}function oo(e){return Jr.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var io={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;(e.autoScroll=no).now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=no.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,no.stop(),no.interaction&&(no.interaction=null)},"interactions:stop":no.stop,"interactions:action-move":function(e){return no.onInteractionMove(e)}}};Gr.default=io;var so={};function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(so,"__esModule",{value:!0}),so.default=void 0;var co=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ao(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(p);function uo(e){return co.bool(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor}function lo(e){return co.func(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker}var fo={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(t,n,r,o){var i,s,a,c,u,l,d,f=(s=n,a=r,c=o,u=e,l=(i=this).getRect(c),d={action:null,interactable:i,interaction:a,element:c,rect:l,buttons:s.buttons||{0:1,1:4,3:8,4:16}[s.button]},u.fire("auto-start:check",d),d.action);return this.options.actionChecker?this.options.actionChecker(t,n,f,this,o,r):f},t.prototype.ignoreFrom=(0,ot.warnOnce)((function(e){return this._backCompatOption("ignoreFrom",e)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,ot.warnOnce)((function(e){return this._backCompatOption("allowFrom",e)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=lo,t.prototype.styleCursor=uo}};so.default=fo;var po={};function ho(e){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(po,"__esModule",{value:!0}),po.default=void 0;var mo,vo=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ho(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(ot),yo=(mo=so)&&mo.__esModule?mo:{default:mo};function go(e,t,n,r,o){return t.testIgnoreAllow(t.options[e.name],n,r)&&t.options[e.name].enabled&&xo(t,n,e,o)?e:null}function bo(e,t,n,r,o,i,s){for(var a=0,c=r.length;a<c;a++){var u=r[a],l=o[a],d=u.getAction(t,n,e,l);if(d){var f=go(d,u,l,i,s);if(f)return{action:f,interactable:u,element:l}}}return{action:null,interactable:null,element:null}}function wo(e,t,n,r,o){var i=[],s=[],a=r;function c(e){i.push(e),s.push(a)}for(;vo.is.element(a);){i=[],s=[],o.interactables.forEachMatch(a,c);var u=bo(e,t,n,i,s,r,o);if(u.action&&!u.interactable.options[u.action.name].manualStart)return u;a=vo.dom.parentNode(a)}return{action:null,interactable:null,element:null}}function _o(e,t,n){var r=t.action,o=t.interactable,i=t.element;r=r||{name:null},e.interactable=o,e.element=i,vo.copyAction(e.prepared,r),e.rect=o&&r.name?o.getRect(i):null,Po(e,n),n.fire("autoStart:prepared",{interaction:e})}function xo(e,t,n,r){var o=e.options,i=o[n.name].max,s=o[n.name].maxPerElement,a=r.autoStart.maxInteractions,c=0,u=0,l=0;if(!(i&&s&&a))return!1;for(var d=0;d<r.interactions.list.length;d++){var f=r.interactions.list[d],p=f.prepared.name;if(f.interacting()){if(a<=++c)return!1;if(f.interactable===e){if(i<=(u+=p===n.name?1:0))return!1;if(f.element===t&&(l++,p===n.name&&s<=l))return!1}}}return 0<a}function Oo(e,t){return vo.is.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function So(e,t,n){var r=n.autoStart.cursorElement;r&&r!==e&&(r.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function Po(e,t){var n=e.interactable,r=e.element,o=e.prepared;if("mouse"===e.pointerType&&n&&n.options.styleCursor){var i="";if(o.name){var s=n.options[o.name].cursorChecker;i=vo.is.func(s)?s(o,n,r,e._interacting):t.actions.map[o.name].getCursor(o)}So(e.element,i||"",t)}else t.autoStart.cursorElement&&So(t.autoStart.cursorElement,"",t)}var jo={id:"auto-start/base",before:["actions","actions/drag","actions/resize","actions/gesture"],install:function(e){var t=e.interactStatic,n=e.defaults;e.usePlugin(yo.default),n.base.actionChecker=null,n.base.styleCursor=!0,vo.extend(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(t){return Oo(t,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:xo,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,r=e.pointer,o=e.event,i=e.eventTarget;n.interacting()||_o(n,wo(n,r,o,i,t),t)},"interactions:move":function(e,t){var n,r,o,i,s,a;r=t,o=(n=e).interaction,i=n.pointer,s=n.event,a=n.eventTarget,"mouse"!==o.pointerType||o.pointerIsDown||o.interacting()||_o(o,wo(o,i,s,a,r),r),function(e,t){var n=e.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){t.fire("autoStart:before-start",e);var r=n.interactable,o=n.prepared.name;o&&r&&(r.options[o].manualStart||!xo(r,n.element,n.prepared,t)?n.stop():(n.start(n.prepared,r,n.element),Po(n,t)))}}(e,t)},"interactions:stop":function(e,t){var n=e.interaction,r=n.interactable;r&&r.options.styleCursor&&So(n.element,"",t)}},maxInteractions:Oo,withinInteractionLimit:xo,validateAction:go};po.default=jo;var Eo={};function Mo(e){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.default=void 0;var To,ko=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Mo(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(p),Io=(To=po)&&To.__esModule?To:{default:To},qo={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var n=e.interaction,r=e.eventTarget,o=e.dx,i=e.dy;if("drag"===n.prepared.name){var s=Math.abs(o),a=Math.abs(i),c=n.interactable.options.drag,u=c.startAxis,l=a<s?"x":s<a?"y":"xy";if(n.prepared.axis="start"===c.lockAxis?l[0]:c.lockAxis,"xy"!=l&&"xy"!==u&&u!==l){function d(e){if(e!==n.interactable){var o=n.interactable.options.drag;if(!o.manualStart&&e.testIgnoreAllow(o,f,r)){var i=e.getAction(n.downPointer,n.downEvent,n,f);if(i&&"drag"===i.name&&function(e,t){if(t){var n=t.options.drag.startAxis;return"xy"===e||"xy"===n||n===e}}(l,e)&&Io.default.validateAction(i,e,f,r,t))return e}}}n.prepared.name=null;for(var f=r;ko.element(f);){var p=t.interactables.forEachMatch(f,d);if(p){n.prepared.name="drag",n.interactable=p,n.element=f;break}f=(0,G.parentNode)(f)}}}}}};Eo.default=qo;var Ao={};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=void 0;var Co,Do=(Co=po)&&Co.__esModule?Co:{default:Co};function Ro(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var n=e.interactable.options;return n[t].hold||n[t].delay}var Lo={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(Do.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,n=Ro(t);0<n&&(t.autoStartHoldTimer=setTimeout((function(){t.start(t.prepared,t.interactable,t.element)}),n))},"interactions:move":function(e){var t=e.interaction,n=e.duplicate;t.pointerWasMoved&&!n&&clearTimeout(t.autoStartHoldTimer)},"autoStart:before-start":function(e){var t=e.interaction;0<Ro(t)&&(t.prepared.name=null)}},getHoldDuration:Ro};Ao.default=Lo;var zo={};Object.defineProperty(zo,"__esModule",{value:!0}),Object.defineProperty(zo,"autoStart",{enumerable:!0,get:function(){return Fo.default}}),Object.defineProperty(zo,"dragAxis",{enumerable:!0,get:function(){return No.default}}),Object.defineProperty(zo,"hold",{enumerable:!0,get:function(){return Wo.default}}),zo.default=void 0;var Fo=Uo(po),No=Uo(Eo),Wo=Uo(Ao);function Uo(e){return e&&e.__esModule?e:{default:e}}var Bo={id:"auto-start",install:function(e){e.usePlugin(Fo.default),e.usePlugin(Wo.default),e.usePlugin(No.default)}};zo.default=Bo;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.default=void 0,Ho.default={};var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.default=void 0,Vo.default={};var Yo,$o,Go={};function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(Go,"__esModule",{value:!0}),Go.default=void 0,Zo(k),Zo(ce),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Xo(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n)}(p),Zo(s),($o=Yo=Yo||{}).touchAction="touchAction",$o.boxSizing="boxSizing",$o.noListeners="noListeners",Yo.touchAction,Yo.boxSizing,Yo.noListeners;var Ko={id:"dev-tools",install:function(){}};Go.default=Ko;var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.default=void 0,Jo.default={};var Qo={};function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.getRectOffset=li,Qo.default=void 0;var ti=oi(U),ni=oi(ce),ri=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ei(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(Ye);function oi(e){return e&&e.__esModule?e:{default:e}}function ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ci=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interaction=t,ai(this,"states",[]),ai(this,"startOffset",{left:0,right:0,top:0,bottom:0}),ai(this,"startDelta",null),ai(this,"result",null),ai(this,"endResult",null),ai(this,"edges",void 0),this.result=ui()}var t,n;return t=e,(n=[{key:"start",value:function(e,t){var n=e.phase,r=this.interaction,o=function(e){var t=e.interactable.options[e.prepared.name],n=t.modifiers;return n&&n.length?n.filter((function(e){return!e.options||!1!==e.options.enabled})):["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(e){var n=t[e];return n&&n.enabled&&{options:n,methods:n._methods}})).filter((function(e){return!!e}))}(r);this.prepareStates(o),this.edges=(0,ni.default)({},r.edges),this.startOffset=li(r.rect,t);var i={phase:n,pageCoords:t,preEnd:!(this.startDelta={x:0,y:0})};return this.result=ui(),this.startAll(i),this.result=this.setAll(i)}},{key:"fillArg",value:function(e){var t=this.interaction;e.interaction=t,e.interactable=t.interactable,e.element=t.element,e.rect=e.rect||t.rect,e.edges=this.edges,e.startOffset=this.startOffset}},{key:"startAll",value:function(e){this.fillArg(e);for(var t=0;t<this.states.length;t++){var n=this.states[t];n.methods.start&&(e.state=n).methods.start(e)}}},{key:"setAll",value:function(e){this.fillArg(e);var t=e.phase,n=e.preEnd,r=e.skipModifiers,o=e.rect;e.coords=(0,ni.default)({},e.pageCoords),e.rect=(0,ni.default)({},o);for(var i=r?this.states.slice(r):this.states,s=ui(e.coords,e.rect),a=0;a<i.length;a++){var c=i[a],u=c.options,l=(0,ni.default)({},e.coords),d=null;c.methods.set&&this.shouldDo(u,n,t)&&(d=(e.state=c).methods.set(e),ri.addEdges(this.interaction.edges,e.rect,{x:e.coords.x-l.x,y:e.coords.y-l.y})),s.eventProps.push(d)}s.delta.x=e.coords.x-e.pageCoords.x,s.delta.y=e.coords.y-e.pageCoords.y,s.rectDelta.left=e.rect.left-o.left,s.rectDelta.right=e.rect.right-o.right,s.rectDelta.top=e.rect.top-o.top,s.rectDelta.bottom=e.rect.bottom-o.bottom;var f=this.result.coords,p=this.result.rect;if(f&&p){var h=s.rect.left!==p.left||s.rect.right!==p.right||s.rect.top!==p.top||s.rect.bottom!==p.bottom;s.changed=h||f.x!==s.coords.x||f.y!==s.coords.y}return s}},{key:"applyToInteraction",value:function(e){var t=this.interaction,n=e.phase,r=t.coords.cur,o=t.coords.start,i=this.result,s=this.startDelta,a=i.delta;"start"===n&&(0,ni.default)(this.startDelta,i.delta);for(var c=0;c<[[o,s],[r,a]].length;c++){var u=ii([[o,s],[r,a]][c],2),l=u[0],d=u[1];l.page.x+=d.x,l.page.y+=d.y,l.client.x+=d.x,l.client.y+=d.y}var f=this.result.rectDelta,p=e.rect||t.rect;p.left+=f.left,p.right+=f.right,p.top+=f.top,p.bottom+=f.bottom,p.width=p.right-p.left,p.height=p.bottom-p.top}},{key:"setAndApply",value:function(e){var t=this.interaction,n=e.phase,r=e.preEnd,o=e.skipModifiers,i=this.setAll({preEnd:r,phase:n,pageCoords:e.modifiedCoords||t.coords.cur.page});if(!(this.result=i).changed&&(!o||o<this.states.length)&&t.interacting())return!1;if(e.modifiedCoords){var s=t.coords.cur.page,a=e.modifiedCoords.x-s.x,c=e.modifiedCoords.y-s.y;i.coords.x+=a,i.coords.y+=c,i.delta.x+=a,i.delta.y+=c}this.applyToInteraction(e)}},{key:"beforeEnd",value:function(e){var t=e.interaction,n=e.event,r=this.states;if(r&&r.length){for(var o=!1,i=0;i<r.length;i++){var s=r[i],a=(e.state=s).options,c=s.methods,u=c.beforeEnd&&c.beforeEnd(e);if(u)return this.endResult=u,!1;o=o||!o&&this.shouldDo(a,!0,e.phase,!0)}o&&t.move({event:n,preEnd:!0})}}},{key:"stop",value:function(e){var t=e.interaction;if(this.states&&this.states.length){var n=(0,ni.default)({states:this.states,interactable:t.interactable,element:t.element,rect:null},e);this.fillArg(n);for(var r=0;r<this.states.length;r++){var o=this.states[r];(n.state=o).methods.stop&&o.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(e){this.states=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.options,o=n.methods,i=n.name;r&&!1===r.enabled||this.states.push({options:r,methods:o,index:t,name:i})}return this.states}},{key:"restoreInteractionCoords",value:function(e){var t=e.interaction,n=t.coords,r=t.rect,o=t.modification;if(o.result){for(var i=o.startDelta,s=o.result,a=s.delta,c=s.rectDelta,u=[[n.start,i],[n.cur,a]],l=0;l<u.length;l++){var d=ii(u[l],2),f=d[0],p=d[1];f.page.x-=p.x,f.page.y-=p.y,f.client.x-=p.x,f.client.y-=p.y}r.left-=c.left,r.right-=c.right,r.top-=c.top,r.bottom-=c.bottom}}},{key:"shouldDo",value:function(e,t,n,r){return!(!e||!1===e.enabled||r&&!e.endOnly||e.endOnly&&!t||"start"===n&&!e.setStart)}},{key:"copyFrom",value:function(e){this.startOffset=e.startOffset,this.startDelta=e.startDelta,this.edges=e.edges,this.states=e.states.map((function(e){return(0,ti.default)(e)})),this.result=ui((0,ni.default)({},e.result.coords),(0,ni.default)({},e.result.rect))}},{key:"destroy",value:function(){for(var e in this)this[e]=null}}])&&si(t.prototype,n),e}();function ui(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function li(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}Qo.default=ci;var di={};Object.defineProperty(di,"__esModule",{value:!0}),di.makeModifier=function(e,t){function n(e){var n=e||{};for(var i in n.enabled=!1!==n.enabled,r)i in n||(n[i]=r[i]);return{options:n,methods:o,name:t}}var r=e.defaults,o={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop};return t&&"string"==typeof t&&(n._defaults=r,n._methods=o),n},di.addEventModifiers=hi,di.default=void 0;var fi,pi=(fi=Qo)&&fi.__esModule?fi:{default:fi};function hi(e){var t=e.iEvent,n=e.interaction.modification.result;n&&(t.modifiers=n.eventProps)}var mi={id:"modifiers/base",install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new pi.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":hi,"interactions:action-move":hi,"interactions:action-end":hi,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}},before:["actions","action/drag","actions/resize","actions/gesture"]};di.default=mi;var vi={};function yi(e){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(vi,"__esModule",{value:!0}),vi.addTotal=bi,vi.applyPending=_i,vi.default=void 0;var gi=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==yi(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(Ye);function bi(e){e.pointerIsDown&&(Oi(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function wi(e){_i(e.interaction)}function _i(e){if(!(t=e).offset.pending.x&&!t.offset.pending.y)return!1;var t,n=e.offset.pending;return Oi(e.coords.cur,n),Oi(e.coords.delta,n),gi.addEdges(e.edges,e.rect,n),n.x=0,!(n.y=0)}function xi(e){var t=e.x,n=e.y;this.offset.pending.x+=t,this.offset.pending.y+=n,this.offset.total.x+=t,this.offset.total.y+=n}function Oi(e,t){var n=e.page,r=e.client,o=t.x,i=t.y;n.x+=o,n.y+=i,r.x+=o,r.y+=i}xn._ProxyMethods.offsetBy="";var Si={id:"offset",install:function(e){e.Interaction.prototype.offsetBy=xi},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return bi(e.interaction)},"interactions:before-action-start":wi,"interactions:before-action-move":wi,"interactions:before-action-end":function(e){var t=e.interaction;if(_i(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}};vi.default=Si;var Pi={};function ji(e){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.default=Pi.InertiaState=void 0;var Ei=Ri(Qo),Mi=Di(di),Ti=Ri(vi),ki=Di(G),Ii=Ri(Pe),qi=Di(p),Ai=Ri(Qe);function Ci(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Ci=function(){return e},e}function Di(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ji(e)&&"function"!=typeof e)return{default:e};var t=Ci();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function Ri(e){return e&&e.__esModule?e:{default:e}}function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interaction=t,zi(this,"active",!1),zi(this,"isModified",!1),zi(this,"smoothEnd",!1),zi(this,"allowResume",!1),zi(this,"modification",null),zi(this,"modifierCount",0),zi(this,"modifierArg",null),zi(this,"startCoords",null),zi(this,"t0",0),zi(this,"v0",0),zi(this,"te",0),zi(this,"targetOffset",null),zi(this,"modifiedOffset",null),zi(this,"currentOffset",null),zi(this,"lambda_v0",0),zi(this,"one_ve_v0",0),zi(this,"timeout",null)}var t,n;return t=e,(n=[{key:"start",value:function(e){var t=this.interaction,n=Ni(t);if(!n||!n.enabled)return!1;var r=t.coords.velocity.client,o=(0,Ii.default)(r.x,r.y),i=this.modification||(this.modification=new Ei.default(t));if(i.copyFrom(t.modification),this.t0=t._now(),this.allowResume=n.allowResume,this.v0=o,this.currentOffset={x:0,y:0},this.startCoords=t.coords.cur.page,this.modifierArg={interaction:t,interactable:t.interactable,element:t.element,rect:t.rect,edges:t.edges,pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"},this.t0-t.coords.cur.timeStamp<50&&o>n.minSpeed&&o>n.endSpeed)this.startInertia();else{if(i.result=i.setAll(this.modifierArg),!i.result.changed)return!1;this.startSmoothEnd()}return t.modification.result.rect=null,t.offsetBy(this.targetOffset),t._doPhase({interaction:t,event:e,phase:"inertiastart"}),t.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),t.modification.result.rect=null,this.active=!0,t.simulation=this,!0}},{key:"startInertia",value:function(){var e=this,t=this.interaction.coords.velocity.client,n=Ni(this.interaction),r=n.resistance,o=-Math.log(n.endSpeed/this.v0)/r;this.targetOffset={x:(t.x-o)/r,y:(t.y-o)/r},this.te=o,this.lambda_v0=r/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var i=this.modification,s=this.modifierArg;s.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},i.result=i.setAll(s),i.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+i.result.delta.x,y:this.targetOffset.y+i.result.delta.y}),this.timeout=Ai.default.request((function(){return e.inertiaTick()}))}},{key:"startSmoothEnd",value:function(){var e=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.timeout=Ai.default.request((function(){return e.smoothEndTick()}))}},{key:"inertiaTick",value:function(){var e,t,n,r,o,i,s=this,a=this.interaction,c=Ni(a).resistance,u=(a._now()-this.t0)/1e3;if(u<this.te){var l,d=1-(Math.exp(-c*u)-this.lambda_v0)/this.one_ve_v0,f={x:(l=this.isModified?(e=0,t=this.targetOffset.x,n=this.targetOffset.y,r=this.modifiedOffset.x,o=this.modifiedOffset.y,{x:Wi(i=d,0,t,r),y:Wi(i,e,n,o)}):{x:this.targetOffset.x*d,y:this.targetOffset.y*d}).x-this.currentOffset.x,y:l.y-this.currentOffset.y};this.currentOffset.x+=f.x,this.currentOffset.y+=f.y,a.offsetBy(f),a.move(),this.timeout=Ai.default.request((function(){return s.inertiaTick()}))}else a.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var e=this,t=this.interaction,n=t._now()-this.t0,r=Ni(t).smoothEndDuration;if(n<r){var o=Ui(n,0,this.targetOffset.x,r),i=Ui(n,0,this.targetOffset.y,r),s={x:o-this.currentOffset.x,y:i-this.currentOffset.y};this.currentOffset.x+=s.x,this.currentOffset.y+=s.y,t.offsetBy(s),t.move({skipModifiers:this.modifierCount}),this.timeout=Ai.default.request((function(){return e.smoothEndTick()}))}else t.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(e){var t=e.pointer,n=e.event,r=e.eventTarget,o=this.interaction;o.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),o.updatePointer(t,n,r,!0),o._doPhase({interaction:o,event:n,phase:"resume"}),(0,Te.copyCoords)(o.coords.prev,o.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Ai.default.cancel(this.timeout)}}])&&Li(t.prototype,n),e}();function Ni(e){var t=e.interactable,n=e.prepared;return t&&t.options&&n.name&&t.options[n.name].inertia}function Wi(e,t,n,r){var o=1-e;return o*o*t+2*o*e*n+e*e*r}function Ui(e,t,n,r){return-n*(e/=r)*(e-2)+t}Pi.InertiaState=Fi;var Bi={id:"inertia",before:["modifiers/base"],install:function(e){var t=e.defaults;e.usePlugin(Ti.default),e.usePlugin(Mi.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new Fi(t)},"interactions:before-action-end":function(e){var t=e.interaction,n=e.event;return(!t._interacting||t.simulation||!t.inertia.start(n))&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,r=t.inertia;if(r.active)for(var o=n;qi.element(o);){if(o===t.element){r.resume(e);break}o=ki.parentNode(o)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":Mi.addEventModifiers,"interactions:action-inertiastart":Mi.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};Pi.default=Bi;var Hi,Vi={};function Yi(e){return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.init=Vi.default=void 0;var $i=new(((Hi=n({}))&&Hi.__esModule?Hi:{default:Hi}).default),Gi=$i.interactStatic;function Xi(e){return $i.init(e)}Vi.default=Gi,Vi.init=Xi,"object"===("undefined"==typeof window?"undefined":Yi(window))&&window&&Xi(window);var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.default=void 0,Zi.default={};var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.default=void 0,Ki.default={};var Ji={};function Qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.default=void 0,Ji.default=function(e){function t(t,r){for(var o=e.range,i=e.limits,s=void 0===i?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:i,a=e.offset,c=void 0===a?{x:0,y:0}:a,u={range:o,grid:e,x:null,y:null},l=0;l<n.length;l++){var d=Qi(n[l],2),f=d[0],p=d[1],h=Math.round((t-c.x)/e[f]),m=Math.round((r-c.y)/e[p]);u[f]=Math.max(s.left,Math.min(s.right,h*e[f]+c.x)),u[p]=Math.max(s.top,Math.min(s.bottom,m*e[p]+c.y))}return u}var n=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(t){var n=Qi(t,2),r=n[0],o=n[1];return r in e||o in e}));return t.grid=e,t.coordFields=n,t};var es={};Object.defineProperty(es,"__esModule",{value:!0}),Object.defineProperty(es,"edgeTarget",{enumerable:!0,get:function(){return ts.default}}),Object.defineProperty(es,"elements",{enumerable:!0,get:function(){return ns.default}}),Object.defineProperty(es,"grid",{enumerable:!0,get:function(){return rs.default}});var ts=os(Zi),ns=os(Ki),rs=os(Ji);function os(e){return e&&e.__esModule?e:{default:e}}var is={};function ss(e){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(is,"__esModule",{value:!0}),is.default=void 0;var as,cs=(as=ce)&&as.__esModule?as:{default:as},us=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ss(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(es),ls={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,cs.default)(t.snappers||{},us),t.createSnapGrid=t.snappers.grid}};is.default=ls;var ds={};Object.defineProperty(ds,"__esModule",{value:!0}),ds.aspectRatio=ds.default=void 0;var fs=hs(ce),ps=hs(Qo);function hs(e){return e&&e.__esModule?e:{default:e}}function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(n),!0).forEach((function(t){ys(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gs={start:function(e){var t=e.state,n=e.rect,r=e.edges,o=e.pageCoords,i=t.options.ratio,s=t.options,a=s.equalDelta,c=s.modifiers;"preserve"===i&&(i=n.width/n.height),t.startCoords=(0,fs.default)({},o),t.startRect=(0,fs.default)({},n),t.ratio=i,t.equalDelta=a;var u=t.linkedEdges={top:r.top||r.left&&!r.bottom,left:r.left||r.top&&!r.right,bottom:r.bottom||r.right&&!r.top,right:r.right||r.bottom&&!r.left};if(t.xIsPrimaryAxis=!(!r.left&&!r.right),t.equalDelta)t.edgeSign=(u.left?1:-1)*(u.top?1:-1);else{var l=t.xIsPrimaryAxis?u.top:u.left;t.edgeSign=l?-1:1}if((0,fs.default)(e.edges,u),c&&c.length){var d=new ps.default(e.interaction);d.copyFrom(e.interaction.modification),d.prepareStates(c),(t.subModification=d).startAll(vs({},e))}},set:function(e){var t=e.state,n=e.rect,r=e.coords,o=(0,fs.default)({},r),i=t.equalDelta?bs:ws;if(i(t,t.xIsPrimaryAxis,r,n),!t.subModification)return null;var s=(0,fs.default)({},n);(0,Ye.addEdges)(t.linkedEdges,s,{x:r.x-o.x,y:r.y-o.y});var a=t.subModification.setAll(vs({},e,{rect:s,edges:t.linkedEdges,pageCoords:r,prevCoords:r,prevRect:s})),c=a.delta;return a.changed&&(i(t,Math.abs(c.x)>Math.abs(c.y),a.coords,a.rect),(0,fs.default)(r,a.coords)),a.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function bs(e,t,n){var r=e.startCoords,o=e.edgeSign;t?n.y=r.y+(n.x-r.x)*o:n.x=r.x+(n.y-r.y)*o}function ws(e,t,n,r){var o=e.startRect,i=e.startCoords,s=e.ratio,a=e.edgeSign;if(t){var c=r.width/s;n.y=i.y+(c-o.height)*a}else{var u=r.height*s;n.x=i.x+(u-o.width)*a}}ds.aspectRatio=gs;var _s=(0,di.makeModifier)(gs,"aspectRatio");ds.default=_s;var xs={};function Os(){}Object.defineProperty(xs,"__esModule",{value:!0}),xs.default=void 0,Os._defaults={};var Ss=Os;xs.default=Ss;var Ps={};function js(e){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.getRestrictionRect=As,Ps.restrict=Ps.default=void 0;var Es,Ms=(Es=ce)&&Es.__esModule?Es:{default:Es},Ts=qs(p),ks=qs(Ye);function Is(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Is=function(){return e},e}function qs(e){if(e&&e.__esModule)return e;if(null===e||"object"!==js(e)&&"function"!=typeof e)return{default:e};var t=Is();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function As(e,t,n){return Ts.func(e)?ks.resolveRectLike(e,t.interactable,t.element,[n.x,n.y,t]):ks.resolveRectLike(e,t.interactable,t.element)}var Cs={start:function(e){var t=e.rect,n=e.startOffset,r=e.state,o=e.interaction,i=e.pageCoords,s=r.options,a=s.elementRect,c=(0,Ms.default)({left:0,top:0,right:0,bottom:0},s.offset||{});if(t&&a){var u=As(s.restriction,o,i);if(u){var l=u.right-u.left-t.width,d=u.bottom-u.top-t.height;l<0&&(c.left+=l,c.right+=l),d<0&&(c.top+=d,c.bottom+=d)}c.left+=n.left-t.width*a.left,c.top+=n.top-t.height*a.top,c.right+=n.right-t.width*(1-a.right),c.bottom+=n.bottom-t.height*(1-a.bottom)}r.offset=c},set:function(e){var t=e.coords,n=e.interaction,r=e.state,o=r.options,i=r.offset,s=As(o.restriction,n,t);if(s){var a=ks.xywhToTlbr(s);t.x=Math.max(Math.min(a.right-i.right,t.x),a.left+i.left),t.y=Math.max(Math.min(a.bottom-i.bottom,t.y),a.top+i.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Ps.restrict=Cs;var Ds=(0,di.makeModifier)(Cs,"restrict");Ps.default=Ds;var Rs={};function Ls(e){return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.restrictEdges=Rs.default=void 0;var zs,Fs=(zs=ce)&&zs.__esModule?zs:{default:zs},Ns=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Ls(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(Ye),Ws={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Us={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Bs(e,t){for(var n=["top","left","bottom","right"],r=0;r<n.length;r++){var o=n[r];o in e||(e[o]=t[o])}return e}var Hs={noInner:Ws,noOuter:Us,start:function(e){var t,n=e.interaction,r=e.startOffset,o=e.state,i=o.options;if(i){var s=(0,Ps.getRestrictionRect)(i.offset,n,n.coords.start.page);t=Ns.rectToXY(s)}t=t||{x:0,y:0},o.offset={top:t.y+r.top,left:t.x+r.left,bottom:t.y-r.bottom,right:t.x-r.right}},set:function(e){var t=e.coords,n=e.edges,r=e.interaction,o=e.state,i=o.offset,s=o.options;if(n){var a=(0,Fs.default)({},t),c=(0,Ps.getRestrictionRect)(s.inner,r,a)||{},u=(0,Ps.getRestrictionRect)(s.outer,r,a)||{};Bs(c,Ws),Bs(u,Us),n.top?t.y=Math.min(Math.max(u.top+i.top,a.y),c.top+i.top):n.bottom&&(t.y=Math.max(Math.min(u.bottom+i.bottom,a.y),c.bottom+i.bottom)),n.left?t.x=Math.min(Math.max(u.left+i.left,a.x),c.left+i.left):n.right&&(t.x=Math.max(Math.min(u.right+i.right,a.x),c.right+i.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Rs.restrictEdges=Hs;var Vs=(0,di.makeModifier)(Hs,"restrictEdges");Rs.default=Vs;var Ys,$s={};Object.defineProperty($s,"__esModule",{value:!0}),$s.restrictRect=$s.default=void 0;var Gs=(0,((Ys=ce)&&Ys.__esModule?Ys:{default:Ys}).default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},Ps.restrict.defaults),Xs={start:Ps.restrict.start,set:Ps.restrict.set,defaults:Gs};$s.restrictRect=Xs;var Zs=(0,di.makeModifier)(Xs,"restrictRect");$s.default=Zs;var Ks={};function Js(e){return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.restrictSize=Ks.default=void 0;var Qs,ea=(Qs=ce)&&Qs.__esModule?Qs:{default:Qs},ta=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Js(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(Ye),na={width:-1/0,height:-1/0},ra={width:1/0,height:1/0},oa={start:function(e){return Rs.restrictEdges.start(e)},set:function(e){var t=e.interaction,n=e.state,r=e.rect,o=e.edges,i=n.options;if(o){var s=ta.tlbrToXywh((0,Ps.getRestrictionRect)(i.min,t,e.coords))||na,a=ta.tlbrToXywh((0,Ps.getRestrictionRect)(i.max,t,e.coords))||ra;n.options={endOnly:i.endOnly,inner:(0,ea.default)({},Rs.restrictEdges.noInner),outer:(0,ea.default)({},Rs.restrictEdges.noOuter)},o.top?(n.options.inner.top=r.bottom-s.height,n.options.outer.top=r.bottom-a.height):o.bottom&&(n.options.inner.bottom=r.top+s.height,n.options.outer.bottom=r.top+a.height),o.left?(n.options.inner.left=r.right-s.width,n.options.outer.left=r.right-a.width):o.right&&(n.options.inner.right=r.left+s.width,n.options.outer.right=r.left+a.width),Rs.restrictEdges.set(e),n.options=i}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Ks.restrictSize=oa;var ia=(0,di.makeModifier)(oa,"restrictSize");Ks.default=ia;var sa={};function aa(){}Object.defineProperty(sa,"__esModule",{value:!0}),sa.default=void 0,aa._defaults={};var ca=aa;sa.default=ca;var ua={};function la(e){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(ua,"__esModule",{value:!0}),ua.snap=ua.default=void 0;var da=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==la(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(ot),fa={start:function(e){var t,n,r,o=e.interaction,i=e.interactable,s=e.element,a=e.rect,c=e.state,u=e.startOffset,l=c.options,d=l.offsetWithOrigin?(n=(t=e).interaction.element,da.rect.rectToXY(da.rect.resolveRectLike(t.state.options.origin,null,null,[n]))||da.getOriginXY(t.interactable,n,t.interaction.prepared.name)):{x:0,y:0};if("startCoords"===l.offset)r={x:o.coords.start.page.x,y:o.coords.start.page.y};else{var f=da.rect.resolveRectLike(l.offset,i,s,[o]);(r=da.rect.rectToXY(f)||{x:0,y:0}).x+=d.x,r.y+=d.y}var p=l.relativePoints;c.offsets=a&&p&&p.length?p.map((function(e,t){return{index:t,relativePoint:e,x:u.left-a.width*e.x+r.x,y:u.top-a.height*e.y+r.y}})):[da.extend({index:0,relativePoint:null},r)]},set:function(e){var t=e.interaction,n=e.coords,r=e.state,o=r.options,i=r.offsets,s=da.getOriginXY(t.interactable,t.element,t.prepared.name),a=da.extend({},n),c=[];o.offsetWithOrigin||(a.x-=s.x,a.y-=s.y);for(var u=0;u<i.length;u++)for(var l=i[u],d=a.x-l.x,f=a.y-l.y,p=0,h=o.targets.length;p<h;p++){var m,v=o.targets[p];(m=da.is.func(v)?v(d,f,t,l,p):v)&&c.push({x:(da.is.number(m.x)?m.x:d)+l.x,y:(da.is.number(m.y)?m.y:f)+l.y,range:da.is.number(m.range)?m.range:o.range,source:v,index:p,offset:l})}for(var y={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},g=0;g<c.length;g++){var b=c[g],w=b.range,_=b.x-a.x,x=b.y-a.y,O=da.hypot(_,x),S=O<=w;w===1/0&&y.inRange&&y.range!==1/0&&(S=!1),y.target&&!(S?y.inRange&&w!==1/0?O/w<y.distance/y.range:w===1/0&&y.range!==1/0||O<y.distance:!y.inRange&&O<y.distance)||(y.target=b,y.distance=O,y.range=w,y.inRange=S,y.delta.x=_,y.delta.y=x)}return y.inRange&&(n.x=y.target.x,n.y=y.target.y),r.closest=y},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};ua.snap=fa;var pa=(0,di.makeModifier)(fa,"snap");ua.default=pa;var ha={};function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(ha,"__esModule",{value:!0}),ha.snapSize=ha.default=void 0;var va,ya=(va=ce)&&va.__esModule?va:{default:va},ga=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ma(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(p);function ba(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var wa={start:function(e){var t=e.state,n=e.edges,r=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:r.offset||"self",origin:{x:0,y:0},range:r.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],ua.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t=e.interaction,n=e.state,r=e.coords,o=n.options,i=n.offsets,s={x:r.x-i[0].x,y:r.y-i[0].y};n.options=(0,ya.default)({},o),n.options.targets=[];for(var a=0;a<(o.targets||[]).length;a++){var c=(o.targets||[])[a],u=void 0;if(u=ga.func(c)?c(s.x,s.y,t):c){for(var l=0;l<n.targetFields.length;l++){var d=ba(n.targetFields[l],2),f=d[0],p=d[1];if(f in u||p in u){u.x=u[f],u.y=u[p];break}}n.options.targets.push(u)}}var h=ua.snap.set(e);return n.options=o,h},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};ha.snapSize=wa;var _a=(0,di.makeModifier)(wa,"snapSize");ha.default=_a;var xa={};Object.defineProperty(xa,"__esModule",{value:!0}),xa.snapEdges=xa.default=void 0;var Oa=Pa(U),Sa=Pa(ce);function Pa(e){return e&&e.__esModule?e:{default:e}}var ja={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],ha.snapSize.start(e)):null},set:ha.snapSize.set,defaults:(0,Sa.default)((0,Oa.default)(ha.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};xa.snapEdges=ja;var Ea=(0,di.makeModifier)(ja,"snapEdges");xa.default=Ea;var Ma={};function Ta(){}Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.default=void 0,Ta._defaults={};var ka=Ta;Ma.default=ka;var Ia={};function qa(){}Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.default=void 0,qa._defaults={};var Aa=qa;Ia.default=Aa;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.default=void 0;var Da=$a(ds),Ra=$a(xs),La=$a(Rs),za=$a(Ps),Fa=$a($s),Na=$a(Ks),Wa=$a(sa),Ua=$a(xa),Ba=$a(ua),Ha=$a(ha),Va=$a(Ma),Ya=$a(Ia);function $a(e){return e&&e.__esModule?e:{default:e}}var Ga={aspectRatio:Da.default,restrictEdges:La.default,restrict:za.default,restrictRect:Fa.default,restrictSize:Na.default,snapEdges:Ua.default,snap:Ba.default,snapSize:Ha.default,spring:Va.default,avoid:Ra.default,transform:Ya.default,rubberband:Wa.default};Ca.default=Ga;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.default=void 0;var Za=Qa(is),Ka=Qa(Ca),Ja=Qa(di);function Qa(e){return e&&e.__esModule?e:{default:e}}var ec={id:"modifiers",install:function(e){var t=e.interactStatic;for(var n in e.usePlugin(Ja.default),e.usePlugin(Za.default),t.modifiers=Ka.default,Ka.default){var r=Ka.default[n],o=r._defaults,i=r._methods;o._methods=i,e.defaults.perAction[n]=o}}};Xa.default=ec;var tc={};Object.defineProperty(tc,"__esModule",{value:!0}),tc.default=void 0,tc.default={};var nc={};Object.defineProperty(nc,"__esModule",{value:!0}),nc.PointerEvent=nc.default=void 0;var rc,oc=(rc=xt)&&rc.__esModule?rc:{default:rc},ic=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==sc(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(Te);function sc(e){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cc(e){return(cc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lc(e,t){return(lc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fc=function(){function e(t,n,r,o,i,s){var a,c;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=!(c=cc(e).call(this,i))||"object"!==sc(c)&&"function"!=typeof c?uc(this):c,dc(uc(a),"type",void 0),dc(uc(a),"originalEvent",void 0),dc(uc(a),"pointerId",void 0),dc(uc(a),"pointerType",void 0),dc(uc(a),"double",void 0),dc(uc(a),"pageX",void 0),dc(uc(a),"pageY",void 0),dc(uc(a),"clientX",void 0),dc(uc(a),"clientY",void 0),dc(uc(a),"dt",void 0),dc(uc(a),"eventable",void 0),ic.pointerExtend(uc(a),r),r!==n&&ic.pointerExtend(uc(a),n),a.timeStamp=s,a.originalEvent=r,a.type=t,a.pointerId=ic.getPointerId(n),a.pointerType=ic.getPointerType(n),a.target=o,a.currentTarget=null,"tap"===t){var u=i.getPointerIndex(n);a.dt=a.timeStamp-i.pointers[u].downTime;var l=a.timeStamp-i.tapTime;a.double=!!(i.prevTap&&"doubletap"!==i.prevTap.type&&i.prevTap.target===a.target&&l<500)}else"doubletap"===t&&(a.dt=n.timeStamp-i.tapTime);return a}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lc(e,t)}(e,oc.default),t=e,(n=[{key:"_subtractOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX-=t,this.pageY-=n,this.clientX-=t,this.clientY-=n,this}},{key:"_addOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX+=t,this.pageY+=n,this.clientX+=t,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&ac(t.prototype,n),e}();nc.PointerEvent=nc.default=fc;var pc={};function hc(e){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(pc,"__esModule",{value:!0}),pc.default=void 0,yc(xn),yc(n({}));var mc=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==hc(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(ot),vc=yc(nc);function yc(e){return e&&e.__esModule?e:{default:e}}var gc={id:"pointer-events/base",install:function(e){e.pointerEvents=gc,e.defaults.actions.pointerEvents=gc.defaults,mc.extend(e.actions.phaselessTypes,gc.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,n=e.pointerInfo;!t&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,r=e.pointer,o=e.event,i=e.eventTarget,s=e.duplicate,a=n.getPointerIndex(r);s||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&clearTimeout(n.pointers[a].hold.timeout),bc({interaction:n,pointer:r,event:o,eventTarget:i,type:"move"},t))},"interactions:down":function(e,t){!function(e,t){for(var n=e.interaction,r=e.pointer,o=e.event,i=e.eventTarget,s=e.pointerIndex,a=n.pointers[s].hold,c=mc.dom.getPath(i),u={interaction:n,pointer:r,event:o,eventTarget:i,type:"hold",targets:[],path:c,node:null},l=0;l<c.length;l++){var d=c[l];u.node=d,t.fire("pointerEvents:collect-targets",u)}if(u.targets.length){for(var f=1/0,p=0;p<u.targets.length;p++){var h=u.targets[p].eventable.options.holdDuration;h<f&&(f=h)}a.duration=f,a.timeout=setTimeout((function(){bc({interaction:n,eventTarget:i,pointer:r,event:o,type:"hold"},t)}),f)}}(e,t),bc(e,t)},"interactions:up":function(e,t){var n,r,o,i,s,a;_c(e),bc(e,t),r=t,o=(n=e).interaction,i=n.pointer,s=n.event,a=n.eventTarget,o.pointerWasMoved||bc({interaction:o,eventTarget:a,pointer:i,event:s,type:"tap"},r)},"interactions:cancel":function(e,t){_c(e),bc(e,t)}},PointerEvent:vc.default,fire:bc,collectEventTargets:wc,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function bc(e,t){var n=e.interaction,r=e.pointer,o=e.event,i=e.eventTarget,s=e.type,a=e.targets,c=void 0===a?wc(e,t):a,u=new vc.default(s,r,o,i,n,t.now());t.fire("pointerEvents:new",{pointerEvent:u});for(var l={interaction:n,pointer:r,event:o,eventTarget:i,targets:c,type:s,pointerEvent:u},d=0;d<c.length;d++){var f=c[d];for(var p in f.props||{})u[p]=f.props[p];var h=mc.getOriginXY(f.eventable,f.node);if(u._subtractOrigin(h),u.eventable=f.eventable,u.currentTarget=f.node,f.eventable.fire(u),u._addOrigin(h),u.immediatePropagationStopped||u.propagationStopped&&d+1<c.length&&c[d+1].node!==u.currentTarget)break}if(t.fire("pointerEvents:fired",l),"tap"===s){var m=u.double?bc({interaction:n,pointer:r,event:o,eventTarget:i,type:"doubletap"},t):u;n.prevTap=m,n.tapTime=m.timeStamp}return u}function wc(e,t){var n=e.interaction,r=e.pointer,o=e.event,i=e.eventTarget,s=e.type,a=n.getPointerIndex(r),c=n.pointers[a];if("tap"===s&&(n.pointerWasMoved||!c||c.downTarget!==i))return[];for(var u=mc.dom.getPath(i),l={interaction:n,pointer:r,event:o,eventTarget:i,type:s,path:u,targets:[],node:null},d=0;d<u.length;d++){var f=u[d];l.node=f,t.fire("pointerEvents:collect-targets",l)}return"hold"===s&&(l.targets=l.targets.filter((function(e){return e.eventable.options.holdDuration===n.pointers[a].hold.duration}))),l.targets}function _c(e){var t=e.interaction,n=e.pointerIndex;t.pointers[n].hold&&clearTimeout(t.pointers[n].hold.timeout)}var xc=gc;pc.default=xc;var Oc={};Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.default=void 0,Pc(nc);var Sc=Pc(pc);function Pc(e){return e&&e.__esModule?e:{default:e}}function jc(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}var Ec={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(Sc.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(e,t){return e["pointerEvents:".concat(t)]=jc,e}),{"pointerEvents:new":function(e){var t=e.pointerEvent;"hold"===t.type&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,r=e.pointerEvent,o=e.eventTarget,i=e.targets;if("hold"===r.type&&i.length){var s=i[0].eventable.options.holdRepeatInterval;s<=0||(n.holdIntervalHandle=setTimeout((function(){t.pointerEvents.fire({interaction:n,eventTarget:o,type:"hold",pointer:r,event:r},t)}),s))}}})};Oc.default=Ec;var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.default=void 0;var Tc,kc=(Tc=ce)&&Tc.__esModule?Tc:{default:Tc};function Ic(e){return(0,kc.default)(this.events.options,e),this}var qc={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=Ic;var n=t.prototype._backCompatOption;t.prototype._backCompatOption=function(e,t){var r=n.call(this,e,t);return r===this&&(this.events.options[e]=t),r}},listeners:{"pointerEvents:collect-targets":function(e,t){var n=e.targets,r=e.node,o=e.type,i=e.eventTarget;t.interactables.forEachMatch(r,(function(e){var t=e.events,s=t.options;t.types[o]&&t.types[o].length&&e.testIgnoreAllow(s,r,i)&&n.push({node:r,eventable:t,props:{interactable:e}})}))},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}},"interactable:set":function(e,t){var n=e.interactable,r=e.options;(0,kc.default)(n.events.options,t.pointerEvents.defaults),(0,kc.default)(n.events.options,r.pointerEvents||{})}}};Mc.default=qc;var Ac={};function Cc(e){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ac,"__esModule",{value:!0}),Object.defineProperty(Ac,"holdRepeat",{enumerable:!0,get:function(){return Rc.default}}),Object.defineProperty(Ac,"interactableTargets",{enumerable:!0,get:function(){return Lc.default}}),Ac.pointerEvents=Ac.default=void 0;var Dc=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Cc(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(pc);Ac.pointerEvents=Dc;var Rc=zc(Oc),Lc=zc(Mc);function zc(e){return e&&e.__esModule?e:{default:e}}var Fc={id:"pointer-events",install:function(e){e.usePlugin(Dc),e.usePlugin(Rc.default),e.usePlugin(Lc.default)}};Ac.default=Fc;var Nc,Wc={};function Uc(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(t){return function(e,t,n){function r(){var r=o[a],c=e.getRect(r);if(!c)return"break";var u=ot.arr.find(n.interactions.list,(function(n){return n.interacting()&&n.interactable===e&&n.element===r&&n.prepared.name===t.name})),l=void 0;if(u)u.move(),s&&(l=u._reflowPromise||new i((function(e){u._reflowResolve=e})));else{var d=ot.rect.tlbrToXywh(c),f={page:{x:d.x,y:d.y},client:{x:d.x,y:d.y},timeStamp:n.now()},p=ot.pointer.coordsToEvent(f);l=function(e,t,n,r,o){var i=e.interactions.new({pointerType:"reflow"}),s={interaction:i,event:o,pointer:o,eventTarget:n,phase:"reflow"};i.interactable=t,i.element=n,i.prepared=(0,ot.extend)({},r),i.prevEvent=o,i.updatePointer(o,o,n,!0),i._doPhase(s);var a=ot.win.window.Promise?new ot.win.window.Promise((function(e){i._reflowResolve=e})):null;return i._reflowPromise=a,i.start(r,t,n),i._interacting?(i.move(s),i.end(o)):i.stop(),i.removePointer(o,o),i.pointerIsDown=!1,a}(n,e,r,t,p)}s&&s.push(l)}for(var o=ot.is.string(e.target)?ot.arr.from(e._context.querySelectorAll(e.target)):[e.target],i=ot.win.window.Promise,s=i?[]:null,a=0;a<o.length&&"break"!==r();a++);return s&&i.all(s).then((function(){return e}))}(this,t,e)}}Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.install=Uc,Wc.default=void 0,(Nc=t({}))&&Nc.__esModule;var Bc={id:"reflow",install:Uc,listeners:{"interactions:stop":function(e,t){var n=e.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),ot.arr.remove(t.interactions.list,n))}}};Wc.default=Bc;var Hc={};Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.default=void 0,Hc.default={};var Vc={};Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.exchange=void 0,Vc.exchange={};var Yc={};Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.default=void 0,Yc.default={};var $c={};function Gc(e){return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty($c,"__esModule",{value:!0}),$c.default=void 0;var Xc=mu(Nr),Zc=mu($r),Kc=mu(Gr),Jc=mu(zo),Qc=mu(Ho),eu=mu(Vo),tu=mu(zn),nu=(mu(Go),hu(Jo)),ru=mu(Pi),ou=mu(Vi),iu=mu(Xa),su=mu(tc),au=mu(vi),cu=mu(Ac),uu=mu(Wc),lu=hu(Hc),du=hu(Te),fu=hu(Yc);function pu(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return pu=function(){return e},e}function hu(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Gc(e)&&"function"!=typeof e)return{default:e};var t=pu();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function mu(e){return e&&e.__esModule?e:{default:e}}ou.default.use(su.default),ou.default.use(tu.default),ou.default.use(au.default),ou.default.use(Qc.default),ou.default.use(Zc.default),ou.default.use(cu.default),ou.default.use(ru.default),ou.default.use(iu.default),ou.default.use(Jc.default),ou.default.use(Xc.default),ou.default.use(Kc.default),ou.default.use(uu.default),ou.default.feedback=nu,ou.default.use(eu.default),ou.default.vue={components:fu},ou.default.__utils={exchange:Vc.exchange,displace:lu,pointer:du};var vu=ou.default;$c.default=vu;var yu={exports:{}};Object.defineProperty(yu.exports,"__esModule",{value:!0}),yu.exports.default=void 0;var gu,bu=(gu=$c)&&gu.__esModule?gu:{default:gu};function wu(e){return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}if("object"===wu(yu)&&yu)try{yu.exports=bu.default}catch(e){}bu.default.default=bu.default;var _u=bu.default;return yu.exports.default=_u,yu.exports}()},function(e,t,n){
/*! lozad.js - v1.7.0 - 2018-11-08
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2018 Apoorv Saxena; Licensed MIT */
e.exports=function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t="undefined"!=typeof document&&document.documentMode,n={rootMargin:"0px",threshold:0,load:function(e){if("picture"===e.nodeName.toLowerCase()){var n=document.createElement("img");t&&e.getAttribute("data-iesrc")&&(n.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(n.alt=e.getAttribute("data-alt")),e.appendChild(n)}e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset")),e.getAttribute("data-background-image")&&(e.style.backgroundImage="url('"+e.getAttribute("data-background-image")+"')"),e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded:function(){}};function r(e){e.setAttribute("data-loaded",!0)}var o=function(e){return"true"===e.getAttribute("data-loaded")};return function(){var t,i,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=e({},n,a),u=c.root,l=c.rootMargin,d=c.threshold,f=c.load,p=c.loaded,h=void 0;return window.IntersectionObserver&&(h=new IntersectionObserver((t=f,i=p,function(e,n){e.forEach((function(e){(0<e.intersectionRatio||e.isIntersecting)&&(n.unobserve(e.target),o(e.target)||(t(e.target),r(e.target),i(e.target)))}))}),{root:u,rootMargin:l,threshold:d})),{observe:function(){for(var e=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)}(s,u),t=0;t<e.length;t++)o(e[t])||(h?h.observe(e[t]):(f(e[t]),r(e[t]),p(e[t])))},triggerLoad:function(e){o(e)||(f(e),r(e),p(e))},observer:h}}}()},function(e,t,n){var r,o;
/*! PhotoSwipe - v4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */void 0===(o="function"==typeof(r=function(){"use strict";return function(e,t,n,r){var o={features:null,bind:function(e,t,n,r){var o=(r?"remove":"add")+"EventListener";t=t.split(" ");for(var i=0;i<t.length;i++)t[i]&&e[o](t[i],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var r=e.length;r--;)if(e[r][n]===t)return r;return-1},extend:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&e.hasOwnProperty(r))continue;e[r]=t[r]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!n.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);i&&i.length>0&&(i=parseInt(i[1],10))>=1&&i<8&&(n.isOldIOSPhone=!0)}var s=r.match(/Android\s([0-9\.]*)/),a=s?s[1]:0;(a=parseFloat(a))>=1&&(a<4.4&&(n.isOldAndroid=!0),n.androidVersion=a),n.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var c,u,l=["transform","perspective","animationName"],d=["","webkit","Moz","ms","O"],f=0;f<4;f++){t=d[f];for(var p=0;p<3;p++)c=l[p],u=t+(t?c.charAt(0).toUpperCase()+c.slice(1):c),!n[c]&&u in e&&(n[c]=u);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var h=0;n.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-h)),r=window.setTimeout((function(){e(t+n)}),n);return h=t+n,r},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=n,n}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,r){t=t.split(" ");for(var o,i=(r?"detach":"attach")+"Event",s=function(){n.handleEvent.call(n)},a=0;a<t.length;a++)if(o=t[a])if("object"==typeof n&&n.handleEvent){if(r){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=s;e[i]("on"+o,n["oldIE"+o])}else e[i]("on"+o,n)});var i=this,s={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:0,showAnimationDuration:0,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(s,r);var a,c,u,l,d,f,p,h,m,v,y,g,b,w,_,x,O,S,P,j,E,M,T,k,I,q,A,C,D,R,L,z,F,N,W,U,B,H,V,Y,$,G,X,Z,K,J,Q,ee,te,ne,re,oe,ie,se,ae,ce,ue={x:0,y:0},le={x:0,y:0},de={x:0,y:0},fe={},pe=0,he={},me={x:0,y:0},ve=0,ye=!0,ge=[],be={},we=!1,_e=function(e,t){o.extend(i,t.publicMethods),ge.push(e)},xe=function(e){var t=Wt();return e>t-1?e-t:e<0?t+e:e},Oe={},Se=function(e,t){return Oe[e]||(Oe[e]=[]),Oe[e].push(t)},Pe=function(e){var t=Oe[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(i,n)}},je=function(){return(new Date).getTime()},Ee=function(e){se=e,i.bg.style.opacity=e*s.bgOpacity},Me=function(e,t,n,r,o){(!we||o&&o!==i.currItem)&&(r/=o?o.fitRatio:i.currItem.fitRatio),e[M]=g+t+"px, "+n+"px"+b+" scale("+r+")"},Te=function(e){te&&(e&&(v>i.currItem.fitRatio?we||(Zt(i.currItem,!1,!0),we=!0):we&&(Zt(i.currItem),we=!1)),Me(te,de.x,de.y,v))},ke=function(e){e.container&&Me(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Ie=function(e,t){t[M]=g+e+"px, 0px"+b},qe=function(e,t){if(!s.loop&&t){var n=l+(me.x*pe-e)/me.x,r=Math.round(e-lt.x);(n<0&&r>0||n>=Wt()-1&&r<0)&&(e=lt.x+r*s.mainScrollEndFriction)}lt.x=e,Ie(e,d)},Ae=function(e,t){var n=dt[e]-he[e];return le[e]+ue[e]+n-n*(t/y)},Ce=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},De=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Re=null,Le=function(){Re&&(o.unbind(document,"mousemove",Le),o.addClass(e,"pswp--has_mouse"),s.mouseUsed=!0,Pe("mouseUsed")),Re=setTimeout((function(){Re=null}),100)},ze=function(e,t){var n=Yt(i.currItem,fe,e);return t&&(ee=n),n},Fe=function(e){return e||(e=i.currItem),e.initialZoomLevel},Ne=function(e){return e||(e=i.currItem),e.w>0?s.maxSpreadZoom:1},We=function(e,t,n,r){return r===i.currItem.initialZoomLevel?(n[e]=i.currItem.initialPosition[e],!0):(n[e]=Ae(e,r),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ue=function(e){var t="";s.escKey&&27===e.keyCode?t="close":s.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,i[t]()))},Be=function(e){e&&(G||$||ne||B)&&(e.preventDefault(),e.stopPropagation())},He=function(){i.setScrollOffset(0,o.getScrollY())},Ve={},Ye=0,$e=function(e){Ve[e]&&(Ve[e].raf&&q(Ve[e].raf),Ye--,delete Ve[e])},Ge=function(e){Ve[e]&&$e(e),Ve[e]||(Ye++,Ve[e]={})},Xe=function(){for(var e in Ve)Ve.hasOwnProperty(e)&&$e(e)},Ze=function(e,t,n,r,o,i,s){var a,c=je();Ge(e);var u=function(){if(Ve[e]){if((a=je()-c)>=r)return $e(e),i(n),void(s&&s());i((n-t)*o(a/r)+t),Ve[e].raf=I(u)}};u()},Ke={shout:Pe,listen:Se,viewportSize:fe,options:s,isMainScrollAnimating:function(){return ne},getZoomLevel:function(){return v},getCurrentIndex:function(){return l},isDragging:function(){return V},isZooming:function(){return J},setScrollOffset:function(e,t){he.x=e,R=he.y=t,Pe("updateScrollOffset",he)},applyZoomPan:function(e,t,n,r){de.x=t,de.y=n,v=e,Te(r)},init:function(){if(!a&&!c){var n;i.framework=o,i.template=e,i.bg=o.getChildByClass(e,"pswp__bg"),A=e.className,a=!0,L=o.detectFeatures(),I=L.raf,q=L.caf,M=L.transform,D=L.oldIE,i.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),i.container=o.getChildByClass(i.scrollWrap,"pswp__container"),d=i.container.style,i.itemHolders=x=[{el:i.container.children[0],wrap:0,index:-1},{el:i.container.children[1],wrap:0,index:-1},{el:i.container.children[2],wrap:0,index:-1}],x[0].el.style.display=x[2].el.style.display="none",function(){if(M){var t=L.perspective&&!k;return g="translate"+(t?"3d(":"("),void(b=L.perspective?", 0px)":")")}M="left",o.addClass(e,"pswp--ie"),Ie=function(e,t){t.left=e+"px"},ke=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,r=t*e.w,o=t*e.h;n.width=r+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Te=function(){if(te){var e=te,t=i.currItem,n=t.fitRatio>1?1:t.fitRatio,r=n*t.w,o=n*t.h;e.width=r+"px",e.height=o+"px",e.left=de.x+"px",e.top=de.y+"px"}}}(),m={resize:i.updateSize,orientationchange:function(){clearTimeout(z),z=setTimeout((function(){fe.x!==i.scrollWrap.clientWidth&&i.updateSize()}),500)},scroll:He,keydown:Ue,click:Be};var r=L.isOldIOSPhone||L.isOldAndroid||L.isMobileOpera;for(L.animationName&&L.transform&&!r||(s.showAnimationDuration=s.hideAnimationDuration=0),n=0;n<ge.length;n++)i["init"+ge[n]]();t&&(i.ui=new t(i,o)).init(),Pe("firstUpdate"),l=l||s.index||0,(isNaN(l)||l<0||l>=Wt())&&(l=0),i.currItem=Nt(l),(L.isOldIOSPhone||L.isOldAndroid)&&(ye=!1),e.setAttribute("aria-hidden","false"),s.modal&&(ye?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===R&&(Pe("initialLayout"),R=C=o.getScrollY());var u="pswp--open ";for(s.mainClass&&(u+=s.mainClass+" "),s.showHideOpacity&&(u+="pswp--animate_opacity "),u+=k?"pswp--touch":"pswp--notouch",u+=L.animationName?" pswp--css_animation":"",u+=L.svg?" pswp--svg":"",o.addClass(e,u),i.updateSize(),f=-1,ve=null,n=0;n<3;n++)Ie((n+f)*me.x,x[n].el.style);D||o.bind(i.scrollWrap,h,i),Se("initialZoomInEnd",(function(){i.setContent(x[0],l-1),i.setContent(x[2],l+1),x[0].el.style.display=x[2].el.style.display="block",s.focus&&e.focus(),o.bind(document,"keydown",i),L.transform&&o.bind(i.scrollWrap,"click",i),s.mouseUsed||o.bind(document,"mousemove",Le),o.bind(window,"resize scroll orientationchange",i),Pe("bindEvents")})),i.setContent(x[1],l),i.updateCurrItem(),Pe("afterInit"),ye||(w=setInterval((function(){Ye||V||J||v!==i.currItem.initialZoomLevel||i.updateSize()}),1e3)),o.addClass(e,"pswp--visible")}},close:function(){a&&(a=!1,c=!0,Pe("close"),o.unbind(window,"resize scroll orientationchange",i),o.unbind(window,"scroll",m.scroll),o.unbind(document,"keydown",i),o.unbind(document,"mousemove",Le),L.transform&&o.unbind(i.scrollWrap,"click",i),V&&o.unbind(window,p,i),clearTimeout(z),Pe("unbindEvents"),Ut(i.currItem,null,!0,i.destroy))},destroy:function(){Pe("destroy"),Rt&&clearTimeout(Rt),e.setAttribute("aria-hidden","true"),e.className=A,w&&clearInterval(w),o.unbind(i.scrollWrap,h,i),o.unbind(window,"scroll",i),ht(),Xe(),Oe=null},panTo:function(e,t,n){n||(e>ee.min.x?e=ee.min.x:e<ee.max.x&&(e=ee.max.x),t>ee.min.y?t=ee.min.y:t<ee.max.y&&(t=ee.max.y)),de.x=e,de.y=t,Te()},handleEvent:function(e){e=e||window.event,m[e.type]&&m[e.type](e)},goTo:function(e){var t=(e=xe(e))-l;ve=t,l=e,i.currItem=Nt(l),pe-=t,qe(me.x*pe),Xe(),ne=!1,i.updateCurrItem()},next:function(){i.goTo(l+1)},prev:function(){i.goTo(l-1)},updateCurrZoomItem:function(e){if(e&&Pe("beforeChange",0),x[1].el.children.length){var t=x[1].el.children[0];te=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else te=null;ee=i.currItem.bounds,y=v=i.currItem.initialZoomLevel,de.x=ee.center.x,de.y=ee.center.y,e&&Pe("afterChange")},invalidateCurrItems:function(){_=!0;for(var e=0;e<3;e++)x[e].item&&(x[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==ve){var t,n=Math.abs(ve);if(!(e&&n<2)){i.currItem=Nt(l),we=!1,Pe("beforeChange",ve),n>=3&&(f+=ve+(ve>0?-3:3),n=3);for(var r=0;r<n;r++)ve>0?(t=x.shift(),x[2]=t,f++,Ie((f+2)*me.x,t.el.style),i.setContent(t,l-n+r+1+1)):(t=x.pop(),x.unshift(t),f--,Ie(f*me.x,t.el.style),i.setContent(t,l+n-r-1-1));if(te&&1===Math.abs(ve)){var o=Nt(O);o.initialZoomLevel!==v&&(Yt(o,fe),Zt(o),ke(o))}ve=0,i.updateCurrZoomItem(),O=l,Pe("afterChange")}}},updateSize:function(t){if(!ye&&s.modal){var n=o.getScrollY();if(R!==n&&(e.style.top=n+"px",R=n),!t&&be.x===window.innerWidth&&be.y===window.innerHeight)return;be.x=window.innerWidth,be.y=window.innerHeight,e.style.height=be.y+"px"}if(fe.x=i.scrollWrap.clientWidth,fe.y=i.scrollWrap.clientHeight,He(),me.x=fe.x+Math.round(fe.x*s.spacing),me.y=fe.y,qe(me.x*pe),Pe("beforeResize"),void 0!==f){for(var r,a,c,u=0;u<3;u++)r=x[u],Ie((u+f)*me.x,r.el.style),c=l+u-1,s.loop&&Wt()>2&&(c=xe(c)),(a=Nt(c))&&(_||a.needsUpdate||!a.bounds)?(i.cleanSlide(a),i.setContent(r,c),1===u&&(i.currItem=a,i.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===r.index&&c>=0&&i.setContent(r,c),a&&a.container&&(Yt(a,fe),Zt(a),ke(a));_=!1}y=v=i.currItem.initialZoomLevel,(ee=i.currItem.bounds)&&(de.x=ee.center.x,de.y=ee.center.y,Te(!0)),Pe("resize")},zoomTo:function(e,t,n,r,i){t&&(y=v,dt.x=Math.abs(t.x)-de.x,dt.y=Math.abs(t.y)-de.y,Ce(le,de));var s=ze(e,!1),a={};We("x",s,a,e),We("y",s,a,e);var c=v,u=de.x,l=de.y;De(a);var d=function(t){1===t?(v=e,de.x=a.x,de.y=a.y):(v=(e-c)*t+c,de.x=(a.x-u)*t+u,de.y=(a.y-l)*t+l),i&&i(t),Te(1===t)};n?Ze("customZoomTo",0,1,n,r||o.easing.sine.inOut,d):d(1)}},Je={},Qe={},et={},tt={},nt={},rt=[],ot={},it=[],st={},at=0,ct={x:0,y:0},ut=0,lt={x:0,y:0},dt={x:0,y:0},ft={x:0,y:0},pt=function(e,t){return st.x=Math.abs(e.x-t.x),st.y=Math.abs(e.y-t.y),Math.sqrt(st.x*st.x+st.y*st.y)},ht=function(){X&&(q(X),X=null)},mt=function(){V&&(X=I(mt),Tt())},vt=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:vt(e.parentNode,t))},yt={},gt=function(e,t){return yt.prevent=!vt(e.target,s.isClickableElement),Pe("preventDragEvent",e,t,yt),yt.prevent},bt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},wt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},_t=function(){var e=de.y-i.currItem.initialPosition.y;return 1-Math.abs(e/(fe.y/2))},xt={},Ot={},St=[],Pt=function(e){for(;St.length>0;)St.pop();return T?(ce=0,rt.forEach((function(e){0===ce?St[0]=e:1===ce&&(St[1]=e),ce++}))):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(St[0]=bt(e.touches[0],xt),e.touches.length>1&&(St[1]=bt(e.touches[1],Ot))):(xt.x=e.pageX,xt.y=e.pageY,xt.id="",St[0]=xt),St},jt=function(e,t){var n,r,o,a,c=de[e]+t[e],u=t[e]>0,l=lt.x+t.x,d=lt.x-ot.x;if(n=c>ee.min[e]||c<ee.max[e]?s.panEndFriction:1,c=de[e]+t[e]*n,(s.allowPanToNext||v===i.currItem.initialZoomLevel)&&(te?"h"!==re||"x"!==e||$||(u?(c>ee.min[e]&&(n=s.panEndFriction,ee.min[e],r=ee.min[e]-le[e]),(r<=0||d<0)&&Wt()>1?(a=l,d<0&&l>ot.x&&(a=ot.x)):ee.min.x!==ee.max.x&&(o=c)):(c<ee.max[e]&&(n=s.panEndFriction,ee.max[e],r=le[e]-ee.max[e]),(r<=0||d>0)&&Wt()>1?(a=l,d>0&&l<ot.x&&(a=ot.x)):ee.min.x!==ee.max.x&&(o=c))):a=l,"x"===e))return void 0!==a&&(qe(a,!0),Z=a!==ot.x),ee.min.x!==ee.max.x&&(void 0!==o?de.x=o:Z||(de.x+=t.x*n)),void 0!==a;ne||Z||v>i.currItem.fitRatio&&(de[e]+=t[e]*n)},Et=function(e){if(!("mousedown"===e.type&&e.button>0))if(Ft)e.preventDefault();else if(!H||"mousedown"!==e.type){if(gt(e,!0)&&e.preventDefault(),Pe("pointerDown"),T){var t=o.arraySearch(rt,e.pointerId,"id");t<0&&(t=rt.length),rt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Pt(e),r=n.length;K=null,Xe(),V&&1!==r||(V=oe=!0,o.bind(window,p,i),U=ae=ie=B=Z=G=Y=$=!1,re=null,Pe("firstTouchStart",n),Ce(le,de),ue.x=ue.y=0,Ce(tt,n[0]),Ce(nt,tt),ot.x=me.x*pe,it=[{x:tt.x,y:tt.y}],N=F=je(),ze(v,!0),ht(),mt()),!J&&r>1&&!ne&&!Z&&(y=v,$=!1,J=Y=!0,ue.y=ue.x=0,Ce(le,de),Ce(Je,n[0]),Ce(Qe,n[1]),wt(Je,Qe,ft),dt.x=Math.abs(ft.x)-de.x,dt.y=Math.abs(ft.y)-de.y,Q=pt(Je,Qe))}},Mt=function(e){if(e.preventDefault(),T){var t=o.arraySearch(rt,e.pointerId,"id");if(t>-1){var n=rt[t];n.x=e.pageX,n.y=e.pageY}}if(V){var r=Pt(e);if(re||G||J)K=r;else if(lt.x!==me.x*pe)re="h";else{var i=Math.abs(r[0].x-tt.x)-Math.abs(r[0].y-tt.y);Math.abs(i)>=10&&(re=i>0?"h":"v",K=r)}}},Tt=function(){if(K){var e=K.length;if(0!==e)if(Ce(Je,K[0]),et.x=Je.x-tt.x,et.y=Je.y-tt.y,J&&e>1){if(tt.x=Je.x,tt.y=Je.y,!et.x&&!et.y&&function(e,t){return e.x===t.x&&e.y===t.y}(K[1],Qe))return;Ce(Qe,K[1]),$||($=!0,Pe("zoomGestureStarted"));var t=pt(Je,Qe),n=Ct(t);n>i.currItem.initialZoomLevel+i.currItem.initialZoomLevel/15&&(ae=!0);var r=1,o=Fe(),a=Ne();if(n<o)if(s.pinchToClose&&!ae&&y<=i.currItem.initialZoomLevel){var c=1-(o-n)/(o/1.2);Ee(c),Pe("onPinchClose",c),ie=!0}else(r=(o-n)/o)>1&&(r=1),n=o-r*(o/3);else n>a&&((r=(n-a)/(6*o))>1&&(r=1),n=a+r*o);r<0&&(r=0),wt(Je,Qe,ct),ue.x+=ct.x-ft.x,ue.y+=ct.y-ft.y,Ce(ft,ct),de.x=Ae("x",n),de.y=Ae("y",n),U=n>v,v=n,Te()}else{if(!re)return;if(oe&&(oe=!1,Math.abs(et.x)>=10&&(et.x-=K[0].x-nt.x),Math.abs(et.y)>=10&&(et.y-=K[0].y-nt.y)),tt.x=Je.x,tt.y=Je.y,0===et.x&&0===et.y)return;if("v"===re&&s.closeOnVerticalDrag&&"fit"===s.scaleMode&&v===i.currItem.initialZoomLevel){ue.y+=et.y,de.y+=et.y;var u=_t();return B=!0,Pe("onVerticalDrag",u),Ee(u),void Te()}!function(e,t,n){if(e-N>50){var r=it.length>2?it.shift():{};r.x=t,r.y=n,it.push(r),N=e}}(je(),Je.x,Je.y),G=!0,ee=i.currItem.bounds,jt("x",et)||(jt("y",et),De(de),Te())}}},kt=function(e){if(L.isOldAndroid){if(H&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(H),H=setTimeout((function(){H=0}),600))}var t;if(Pe("pointerUp"),gt(e,!1)&&e.preventDefault(),T){var n=o.arraySearch(rt,e.pointerId,"id");n>-1&&(t=rt.splice(n,1)[0],navigator.pointerEnabled?t.type=e.pointerType||"mouse":(t.type={4:"mouse",2:"touch",3:"pen"}[e.pointerType],t.type||(t.type=e.pointerType||"mouse")))}var r,a=Pt(e),c=a.length;if("mouseup"===e.type&&(c=0),2===c)return K=null,!0;1===c&&Ce(nt,a[0]),0!==c||re||ne||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Pe("touchRelease",e,t));var u=-1;if(0===c&&(V=!1,o.unbind(window,p,i),ht(),J?u=0:-1!==ut&&(u=je()-ut)),ut=1===c?je():-1,r=-1!==u&&u<150?"zoom":"swipe",J&&c<2&&(J=!1,1===c&&(r="zoomPointerUp"),Pe("zoomGestureEnded")),K=null,G||$||ne||B)if(Xe(),W||(W=It()),W.calculateSwipeSpeed("x"),B)if(_t()<s.verticalDragRange)i.close();else{var l=de.y,d=se;Ze("verticalDrag",0,1,300,o.easing.cubic.out,(function(e){de.y=(i.currItem.initialPosition.y-l)*e+l,Ee((1-d)*e+d),Te()})),Pe("onVerticalDrag",1)}else{if((Z||ne)&&0===c){if(At(r,W))return;r="zoomPointerUp"}ne||("swipe"===r?!Z&&v>i.currItem.fitRatio&&qt(W):Dt())}},It=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){it.length>1?(e=je()-N+50,t=it[it.length-2][r]):(e=je()-F,t=nt[r]),n.lastFlickOffset[r]=tt[r]-t,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickDist[r]>20?n.lastFlickSpeed[r]=n.lastFlickOffset[r]/e:n.lastFlickSpeed[r]=0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(de[e]>ee.min[e]?n.backAnimDestination[e]=ee.min[e]:de[e]<ee.max[e]&&(n.backAnimDestination[e]=ee.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,Ze("bounceZoomPan"+e,de[e],n.backAnimDestination[e],t||300,o.easing.sine.out,(function(t){de[e]=t,Te()})))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,de[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Ve.zoomPan&&(Ve.zoomPan.raf=I(n.panAnimLoop),n.now=je(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Te(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return de.x=Math.round(de.x),de.y=Math.round(de.y),Te(),void $e("zoomPan")}};return n},qt=function(e){if(e.calculateSwipeSpeed("y"),ee=i.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;Ge("zoomPan"),e.lastNow=je(),e.panAnimLoop()},At=function(e,t){var n,r,a;if(ne||(at=l),"swipe"===e){var c=tt.x-nt.x,u=t.lastFlickDist.x<10;c>30&&(u||t.lastFlickOffset.x>20)?r=-1:c<-30&&(u||t.lastFlickOffset.x<-20)&&(r=1)}r&&((l+=r)<0?(l=s.loop?Wt()-1:0,a=!0):l>=Wt()&&(l=s.loop?0:Wt()-1,a=!0),a&&!s.loop||(ve+=r,pe-=r,n=!0));var d,f=me.x*pe,p=Math.abs(f-lt.x);return n||f>lt.x==t.lastFlickSpeed.x>0?(d=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,d=Math.min(d,400),d=Math.max(d,250)):d=333,at===l&&(n=!1),ne=!0,Pe("mainScrollAnimStart"),Ze("mainScroll",lt.x,f,d,o.easing.cubic.out,qe,(function(){Xe(),ne=!1,at=-1,(n||at!==l)&&i.updateCurrItem(),Pe("mainScrollAnimComplete")})),n&&i.updateCurrItem(!0),n},Ct=function(e){return 1/Q*e*y},Dt=function(){var e=v,t=Fe(),n=Ne();v<t?e=t:v>n&&(e=n);var r,s=se;return ie&&!U&&!ae&&v<t?(i.close(),!0):(ie&&(r=function(e){Ee((1-s)*e+s)}),i.zoomTo(e,0,200,o.easing.cubic.out,r),!0)};_e("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,r,o){S=e+t,P=e+n,j=e+r,E=o?e+o:""};(T=L.pointerEvent)&&L.touch&&(L.touch=!1),T?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):L.touch?(e("touch","start","move","end","cancel"),k=!0):e("mouse","down","move","up"),p=P+" "+j+" "+E,h=S,T&&!k&&(k=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),i.likelyTouchDevice=k,m[S]=Et,m[P]=Mt,m[j]=kt,E&&(m[E]=m[j]),L.touch&&(h+=" mousedown",p+=" mousemove mouseup",m.mousedown=m[S],m.mousemove=m[P],m.mouseup=m[j]),k||(s.allowPanToNext=!1)}}});var Rt,Lt,zt,Ft,Nt,Wt,Ut=function(t,n,r,a){var c;Rt&&clearTimeout(Rt),Ft=!0,zt=!0,t.initialLayout?(c=t.initialLayout,t.initialLayout=null):c=s.getThumbBoundsFn&&s.getThumbBoundsFn(l);var d,f,p=r?s.hideAnimationDuration:s.showAnimationDuration,h=function(){$e("initialZoom"),r?(i.template.removeAttribute("style"),i.bg.removeAttribute("style")):(Ee(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),Pe("initialZoom"+(r?"OutEnd":"InEnd"))),a&&a(),Ft=!1};if(!p||!c||void 0===c.x)return Pe("initialZoom"+(r?"Out":"In")),v=t.initialZoomLevel,Ce(de,t.initialPosition),Te(),e.style.opacity=r?0:1,Ee(1),void(p?setTimeout((function(){h()}),p):h());d=u,f=!i.currItem.src||i.currItem.loadError||s.showHideOpacity,t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(v=c.w/t.w,de.x=c.x,de.y=c.y-C,i[f?"template":"bg"].style.opacity=.001,Te()),Ge("initialZoom"),r&&!d&&o.removeClass(e,"pswp--animated-in"),f&&(r?o[(d?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout((function(){o.addClass(e,"pswp--animate_opacity")}),30)),Rt=setTimeout((function(){if(Pe("initialZoom"+(r?"Out":"In")),r){var n=c.w/t.w,i={x:de.x,y:de.y},s=v,a=se,u=function(t){1===t?(v=n,de.x=c.x,de.y=c.y-R):(v=(n-s)*t+s,de.x=(c.x-i.x)*t+i.x,de.y=(c.y-R-i.y)*t+i.y),Te(),f?e.style.opacity=1-t:Ee(a-t*a)};d?Ze("initialZoom",0,1,p,o.easing.cubic.out,u,h):(u(1),Rt=setTimeout(h,p+20))}else v=t.initialZoomLevel,Ce(de,t.initialPosition),Te(),Ee(1),f?e.style.opacity=1:Ee(1),Rt=setTimeout(h,p+20)}),r?25:90)},Bt={},Ht=[],Vt={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Lt.length}},Yt=function(e,t,n){if(e.src&&!e.loadError){var r=!n;if(r&&(e.vGap||(e.vGap={top:0,bottom:0}),Pe("parseVerticalMargin",e)),Bt.x=t.x,Bt.y=t.y-e.vGap.top-e.vGap.bottom,r){var o=Bt.x/e.w,i=Bt.y/e.h;e.fitRatio=o<i?o:i;var a=s.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}})}if(!n)return;return function(e,t,n){var r=e.bounds;r.center.x=Math.round((Bt.x-t)/2),r.center.y=Math.round((Bt.y-n)/2)+e.vGap.top,r.max.x=t>Bt.x?Math.round(Bt.x-t):r.center.x,r.max.y=n>Bt.y?Math.round(Bt.y-n)+e.vGap.top:r.center.y,r.min.x=t>Bt.x?0:r.center.x,r.min.y=n>Bt.y?e.vGap.top:r.center.y}(e,e.w*n,e.h*n),r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}},e.initialPosition=e.bounds.center,e.bounds},$t=function(e,t,n,r,o,s){t.loadError||r&&(t.imageAppended=!0,Zt(t,r,t===i.currItem&&we),n.appendChild(r),s&&setTimeout((function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)}),500))},Gt=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},Xt=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=s.errorMsg.replace("%url%",e.src),!0},Zt=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var r=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=r+"px",e.placeholder.style.height=o+"px"),t.style.width=r+"px",t.style.height=o+"px"}},Kt=function(){if(Ht.length){for(var e,t=0;t<Ht.length;t++)(e=Ht[t]).holder.index===e.index&&$t(e.index,e.item,e.baseDiv,e.img,0,e.clearPlaceholder);Ht=[]}};_e("Controller",{publicMethods:{lazyLoadItem:function(e){e=xe(e);var t=Nt(e);t&&(!t.loaded&&!t.loading||_)&&(Pe("gettingData",e,t),t.src&&Gt(t))},initController:function(){o.extend(s,Vt,!0),i.items=Lt=n,Nt=i.getItemAt,Wt=s.getNumItemsFn,s.loop,Wt()<3&&(s.loop=!1),Se("beforeChange",(function(e){var t,n=s.preload,r=null===e||e>=0,o=Math.min(n[0],Wt()),a=Math.min(n[1],Wt());for(t=1;t<=(r?a:o);t++)i.lazyLoadItem(l+t);for(t=1;t<=(r?o:a);t++)i.lazyLoadItem(l-t)})),Se("initialLayout",(function(){i.currItem.initialLayout=s.getThumbBoundsFn&&s.getThumbBoundsFn(l)})),Se("mainScrollAnimComplete",Kt),Se("initialZoomInEnd",Kt),Se("destroy",(function(){for(var e,t=0;t<Lt.length;t++)(e=Lt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);Ht=null}))},getItemAt:function(e){return e>=0&&void 0!==Lt[e]&&Lt[e]},allowProgressiveImg:function(){return s.forceProgressiveLoading||!k||s.mouseUsed||screen.width>1200},setContent:function(e,t){s.loop&&(t=xe(t));var n=i.getItemAt(e.index);n&&(n.container=null);var r,c=i.getItemAt(t);if(c){Pe("gettingData",t,c),e.index=t,e.item=c;var u=c.container=o.createEl("pswp__zoom-wrap");if(!c.src&&c.html&&(c.html.tagName?u.appendChild(c.html):u.innerHTML=c.html),Xt(c),Yt(c,fe),!c.src||c.loadError||c.loaded)c.src&&!c.loadError&&((r=o.createEl("pswp__img","img")).style.opacity=1,r.src=c.src,Zt(c,r),$t(0,c,u,r));else{if(c.loadComplete=function(n){if(a){if(e&&e.index===t){if(Xt(n,!0))return n.loadComplete=n.img=null,Yt(n,fe),ke(n),void(e.index===l&&i.updateCurrZoomItem());n.imageAppended?!Ft&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):L.transform&&(ne||Ft)?Ht.push({item:n,baseDiv:u,img:n.img,index:t,holder:e,clearPlaceholder:!0}):$t(0,n,u,n.img,0,!0)}n.loadComplete=null,n.img=null,Pe("imageLoadComplete",t,n)}},o.features.transform){var d="pswp__img pswp__img--placeholder";d+=c.msrc?"":" pswp__img--placeholder--blank";var f=o.createEl(d,c.msrc?"img":"");c.msrc&&(f.src=c.msrc),Zt(c,f),u.appendChild(f),c.placeholder=f}c.loading||Gt(c),i.allowProgressiveImg()&&(!zt&&L.transform?Ht.push({item:c,baseDiv:u,img:c.img,index:t,holder:e}):$t(0,c,u,c.img,0,!0))}zt||t!==l?ke(c):(te=u.style,Ut(c,r||c.img)),e.el.innerHTML="",e.el.appendChild(u)}else e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var Jt,Qt,en={},tn=function(e,t,n){var r=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};r.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(r)};_e("Tap",{publicMethods:{initTap:function(){Se("firstTouchStart",i.onTapStart),Se("touchRelease",i.onTapRelease),Se("destroy",(function(){en={},Jt=null}))},onTapStart:function(e){e.length>1&&(clearTimeout(Jt),Jt=null)},onTapRelease:function(e,t){var n,r;if(t&&!G&&!Y&&!Ye){var i=t;if(Jt&&(clearTimeout(Jt),Jt=null,n=i,r=en,Math.abs(n.x-r.x)<25&&Math.abs(n.y-r.y)<25))return void Pe("doubleTap",i);if("mouse"===t.type)return void tn(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||o.hasClass(e.target,"pswp__single-tap"))return void tn(e,t);Ce(en,i),Jt=setTimeout((function(){tn(e,t),Jt=null}),300)}}}}),_e("DesktopZoom",{publicMethods:{initDesktopZoom:function(){D||(k?Se("mouseUsed",(function(){i.setupDesktopZoom()})):i.setupDesktopZoom(!0))},setupDesktopZoom:function(t){Qt={};var n="wheel mousewheel DOMMouseScroll";Se("bindEvents",(function(){o.bind(e,n,i.handleMouseWheel)})),Se("unbindEvents",(function(){Qt&&o.unbind(e,n,i.handleMouseWheel)})),i.mouseZoomedIn=!1;var r,s=function(){i.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),i.mouseZoomedIn=!1),v<1?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),a()},a=function(){r&&(o.removeClass(e,"pswp--dragging"),r=!1)};Se("resize",s),Se("afterChange",s),Se("pointerDown",(function(){i.mouseZoomedIn&&(r=!0,o.addClass(e,"pswp--dragging"))})),Se("pointerUp",a),t||s()},handleMouseWheel:function(e){if(v<=i.currItem.fitRatio)return s.modal&&(!s.closeOnScroll||Ye||V?e.preventDefault():M&&Math.abs(e.deltaY)>2&&(u=!0,i.close())),!0;if(e.stopPropagation(),Qt.x=0,"deltaX"in e)1===e.deltaMode?(Qt.x=18*e.deltaX,Qt.y=18*e.deltaY):(Qt.x=e.deltaX,Qt.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(Qt.x=-.16*e.wheelDeltaX),e.wheelDeltaY?Qt.y=-.16*e.wheelDeltaY:Qt.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;Qt.y=e.detail}ze(v,!0);var t=de.x-Qt.x,n=de.y-Qt.y;(s.modal||t<=ee.min.x&&t>=ee.max.x&&n<=ee.min.y&&n>=ee.max.y)&&e.preventDefault(),i.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:fe.x/2+he.x,y:fe.y/2+he.y};var n=s.getDoubleTapZoom(!0,i.currItem),r=v===n;i.mouseZoomedIn=!r,i.zoomTo(r?i.currItem.initialZoomLevel:n,t,333),o[(r?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var nn,rn,on,sn,an,cn,un,ln,dn,fn,pn,hn,mn={history:!0,galleryUID:1},vn=function(){return pn.hash.substring(1)},yn=function(){nn&&clearTimeout(nn),on&&clearTimeout(on)},gn=function(){var e=vn(),t={};if(e.length<5)return t;var n,r=e.split("&");for(n=0;n<r.length;n++)if(r[n]){var o=r[n].split("=");o.length<2||(t[o[0]]=o[1])}if(s.galleryPIDs){var i=t.pid;for(t.pid=0,n=0;n<Lt.length;n++)if(Lt[n].pid===i){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},bn=function(){if(on&&clearTimeout(on),Ye||V)on=setTimeout(bn,500);else{sn?clearTimeout(rn):sn=!0;var e=l+1,t=Nt(l);t.hasOwnProperty("pid")&&(e=t.pid);var n=un+"&gid="+s.galleryUID+"&pid="+e;ln||-1===pn.hash.indexOf(n)&&(fn=!0);var r=pn.href.split("#")[0]+"#"+n;hn?"#"+n!==window.location.hash&&history[ln?"replaceState":"pushState"]("",document.title,r):ln?pn.replace(r):pn.hash=n,ln=!0,rn=setTimeout((function(){sn=!1}),60)}};_e("History",{publicMethods:{initHistory:function(){if(o.extend(s,mn,!0),s.history){pn=window.location,fn=!1,dn=!1,ln=!1,un=vn(),hn="pushState"in history,un.indexOf("gid=")>-1&&(un=(un=un.split("&gid=")[0]).split("?gid=")[0]),Se("afterChange",i.updateURL),Se("unbindEvents",(function(){o.unbind(window,"hashchange",i.onHashChange)}));var e=function(){cn=!0,dn||(fn?history.back():un?pn.hash=un:hn?history.pushState("",document.title,pn.pathname+pn.search):pn.hash=""),yn()};Se("unbindEvents",(function(){u&&e()})),Se("destroy",(function(){cn||e()})),Se("firstUpdate",(function(){l=gn().pid}));var t=un.indexOf("pid=");t>-1&&"&"===(un=un.substring(0,t)).slice(-1)&&(un=un.slice(0,-1)),setTimeout((function(){a&&o.bind(window,"hashchange",i.onHashChange)}),40)}},onHashChange:function(){if(vn()===un)return dn=!0,void i.close();sn||(an=!0,i.goTo(gn().pid),an=!1)},updateURL:function(){yn(),an||(ln?nn=setTimeout(bn,0):bn())}}}),o.extend(i,Ke)}})?r.call(t,n,t,e):r)||(e.exports=o)},function(e,t,n){var r,o;
/*! PhotoSwipe Default UI - 4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */void 0===(o="function"==typeof(r=function(){"use strict";return function(e,t){var n,r,o,i,s,a,c,u,l,d,f,p,h,m,v,y,g,b,w=this,_=!1,x=!0,O=!0,S={barsSize:{top:85,bottom:"auto"},closeElClasses:["item","img","caption","zoom-wrap","ui","top-bar","pswp__button--close"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!1,zoomEl:!1,shareEl:!1,counterEl:!0,arrowEl:!0,preloaderEl:!1,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},P=function(e){if(y)return!0;e=e||window.event,v.timeToIdle&&v.mouseUsed&&!l&&C();for(var n,r,o=(e.target||e.srcElement).getAttribute("class")||"",i=0;i<z.length;i++)(n=z[i]).onTap&&o.indexOf("pswp__"+n.name)>-1&&(n.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),y=!0;var s=t.features.isOldAndroid?600:30;setTimeout((function(){y=!1}),s)}},j=function(e,n,r){t[(r?"add":"remove")+"Class"](e,"pswp__"+n)},E=function(){var e=1===v.getNumItemsFn();e!==m&&(j(r,"ui--one-slide",e),m=e)},M=function(){j(c,"share-modal--hidden",O)},T=function(){return(O=!O)?(t.removeClass(c,"pswp__share-modal--fade-in"),setTimeout((function(){O&&M()}),300)):(M(),setTimeout((function(){O||t.addClass(c,"pswp__share-modal--fade-in")}),30)),O||I(),!1},k=function(t){var n=(t=t||window.event).target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),O||T(),1))},I=function(){for(var e,t,n,r,o="",i=0;i<v.shareButtons.length;i++)e=v.shareButtons[i],t=v.getImageURLForShare(e),n=v.getPageURLForShare(e),r=v.getTextForShare(e),o+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(r))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",v.parseShareButtonOut&&(o=v.parseShareButtonOut(e,o));c.children[0].innerHTML=o,c.children[0].onclick=k},q=function(e){for(var n=0;n<v.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+v.closeElClasses[n]))return!0},A=0,C=function(){clearTimeout(b),A=0,l&&w.setIdle(!1)},D=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout((function(){w.setIdle(!0)}),v.timeToIdleOutside))},R=function(e){p!==e&&(j(f,"preloader--active",!e),p=e)},L=function(n){var s=n.vGap;if(!e.likelyTouchDevice||v.mouseUsed||screen.width>v.fitControlsWidth){var a=v.barsSize;if(v.captionEl&&"auto"===a.bottom)if(i||((i=t.createEl("pswp__caption pswp__caption--fake")).appendChild(t.createEl("pswp__caption__center")),r.insertBefore(i,o),t.addClass(r,"pswp__ui--fit")),v.addCaptionHTMLFn(n,i,!0)){var c=i.clientHeight;s.bottom=parseInt(c,10)||44}else s.bottom=a.top;else s.bottom="auto"===a.bottom?0:a.bottom;s.top=a.top}else s.top=s.bottom=0},z=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){c=e},onTap:function(){T()}},{name:"button--share",option:"shareEl",onInit:function(e){a=e},onTap:function(){T()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){s=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){f=e}}];w.init=function(){var s;t.extend(e.options,S,!0),v=e.options,r=t.getChildByClass(e.scrollWrap,"pswp__ui"),(d=e.listen)("onVerticalDrag",(function(e){x&&e<.95?w.hideControls():!x&&e>=.95&&w.showControls()})),d("onPinchClose",(function(e){x&&e<.9?(w.hideControls(),s=!0):s&&!x&&e>.9&&w.showControls()})),d("zoomGestureEnded",(function(){(s=!1)&&!x&&w.showControls()})),d("beforeChange",w.update),d("doubleTap",(function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(v.getDoubleTapZoom(!1,e.currItem),t,333)})),d("preventDragEvent",(function(e,t,n){var r=e.target||e.srcElement;r&&r.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(r.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(r.tagName))&&(n.prevent=!1)})),d("bindEvents",(function(){t.bind(r,"pswpTap click",P),t.bind(e.scrollWrap,"pswpTap",w.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",w.onMouseOver)})),d("unbindEvents",(function(){O||T(),g&&clearInterval(g),t.unbind(document,"mouseout",D),t.unbind(document,"mousemove",C),t.unbind(r,"pswpTap click",P),t.unbind(e.scrollWrap,"pswpTap",w.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",w.onMouseOver),n&&(t.unbind(document,n.eventK,w.updateFullscreen),n.isFullscreen()&&(v.hideAnimationDuration=0,n.exit()),n=null)})),d("destroy",(function(){v.captionEl&&(i&&r.removeChild(i),t.removeClass(o,"pswp__caption--empty")),c&&(c.children[0].onclick=null),t.removeClass(r,"pswp__ui--over-close"),t.addClass(r,"pswp__ui--hidden"),w.setIdle(!1)})),v.showAnimationDuration||t.removeClass(r,"pswp__ui--hidden"),d("initialZoomIn",(function(){v.showAnimationDuration&&t.removeClass(r,"pswp__ui--hidden")})),d("initialZoomOut",(function(){t.addClass(r,"pswp__ui--hidden")})),d("parseVerticalMargin",L),function(){var e,n,o,i=function(r){if(r)for(var i=r.length,s=0;s<i;s++){e=r[s],n=e.className;for(var a=0;a<z.length;a++)o=z[a],n.indexOf("pswp__"+o.name)>-1&&(v[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};i(r.children);var s=t.getChildByClass(r,"pswp__top-bar");s&&i(s.children)}(),v.shareEl&&a&&c&&(O=!0),E(),v.timeToIdle&&d("mouseUsed",(function(){t.bind(document,"mousemove",C),t.bind(document,"mouseout",D),g=setInterval((function(){2==++A&&w.setIdle(!0)}),v.timeToIdle/2)})),v.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=w.getFullscreenAPI()),n?(t.bind(document,n.eventK,w.updateFullscreen),w.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs")),v.preloaderEl&&(R(!0),d("beforeChange",(function(){clearTimeout(h),h=setTimeout((function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&R(!1):R(!0)}),v.loadingIndicatorDelay)})),d("imageLoadComplete",(function(t,n){e.currItem===n&&R(!0)})))},w.setIdle=function(e){l=e,j(r,"ui--idle",e)},w.update=function(){x&&e.currItem?(w.updateIndexIndicator(),v.captionEl&&(v.addCaptionHTMLFn(e.currItem,o),j(o,"caption--empty",!e.currItem.title)),_=!0):_=!1,O||T(),E()},w.updateFullscreen=function(r){r&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},w.updateIndexIndicator=function(){v.counterEl&&(s.innerHTML=e.getCurrentIndex()+1+v.indexIndicatorSep+v.getNumItemsFn())},w.onGlobalTap=function(n){var r=(n=n||window.event).target||n.srcElement;if(!y)if(n.detail&&"mouse"===n.detail.pointerType){if(q(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?v.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(v.tapToToggleControls&&(x?w.hideControls():w.showControls()),v.tapToClose&&(t.hasClass(r,"pswp__img")||q(r)))return void e.close()},w.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;j(r,"ui--over-close",q(t))},w.hideControls=function(){t.addClass(r,"pswp__ui--hidden"),x=!1},w.showControls=function(){x=!0,_||w.update(),t.removeClass(r,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var t,n=document.documentElement,r="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:r}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+r}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+r}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(u=v.closeOnScroll,v.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return v.closeOnScroll=u,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}}})?r.call(t,n,t,e):r)||(e.exports=o)},function(e,t,n){var r,o,i,s;function a(e){return function(){return new c(e.apply(this,arguments))}}function c(e){var t,n;function r(t,n){try{var i=e[t](n),s=i.value,a=s instanceof u;Promise.resolve(a?s.wrapped:s).then((function(e){a?r("next",e):o(i.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(i,s){var a={key:e,arg:o,resolve:i,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function u(e){this.wrapped=e}
/*! pjax-api v3.31.0 https://github.com/falsandtru/pjax-api | (c) 2012, falsandtru | (Apache-2.0 AND MPL-2.0) License */"function"==typeof Symbol&&Symbol.asyncIterator&&(c.prototype[Symbol.asyncIterator]=function(){return this}),c.prototype.next=function(e){return this._invoke("next",e)},c.prototype.throw=function(e){return this._invoke("throw",e)},c.prototype.return=function(e){return this._invoke("return",e)},r=function e(t,n,o){function i(a,c){if(!n[a]){if(!t[a]){if(!c&&"function"==typeof r&&r)return r(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,o)}return n[a].exports}for(var s="function"==typeof r&&r,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){},{}],2:[function(e,t,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],3:[function(e,t,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isArray=n.ObjectValues=n.ObjectSetPrototypeOf=n.ObjectSeal=n.ObjectPreventExtensions=n.ObjectKeys=n.isSealed=n.isFrozen=n.isExtensible=n.ObjectIs=n.ObjectGetPrototypeOf=n.ObjectGetOwnPropertySymbols=n.ObjectGetOwnPropertyNames=n.ObjectGetOwnPropertyDescriptors=n.ObjectGetOwnPropertyDescriptor=n.ObjectFreeze=n.ObjectEntries=n.ObjectDefineProperty=n.ObjectDefineProperties=n.ObjectCreate=n.ObjectAssign=n.toString=n.isEnumerable=n.isPrototypeOf=n.hasOwnProperty=n.SymbolKeyFor=n.SymbolFor=n.parseInt=n.parseFloat=n.isSafeInteger=n.isNaN=n.isInteger=n.isFinite=n.NaN=void 0,n.NaN=Number.NaN,n.isFinite=Number.isFinite,n.isInteger=Number.isInteger,n.isNaN=Number.isNaN,n.isSafeInteger=Number.isSafeInteger,n.parseFloat=Number.parseFloat,n.parseInt=Number.parseInt,n.SymbolFor=Symbol.for,n.SymbolKeyFor=Symbol.keyFor,n.hasOwnProperty=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty),n.isPrototypeOf=Object.prototype.isPrototypeOf.call.bind(Object.prototype.isPrototypeOf),n.isEnumerable=Object.prototype.propertyIsEnumerable.call.bind(Object.prototype.propertyIsEnumerable),n.toString=Object.prototype.toString.call.bind(Object.prototype.toString),n.ObjectAssign=Object.assign,n.ObjectCreate=Object.create,n.ObjectDefineProperties=Object.defineProperties,n.ObjectDefineProperty=Object.defineProperty,n.ObjectEntries=Object.entries,n.ObjectFreeze=Object.freeze,n.ObjectGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,n.ObjectGetOwnPropertyDescriptors=Object.getOwnPropertyDescriptors,n.ObjectGetOwnPropertyNames=Object.getOwnPropertyNames,n.ObjectGetOwnPropertySymbols=Object.getOwnPropertySymbols,n.ObjectGetPrototypeOf=Object.getPrototypeOf,n.ObjectIs=Object.is,n.isExtensible=Object.isExtensible,n.isFrozen=Object.isFrozen,n.isSealed=Object.isSealed,n.ObjectKeys=Object.keys,n.ObjectPreventExtensions=Object.preventExtensions,n.ObjectSeal=Object.seal,n.ObjectSetPrototypeOf=Object.setPrototypeOf,n.ObjectValues=Object.values,n.isArray=Array.isArray},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.join=n.splice=n.push=n.pop=n.unshift=n.shift=n.indexOf=void 0;const r=e("./global"),o=e("./alias");function i(e,t){if(o.isArray(e))for(let n=e.length-1;n>=0;--n)t.unshift(e[n]);else t.unshift(...e);return t}function s(e,t){if(o.isArray(t))for(let n=0;n<t.length;++n)e.push(t[n]);else e.push(...t);return e}function a(e,t,n,...o){if(0===n&&0===o.length)return[];switch(n=n>e.length?e.length:n,t){case 0:switch(n){case 0:return[[],i(o,e)][0];case 1:return 0===e.length?[[],i(o,e)][0]:[[e.shift()],i(o,e)][0];case r.undefined:if(e.length>1||arguments.length>2)break;return 0===e.length?[]:a(e,t,1)}break;case-1:case e.length-1:case r.Infinity:switch(n){case 0:return[[],s(e,o)][0];case 1:return 0===e.length?[[],s(e,o)][0]:[[e.pop()],s(e,o)][0];case r.undefined:if(e.length>1||arguments.length>2)break;return 0===e.length?[]:a(e,t,1)}}return arguments.length>2?e.splice(t,n,...o):e.splice(t)}n.indexOf=function(e,t){return t==t?e.indexOf(t):e.findIndex(e=>e!=e)},n.shift=function(e,t){if(t<0)throw new Error("Unexpected negative number");return t===r.undefined?[e.shift(),e]:[a(e,0,t),e]},n.unshift=i,n.pop=function(e,t){if(t<0)throw new Error("Unexpected negative number");return t===r.undefined?[e,e.pop()]:[e,a(e,e.length-t,t)]},n.push=s,n.splice=a,n.join=function(e,t=""){let n="";for(let r=0;r<e.length;++r)n+=0===r?e[r]:t+e[r];return n}},{"./alias":4,"./global":19}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.template=n.inherit=n.merge=n.extend=n.clone=n.assign=void 0;const r=e("./global"),o=e("./alias"),i=e("./type"),s=e("./array");n.assign=c((e,t,n)=>t[e]=n[e]),n.clone=c((e,t,r)=>{switch(i.type(r[e])){case"Array":return t[e]=r[e].slice();case"Object":switch(i.type(t[e])){case"Object":return t[e]=n.clone(u(r[e]),r[e]);default:return t[e]=r[e]}default:return t[e]=r[e]}}),n.extend=c((e,t,r)=>{switch(i.type(r[e])){case"Array":return t[e]=r[e].slice();case"Object":switch(i.type(t[e])){case"Object":return t[e]=n.extend(t[e],r[e]);default:return t[e]=n.extend(u(r[e]),r[e])}default:return t[e]=r[e]}}),n.merge=c((e,t,r)=>{switch(i.type(r[e])){case"Array":switch(i.type(t[e])){case"Array":return t[e]=s.push(t[e],r[e]);default:return t[e]=r[e].slice()}case"Object":switch(i.type(t[e])){case"Object":return t[e]=n.merge(t[e],r[e]);default:return t[e]=n.merge(u(r[e]),r[e])}default:return t[e]=r[e]}}),n.inherit=c((e,t,r)=>{switch(i.type(r[e])){case"Array":return t[e]=r[e].slice();case"Object":switch(i.type(t[e])){case"Object":return t[e]=a(t,e)?n.inherit(t[e],r[e]):n.inherit(o.ObjectCreate(t[e]),r[e]);default:return t[e]=o.ObjectCreate(r[e])}default:return t[e]=r[e]}});const a="__proto__"in{}?(e,t)=>!("__proto__"in e)||e[t]!==e.__proto__[t]:o.hasOwnProperty;function c(e,t=u){return function(n,...r){let s=i.isPrimitive(n);for(const a of r){const r=i.isPrimitive(a);if(r)n=a,s=r;else{s&&(n=t(a),s=r);const i=o.ObjectKeys(a);for(let t=0;t<i.length;++t)i[t]in{}||e(i[t],n,a)}}return n}}function u(e){switch(i.type(e)){case"Array":return[];case"Object":return e instanceof r.Object?{}:o.ObjectCreate(null);default:return e}}n.template=c},{"./alias":4,"./array":5,"./global":19,"./type":89}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Cache=void 0;const r=e("./global"),o=e("./assign"),i=e("./array");n.Cache=class{constructor(e,t=(()=>r.undefined),n={}){if(this.capacity=e,this.callback=t,this.settings={ignore:{delete:!1,clear:!1},data:{stats:[[],[]],entries:[]}},this.nullish=!1,e>0==!1)throw new Error("Spica: Cache: Cache capacity must be greater than 0.");o.extend(this.settings,n);const{stats:s,entries:a}=this.settings.data,c=s[1].slice(0,e),u=s[0].slice(0,e-c.length);if(this.stats={LRU:u,LFU:c},this.store=new r.Map(a),n.data){for(const e of i.push(s[1].slice(c.length),s[0].slice(u.length)))this.store.delete(e);if(this.store.size!==c.length+u.length)throw new Error("Spica: Cache: Size of stats and entries is not matched.");if(![...c,...u].every(e=>this.store.has(e)))throw new Error("Spica: Cache: Keys of stats and entries is not matched.")}}put(e,t,n=!0){this.nullish||t!==r.undefined?r.undefined:this.nullish=!0;const o=this.store.has(e);if(!n&&o)return this.store.set(e,t),!0;if(o&&this.access(e))return this.store.set(e,t),!0;const{LRU:i,LFU:s}=this.stats;if(i.length+s.length===this.capacity&&i.length<s.length){const e=s.pop(),t=this.store.get(e);this.store.delete(e),this.callback(e,t)}if(i.unshift(e),this.store.set(e,t),i.length+s.length>this.capacity){const e=i.pop(),t=this.store.get(e);this.store.delete(e),this.callback(e,t)}return!1}set(e,t,n){return this.put(e,t,n),t}get(e,t=!0){const n=this.store.get(e);return t?(n!==r.undefined||this.nullish&&this.store.has(e))&&this.access(e)?n:r.undefined:n}has(e){return this.store.has(e)}delete(e){if(!this.store.has(e))return!1;const{LRU:t,LFU:n}=this.stats;for(const r of[n,t]){const t=i.indexOf(r,e);if(-1===t)continue;const n=this.store.get(e);return this.store.delete(i.splice(r,t,1)[0]),this.settings.ignore.delete?!0:(this.callback(e,n),!0)}return!1}clear(){const e=this.store;if(this.store=new r.Map,this.stats={LRU:[],LFU:[]},!this.settings.ignore.clear)for(const t of e)this.callback(t[0],t[1])}get size(){return this.store.size}[Symbol.iterator](){return this.store[Symbol.iterator]()}export(){return{stats:[this.stats.LRU.slice(),this.stats.LFU.slice()],entries:[...this]}}inspect(){const{LRU:e,LFU:t}=this.stats;return[e.slice(),t.slice()]}access(e){return this.accessLFU(e)||this.accessLRU(e)}accessLRU(e){const{LRU:t}=this.stats,n=i.indexOf(t,e);if(-1===n)return!1;const{LFU:r}=this.stats;return r.unshift(i.splice(t,n,1)[0]),!0}accessLFU(e){const{LFU:t}=this.stats,n=i.indexOf(t,e);return-1!==n&&(0===n||(t.unshift(i.splice(t,n,1)[0]),!0))}}},{"./array":5,"./assign":6,"./global":19}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Cancellation=void 0;const r=e("./global"),o=e("./promise"),i=e("./exception"),s=e("./monad/maybe"),a=e("./monad/either"),c=e("./noop"),u=Symbol.for("spica/cancellation::internal");class l extends o.AtomicPromise{constructor(e=[]){var t;super(e=>t=e),this[u]=new d(t);for(const t of e)t.register(this.cancel)}get alive(){return this[u].alive}get canceled(){return this[u].canceled}register(e){return this[u].register(e)}get cancel(){return e=>this[u].cancel(e)}get close(){return e=>this[u].close(e)}get promise(){return e=>this[u].promise(e)}get maybe(){return e=>this[u].maybe(e)}get either(){return e=>this[u].either(e)}}n.Cancellation=l;class d{constructor(e){this.resolve=e,this.alive=!0,this.available=!0,this.listeners=new r.Set}get canceled(){return"reason"in this}register(e){return this.alive?(this.listeners.add(t),()=>void this.listeners.delete(t)):(this.canceled&&t(this.reason),c.noop);function t(t){try{e(t)}catch(t){i.causeAsyncException(t)}}}cancel(e){if(this.available){this.available=!1,this.reason=e;for(const t of this.listeners)t(e);this.resolve(this.reason),this.alive=!1}}close(e){this.available&&(this.available=!1,this.resolve(o.AtomicPromise.reject(e)),this.alive=!1)}promise(e){return this.canceled?o.AtomicPromise.reject(this.reason):o.AtomicPromise.resolve(e)}maybe(e){return s.Just(e).bind(e=>this.canceled?s.Nothing:s.Just(e))}either(e){return a.Right(e).bind(e=>this.canceled?a.Left(this.reason):a.Right(e))}}},{"./exception":16,"./global":19,"./monad/either":27,"./monad/maybe":31,"./noop":81,"./promise":83}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Channel=void 0;const r=e("./promise"),o=e("./future"),i=r.AtomicPromise.resolve(),s=()=>r.AtomicPromise.reject(new Error("Spica: Channel: Closed.")),c=Symbol.for("spica/channel::internal");n.Channel=class{constructor(e=0){this[c]=new u(e)}get alive(){return this[c].alive}close(e){var t,n;if(!this.alive)return;const o=this[c],{buffer:i,producers:a,consumers:u}=o;o.alive=!1;for(let e=0;a[e]||u[e];++e)null===(t=a[e])||void 0===t||t.bind(s()),null===(n=u[e])||void 0===n||n.bind(s());u.splice(0,u.length),e?r.AtomicPromise.all([...i.splice(0,i.length),...a.splice(0,a.length)]).then(e):(i.splice(0,i.length),a.splice(0,a.length))}put(e){if(!this.alive)return s();const{size:t,buffer:n,producers:r,consumers:a}=this[c];switch(!0){case n.length<t:case a.length>0:return n.push(e),a.length>0&&a.shift().bind(n.shift()),i;default:return r[r.push(new o.AtomicFuture)-1].then(()=>this.put(e))}}take(){if(!this.alive)return s();const{buffer:e,producers:t,consumers:n}=this[c];switch(!0){case e.length>0:const i=e.shift();return t.length>0&&t.shift().bind(),r.AtomicPromise.resolve(i);case t.length>0:const s=n[n.push(new o.AtomicFuture)-1];return t.shift().bind(),s.then();default:return n[n.push(new o.AtomicFuture)-1].then()}}[Symbol.asyncIterator](){var e=this;return a((function*(){try{for(;e.alive;)yield e.take()}catch(t){if(e.alive)throw t}}))()}};class u{constructor(e=0){this.size=e,this.alive=!0,this.buffer=[],this.producers=[],this.consumers=[]}}},{"./future":18,"./promise":83}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tick=void 0;const r=e("./global"),o=e("./exception");let i=[],s=[],a=0;const c=Promise.resolve();function u(){const e=a;[a,i,s]=[0,s,i];for(let t=0;t<e;++t)try{s[t](),s[t]=r.undefined}catch(e){o.causeAsyncException(e)}s.length>1e3&&e<.5*s.length&&s.splice(.9*s.length|0,s.length)}n.tick=function(e){0===a&&c.then(u),a++===i.length?i.push(e):i[a-1]=e}},{"./exception":16,"./global":19}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.never=n.wait=n.clock=void 0;const r=e("./global"),o=e("./promise");var i=e("./clock.tick");Object.defineProperty(n,"tick",{enumerable:!0,get:function(){return i.tick}}),n.clock=Promise.resolve(void 0),n.wait=function(e){return 0===e?o.AtomicPromise.resolve(n.clock):new o.AtomicPromise(t=>void r.setTimeout(t,e))},n.never=new class e extends o.AtomicPromise{static get[Symbol.species](){return e}constructor(){super(()=>void 0)}then(){return this}catch(){return this}finally(){return this}}},{"./clock.tick":10,"./global":19,"./promise":83}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Copropagator=void 0;const r=e("./global"),o=e("./alias"),i=e("./coroutine"),s=e("./promise"),c=e("./clock");class u extends i.Coroutine{constructor(e,t=(e=>e[0])){super(a((function*(){return this.then(t=>{for(const n of e)n[i.Coroutine.exit](t)},t=>{const n=s.AtomicPromise.reject(t);for(const t of e)t[i.Coroutine.exit](n)}),function e(t,n){const i=o.isArray(t)?t:[...t];return s.AtomicPromise.all(i).then(s=>{const a=o.isArray(t)?t:[...t],c=a.length===i.length&&a.every((e,t)=>a[t]===i[t]);if(!n&&c)return s;n=n||new r.Map;for(let e=0;e<s.length;++e)n.set(i[e],s[e]);return c?[...n.values()]:e(a,n)})}(e).then(e=>0===e.length?void this[i.Coroutine.terminate](new r.Error("Spica: Copropagator: No result.")):void this[i.Coroutine.exit](t(e)),e=>void this[i.Coroutine.terminate](e)),c.never})),{autorun:!1}),this[i.Coroutine.init]()}}n.Copropagator=u},{"./alias":4,"./clock":11,"./coroutine":13,"./global":19,"./promise":83}],13:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n.isCoroutine=n.Coroutine=void 0;const o=e("./global"),i=e("./alias"),s=e("./promise"),c=e("./future"),l=e("./channel"),d=e("./assign"),f=e("./clock"),p=e("./exception"),h=e("./noop"),m=Symbol.for("spica/Coroutine.alive"),v=Symbol.for("spica/Coroutine.init"),y=Symbol.for("spica/Coroutine.exit"),g=Symbol.for("spica/Coroutine.terminate"),b=Symbol.for("spica/Coroutine.port"),w=Symbol.for("spica/coroutine::internal");let _=(()=>{class e extends s.AtomicPromise{constructor(t,n={}){var r;super(e=>r=e);let a=0;this[e.init]=async()=>{const n=this[w];if(!n.alive)return;if(0!==a)return;let r=h.noop;try{const e=t.call(this);for(;n.alive;){const[[t,i]]=1==++a?[[o.undefined,h.noop]]:await o.Promise.all([n.settings.size<0?[o.undefined,h.noop]:n.sendBuffer.take(),o.Promise.all([n.settings.resume(),n.settings.interval>0?f.wait(n.settings.interval):o.undefined])]);if(r=i,!n.alive)break;const s=await e.next(t);if(s.done)return n.alive=!1,r({...s}),n.recvBuffer.put({...s}),void n.result.bind(s);r({...s}),await n.recvBuffer.put({...s})}r(s.AtomicPromise.reject(new o.Error("Spica: Coroutine: Canceled.")))}catch(t){r(s.AtomicPromise.reject(t)),this[e.terminate](t)}},this[w]=new x(n),this[b]=new O(this,this[e.init]);const c=this[w];if(r(c.result.then(({value:e})=>e)),c.settings.trigger!==o.undefined)for(const e of o.Array().concat(c.settings.trigger))if(!(e in this&&this.hasOwnProperty(e)))if(e in this)i.ObjectDefineProperty(this,e,{set(t){delete this[e],this[e]=t,this[v]()},get(){return delete this[e],this[v](),this[e]},enumerable:!0,configurable:!0});else{const t=i.ObjectGetOwnPropertyDescriptor(this,e)||{value:this[e],enumerable:!0,configurable:!0,writable:!0};i.ObjectDefineProperty(this,e,{set(n){i.ObjectDefineProperty(this,e,{...t,value:n}),this[v]()},get(){return this[e]},enumerable:!0,configurable:!0})}this[w].settings.debug&&this[e.init](),this[w].settings.autorun&&f.tick(this[e.init])}get[m](){return this[w].alive}[y](e){this[w].alive&&s.AtomicPromise.resolve(e).then(e=>{const t=this[w];t.alive&&(t.alive=!1,t.recvBuffer.put({value:o.undefined,done:!0}),t.result.bind({value:e}))},e=>{const t=this[w];t.alive&&(t.alive=!1,t.recvBuffer.put({value:o.undefined,done:!0}),t.result.bind(s.AtomicPromise.reject(e)))})}[g](e){return this[y](s.AtomicPromise.reject(e))}[Symbol.asyncIterator](){var t=this;return a((function*(){const n=t[w],r=t[e.port];for(;n.alive;){const e=yield(o=r.recv(),new u(o));if(e.done)return e.value;yield e.value}var o;return t}))()}}return e.alive=m,e.init=v,e.exit=y,e.terminate=g,e.port=b,e})();n.Coroutine=_;class x{constructor(e){this.opts=e,this.settings=d.extend({autorun:!0,debug:!1,size:-1,interval:0,resume:()=>o.undefined,trigger:o.undefined},this.opts),this.alive=!0,this.reception=0,this.sendBuffer=this.settings.size>=0?new l.Channel(this.settings.size):o.undefined,this.recvBuffer=this.settings.size>=0?new l.Channel(0):new S,this.result=new c.AtomicFuture,this.result.finally(()=>{this.sendBuffer.close(e=>{for(;e.length>0;){const[,t]=e.shift();try{t(s.AtomicPromise.reject(new o.Error("Spica: Coroutine: Canceled.")))}catch(e){p.causeAsyncException(e)}}}),this.recvBuffer.close()})}}class O{constructor(e,t){this[w]={co:e,init:t}}ask(e){const t=this[w].co[w];if(!t.alive)return s.AtomicPromise.reject(new o.Error("Spica: Coroutine: Canceled."));if(t.settings.size<0)return s.AtomicPromise.reject(new o.Error("Spica: Coroutine: Overflowed."));t.settings.size>=0&&0===t.reception&&++t.reception&&t.recvBuffer.take(),this[w].init();const n=new c.Future;return t.sendBuffer.put([e,n.bind]),++t.reception,o.Promise.all([n,t.recvBuffer.take()]).then(([e])=>e.done?t.result.then(({value:t})=>({...e,value:t})):{...e})}recv(){const e=this[w].co[w];return e.alive?(this[w].init(),++e.reception,o.Promise.resolve(e.recvBuffer.take()).then(t=>t.done?e.result.then(({value:e})=>({...t,value:e})):{...t})):s.AtomicPromise.reject(new o.Error("Spica: Coroutine: Canceled."))}send(e){const t=this[w].co[w];if(!t.alive)return s.AtomicPromise.reject(new o.Error("Spica: Coroutine: Canceled."));if(t.settings.size<0)return s.AtomicPromise.reject(new o.Error("Spica: Coroutine: Overflowed."));t.settings.size>=0&&0===t.reception&&++t.reception&&t.recvBuffer.take(),this[w].init();const n=new c.Future;return o.Promise.resolve(t.sendBuffer.put([e,n.bind]))}connect(e){const t=this[w].co[w];return t.alive?(async()=>{t.settings.size>=0&&0===t.reception&&++t.reception&&t.recvBuffer.take(),this[w].init();const n=e.call(this[w].co);let r;for(;;){const e=await n.next(r);if(e.done)return e.value;r=(await this.ask(e.value)).value}})():s.AtomicPromise.reject(new o.Error("Spica: Coroutine: Canceled."))}}n.isCoroutine=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.constructor&&"symbol"==typeof e.constructor.alive&&"boolean"==typeof e[e.constructor.alive]&&"symbol"==typeof e.constructor.init&&"function"==typeof e[e.constructor.init]&&"symbol"==typeof e.constructor.exit&&"function"==typeof e[e.constructor.exit]&&"symbol"==typeof e.constructor.terminate&&"function"==typeof e[e.constructor.terminate]&&"symbol"==typeof e.constructor.port&&"object"==typeof e[e.constructor.port]};class S{constructor(){this[r]=new S.Internal}get alive(){return this[w].alive}close(e){var t;if(!this.alive)return;const n=this[w],{consumers:r}=n;n.alive=!1;for(let e=0;r[e];++e)null===(t=r[e])||void 0===t||t.bind(S.fail());r.splice(0,r.length),e&&e([])}put(e){if(!this.alive)return S.fail();const{consumers:t}=this[w];for(;t.length>0;)t.shift().bind(e);return S.success}take(){if(!this.alive)return S.fail();const{consumers:e}=this[w];return e[e.push(new c.AtomicFuture)-1].then()}}r=w,function(e){e.success=s.AtomicPromise.resolve(),e.fail=()=>s.AtomicPromise.reject(new o.Error("Spica: Channel: Closed."));e.Internal=class{constructor(){this.alive=!0,this.consumers=[]}}}(S||(S={}))},{"./alias":4,"./assign":6,"./channel":9,"./clock":11,"./exception":16,"./future":18,"./global":19,"./noop":81,"./promise":83}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.uncurry=n.curry=void 0;const r=e("./global"),o=e("./array");n.curry=e=>(function e(t,n,...o){let i;return o.length<n?(...s)=>e(i=i||o.length&&t.bind(r.undefined,...o)||t,n-o.length,...s):t(...o)})(e,e.length),n.uncurry=e=>(function e(t){const n=t.length;return(...r)=>0===n||r.length<2||r.length<=n?t(...r):e(t(...o.shift(r,n)[0]))(...r)})(e)},{"./array":5,"./global":19}],15:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),o(e("./monad/either"),n)},{"./monad/either":27}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.causeAsyncException=void 0,n.causeAsyncException=function(e){Promise.reject(e)}},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.flip=void 0,n.flip=function(e){return e.length>1?(t,n)=>e(n,t):(t,...n)=>0===n.length?n=>e(n)(t):e(n[0])(t)}},{}],18:[function(e,t,n){"use strict";var r,o;Object.defineProperty(n,"__esModule",{value:!0}),n.AtomicFuture=n.Future=void 0;const i=e("./global"),s=e("./promise"),a=Symbol.for("spica/promise::internal");n.Future=class{constructor(e=!0){this[Symbol.toStringTag]="Promise",this[r]=new s.Internal,this.bind=t=>{const n=this[a];if(!n.isPending&&!e)return this;if(!n.isPending)throw new Error("Spica: Future: Cannot rebind a value.");return n.resolve(t),n.resume(),this}}static get[Symbol.species](){return i.Promise}then(e,t){return new i.Promise((n,r)=>this[a].then(e,t,n,r))}catch(e){return this.then(i.undefined,e)}finally(e){return this.then(e,e).then(()=>this)}},r=a;n.AtomicFuture=class{constructor(e=!0){this[Symbol.toStringTag]="Promise",this[o]=new s.Internal,this.bind=t=>{if(!this[a].isPending&&!e)return this;if(!this[a].isPending)throw new Error("Spica: AtomicFuture: Cannot rebind a value.");return this[a].resolve(t),this[a].resume(),this}}static get[Symbol.species](){return s.AtomicPromise}then(e,t){return new s.AtomicPromise((n,r)=>this[a].then(e,t,n,r))}catch(e){return this.then(i.undefined,e)}finally(e){return this.then(e,e).then(()=>this)}},o=a},{"./global":19,"./promise":83}],19:[function(e,t,n){"use strict";const r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||Function("return this")();r.global=r,t.exports=r},{}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.compose=void 0,n.compose=function(e,...t){return t.reduce((e,t)=>(Object.getOwnPropertyNames(t.prototype).filter(t=>!(t in e.prototype)).forEach(n=>e.prototype[n]=t.prototype[n]),Object.getOwnPropertyNames(t).filter(t=>!(t in e)).forEach(n=>e[n]=t[n]),e),e)}},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HList=void 0,n.HList=function(...e){return 0===e.length?r:e.reduceRight((e,t)=>e.add(t),r)};const r=new class{constructor(){this.TYPE}add(e){return new o(e,this)}unfold(e){return this.add(e())}tuple(){return[]}};class o{constructor(e,t){this.head=e,this.tail=t,this.TYPE}add(e){return new o(e,this)}modify(e){return this.tail.add(e(this.head))}fold(e){return this.tail.modify(t=>e(this.head,t))}unfold(e){return this.add(e(this.head))}reverse(){return this.tuple().reverse()}tuple(){const e=this.tail.tuple();return e.unshift(this.head),e}}},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MList=n.List=void 0;const r=e("./global");function o(...e){let t=new i(r.undefined,r.undefined);for(let n=e.length-1;n>=0;--n)t=t.add(e[n]);return t}n.List=o;class i{constructor(e,t){this.head=e,this.tail=t}append(e){return this.replaceWith(e,o()).tail}add(e){return new i(e,this)}foldl(e,t){for(let n=this;n.tail;n=n.tail)t=e(t,n.head);return t}foldr(e,t){for(let n=this.reverse();n.tail;n=n.tail)t=e(n.head,t);return t}map(e){const t=o();return this.foldl((t,n)=>t.append(e(n)),t),t}replaceWith(e,t){return this.head=e,this.tail=t,this}reverse(){return this.foldl((e,t)=>e.add(t),o())}get length(){return this.foldl(e=>e+1,0)}*[Symbol.iterator](){for(let e=this;e.tail;e=e.tail)yield e.head}}function s(...e){let t=new a(r.undefined,r.undefined);for(let n=e.length-1;n>=0;--n)t=t.add(e[n]);return t}n.MList=s;class a{constructor(e,t){this.head=e,this.tail=t}take(e){if(0===e)return s();let t=this;for(let n=0;n+1<e&&t.tail;++n,t=t.tail);const n=t.tail;t.tail&&t.replaceWith(t.head,s());const r=new a(this.head,this.tail);return this.tail&&this.replaceWith(null==n?void 0:n.head,null==n?void 0:n.tail),r}prepend(e){return this.replaceWith(e,new a(this.head,this.tail))}append(e){return this.replaceWith(e,s()).tail}replace(e,t,n){const r=e.take(t),{head:o,tail:i}=e;if(null==n?void 0:n.tail)for(e.replaceWith(n.head,n.tail);e.tail;e=e.tail);return e.replaceWith(o,i),r}splice(e,t=0,n){let r=this;for(let t=0;t<e&&r.tail;++t,r=r.tail);return this.replace(r,t,n)}interleave(e,t,n){let r=this,o=0;for(;!e(r.head,r.tail?o:-1);++o,r=r.tail)if(!r.tail)return;return this.replace(r,t,n)}convert(e){for(let t=this;t.tail;t=t.tail)t.replaceWith(e(t.head),t.tail);return this}clear(){return this.replaceWith(r.undefined,r.undefined)}freeze(){const e=o();for(let t=e,n=this;n.tail;n=n.tail)t=t.append(n.head);return e}add(e){return new a(e,this)}foldl(e,t){for(let n=this;n.tail;n=n.tail)t=e(t,n.head);return t}foldr(e,t){for(let n=this.reverse();n.tail;n=n.tail)t=e(n.head,t);return t}map(e){const t=s();return this.foldl((t,n)=>t.append(e(n)),t),t}replaceWith(e,t){return this.head=e,this.tail=t,this}reverse(){if(!this.tail)return this;for(let e,t=s(),n=this;;){if(e=n.tail,n.replaceWith(n.head,t),!e.tail)return n;t=n,n=e}}get length(){return this.foldl(e=>e+1,0)}*[Symbol.iterator](){for(let e=this;e.tail;e=e.tail)yield e.head}}},{"./global":19}],23:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),o(e("./monad/maybe"),n)},{"./monad/maybe":31}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.memoize=void 0;const r=e("./global");n.memoize=function e(t,n=((...e)=>e[0]),o){if("object"==typeof n)return e(t,r.undefined,n);if(o===r.undefined)return e(t,n,new r.Map);let i=!1;return(...e)=>{const s=n(...e);let a=o.get(s);return a!==r.undefined||i&&o.has(s)?a:(a=t(...e),i=i||a===r.undefined,o.set(s,a),a)}}},{"./global":19}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Applicative=void 0;const r=e("./functor"),o=e("../curry");class i extends r.Functor{}n.Applicative=i,function(e){e.ap=function e(t,n){return n?t.bind(e=>n.fmap(o.curry(e))):n=>e(t,n)}}(i=n.Applicative||(n.Applicative={}))},{"../curry":14,"./functor":28}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Right=n.Left=n.Either=void 0;const r=e("./monad"),o=e("../promise");class i extends r.Monad{constructor(e){super(e),this.EITHER}fmap(e){return this.bind(t=>new a(e(t)))}ap(e){return i.ap(this,e)}bind(e){return new i(()=>{const t=this.evaluate();if(t instanceof s)return t;if(t instanceof a)return e(t.extract());if(t instanceof i)return t.bind(e);throw new TypeError(`Spica: Either: Invalid monad value.\n\t${t}`)})}join(){return this.bind(e=>e)}extract(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)}static do(e){const t=e();let n;for(;;){const{value:e,done:r}=t.next(n);if(r)return e;const o=e.extract(()=>void 0,e=>[e]);if(!o)return e;n=o[0]}}}n.Either=i,function(e){function t(e){return new a(e)}e.pure=t,e.Return=t,e.sequence=function(t){return t instanceof e?t.extract(e=>o.AtomicPromise.resolve(new s(e)),t=>o.AtomicPromise.resolve(t).then(e.Return)):t.reduce((e,t)=>e.bind(e=>t.fmap(t=>[...e,t])),e.Return([]))}}(i=n.Either||(n.Either={}));class s extends i{constructor(e){super(c),this.a=e,this.LEFT}bind(e){return this}extract(e){if(!e)throw this.a;return e(this.a)}}n.Left=s;class a extends i{constructor(e){super(c),this.b=e,this.RIGHT}bind(e){return new i(()=>e(this.extract()))}extract(e,t){return t?t(this.b):this.b}}function c(){throw new Error("Spica: Either: Invalid thunk call.")}n.Right=a},{"../promise":83,"./monad":32}],27:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.Right=n.Left=n.Either=void 0;const s=i(e("./either.impl"));class a extends s.Either{constructor(){super(()=>void 0)}}n.Either=a,n.Left=function(e){return new s.Left(e)},n.Right=function(e){return new s.Right(e)}},{"./either.impl":26}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Functor=void 0;const r=e("./lazy");class o extends r.Lazy{}n.Functor=o,function(e){e.fmap=function(e,t){return t?e.fmap(t):t=>e.fmap(t)}}(o=n.Functor||(n.Functor={}))},{"./lazy":29}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Lazy=void 0;n.Lazy=class{constructor(e){this.thunk=e}evaluate(){return this.memory_=this.memory_||this.thunk()}}},{}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Nothing=n.Just=n.Maybe=void 0;const r=e("./monadplus"),o=e("../promise");class i extends r.MonadPlus{constructor(e){super(e),this.MAYBE}fmap(e){return this.bind(t=>new s(e(t)))}ap(e){return i.ap(this,e)}bind(e){return new i(()=>{const t=this.evaluate();if(t instanceof s)return e(t.extract());if(t instanceof a)return t;if(t instanceof i)return t.bind(e);throw new TypeError(`Spica: Maybe: Invalid monad value.\n\t${t}`)})}guard(e){return e?this:i.mzero}join(){return this.bind(e=>e)}extract(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)}static do(e){const t=e();let n;for(;;){const{value:e,done:r}=t.next(n);if(r)return e;const o=e.extract(()=>void 0,e=>[e]);if(!o)return e;n=o[0]}}}n.Maybe=i,function(e){function t(e){return new s(e)}e.pure=t,e.Return=t,e.sequence=function(t){return t instanceof e?t.extract(()=>o.AtomicPromise.resolve(e.mzero),t=>o.AtomicPromise.resolve(t).then(e.Return)):t.reduce((e,t)=>e.bind(e=>t.fmap(t=>[...e,t])),e.Return([]))}}(i=n.Maybe||(n.Maybe={}));class s extends i{constructor(e){super(c),this.a=e,this.JUST}bind(e){return new i(()=>e(this.extract()))}extract(e,t){return t?t(this.a):this.a}}n.Just=s;class a extends i{constructor(){super(c),this.NOTHING}bind(e){return this}extract(e){if(!e)throw void 0;return e()}}function c(){throw new Error("Spica: Maybe: Invalid thunk call.")}n.Nothing=a,function(e){e.mzero=new a,e.mplus=function(t,n){return new e(()=>t.fmap(()=>t).extract(()=>n))}}(i=n.Maybe||(n.Maybe={}))},{"../promise":83,"./monadplus":33}],31:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.Nothing=n.Just=n.Maybe=void 0;const s=i(e("./maybe.impl"));class a extends s.Maybe{constructor(){super(()=>void 0)}}n.Maybe=a,n.Just=function(e){return new s.Just(e)},n.Nothing=s.Maybe.mzero},{"./maybe.impl":30}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Monad=void 0;const r=e("./applicative");class o extends r.Applicative{}n.Monad=o,function(e){e.bind=function e(t,n){return n?t.bind(n):n=>e(t,n)}}(o=n.Monad||(n.Monad={}))},{"./applicative":25}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MonadPlus=void 0;const r=e("./monad");class o extends r.Monad{}n.MonadPlus=o,o=n.MonadPlus||(n.MonadPlus={})},{"./monad":32}],34:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Sequence=void 0;const o=e("./sequence/core");Object.defineProperty(n,"Sequence",{enumerable:!0,get:function(){return o.Sequence}});const i=r(e("./sequence/member/static/resume")),s=r(e("./sequence/member/static/from")),a=r(e("./sequence/member/static/cycle")),c=r(e("./sequence/member/static/random")),u=r(e("./sequence/member/static/concat")),l=r(e("./sequence/member/static/zip")),d=r(e("./sequence/member/static/difference")),f=r(e("./sequence/member/static/union")),p=r(e("./sequence/member/static/intersect")),h=r(e("./sequence/member/static/pure")),m=r(e("./sequence/member/static/return")),v=r(e("./sequence/member/static/sequence")),y=r(e("./sequence/member/static/mempty")),g=r(e("./sequence/member/static/mconcat")),b=r(e("./sequence/member/static/mappend")),w=r(e("./sequence/member/static/mzero")),_=r(e("./sequence/member/static/mplus")),x=r(e("./sequence/member/instance/extract")),O=r(e("./sequence/member/instance/iterate")),S=r(e("./sequence/member/instance/memoize")),P=r(e("./sequence/member/instance/reduce")),j=r(e("./sequence/member/instance/take")),E=r(e("./sequence/member/instance/drop")),M=r(e("./sequence/member/instance/takeWhile")),T=r(e("./sequence/member/instance/dropWhile")),k=r(e("./sequence/member/instance/takeUntil")),I=r(e("./sequence/member/instance/dropUntil")),q=r(e("./sequence/member/instance/sort")),A=r(e("./sequence/member/instance/unique")),C=r(e("./sequence/member/instance/fmap")),D=r(e("./sequence/member/instance/ap")),R=r(e("./sequence/member/instance/bind")),L=r(e("./sequence/member/instance/join")),z=r(e("./sequence/member/instance/mapM")),F=r(e("./sequence/member/instance/filterM")),N=r(e("./sequence/member/instance/map")),W=r(e("./sequence/member/instance/filter")),U=r(e("./sequence/member/instance/scanl")),B=r(e("./sequence/member/instance/foldr")),H=r(e("./sequence/member/instance/group")),V=r(e("./sequence/member/instance/inits")),Y=r(e("./sequence/member/instance/tails")),$=r(e("./sequence/member/instance/segs")),G=r(e("./sequence/member/instance/subsequences")),X=r(e("./sequence/member/instance/permutations"));e("../helper/compose").compose(o.Sequence,i.default,s.default,a.default,c.default,u.default,l.default,d.default,f.default,p.default,h.default,m.default,v.default,y.default,g.default,b.default,w.default,_.default,x.default,O.default,S.default,P.default,j.default,E.default,M.default,T.default,k.default,I.default,q.default,A.default,C.default,D.default,R.default,L.default,z.default,F.default,N.default,W.default,U.default,B.default,H.default,V.default,Y.default,$.default,G.default,X.default)},{"../helper/compose":20,"./sequence/core":35,"./sequence/member/instance/ap":36,"./sequence/member/instance/bind":37,"./sequence/member/instance/drop":38,"./sequence/member/instance/dropUntil":39,"./sequence/member/instance/dropWhile":40,"./sequence/member/instance/extract":41,"./sequence/member/instance/filter":42,"./sequence/member/instance/filterM":43,"./sequence/member/instance/fmap":44,"./sequence/member/instance/foldr":45,"./sequence/member/instance/group":46,"./sequence/member/instance/inits":47,"./sequence/member/instance/iterate":48,"./sequence/member/instance/join":49,"./sequence/member/instance/map":50,"./sequence/member/instance/mapM":51,"./sequence/member/instance/memoize":52,"./sequence/member/instance/permutations":53,"./sequence/member/instance/reduce":54,"./sequence/member/instance/scanl":55,"./sequence/member/instance/segs":56,"./sequence/member/instance/sort":57,"./sequence/member/instance/subsequences":58,"./sequence/member/instance/tails":59,"./sequence/member/instance/take":60,"./sequence/member/instance/takeUntil":61,"./sequence/member/instance/takeWhile":62,"./sequence/member/instance/unique":63,"./sequence/member/static/concat":64,"./sequence/member/static/cycle":65,"./sequence/member/static/difference":66,"./sequence/member/static/from":67,"./sequence/member/static/intersect":68,"./sequence/member/static/mappend":69,"./sequence/member/static/mconcat":70,"./sequence/member/static/mempty":71,"./sequence/member/static/mplus":72,"./sequence/member/static/mzero":73,"./sequence/member/static/pure":74,"./sequence/member/static/random":75,"./sequence/member/static/resume":76,"./sequence/member/static/return":77,"./sequence/member/static/sequence":78,"./sequence/member/static/union":79,"./sequence/member/static/zip":80}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Sequence=void 0;const r=e("../monadplus");class o extends r.MonadPlus{constructor(e){super(i),this.cons=e}[Symbol.iterator](){let e=()=>this.iterate();return{next(){const t=e();return e=o.Thunk.iterator(t),{done:!o.isIterable(t),value:o.Thunk.value(t)}}}}}function i(){throw new Error("Spica: Sequence: Invalid thunk call.")}n.Sequence=o,o=n.Sequence||(n.Sequence={}),function(e){let t,n,r,o;!function(t){t.cons=function(t,n){switch(arguments.length){case 0:return[];case 1:return[t];case 2:return[t,n];default:throw e.Exception.invalidConsError(arguments)}}}(t=e.Data||(e.Data={})),function(e){e.value=function(e){return e[0]},e.iterator=function(e){return e[1]},e.index=function(e){return e[2]}}(n=e.Thunk||(e.Thunk={})),function(t){t.done=()=>[void 0,t.done,-1],t.when=function t(r,o,i){return e.isIterable(r)?i(r,()=>t(n.iterator(r)(),o,i)):o(r)}}(r=e.Iterator||(e.Iterator={})),e.isIterable=function(e){return n.iterator(e)!==r.done},function(e){e.invalidConsError=function(e){return console.error(e,e.length,e[0],e[1]),new TypeError("Spica: Sequence: Invalid parameters of cons.")},e.invalidDataError=function(e){return console.error(e),new TypeError("Spica: Sequence: Invalid data.")},e.invalidThunkError=function(e){return console.error(e),new TypeError("Spica: Sequence: Invalid thunk.")}}(o=e.Exception||(e.Exception={}))}(o=n.Sequence||(n.Sequence={}))},{"../monadplus":33}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{ap(e){return r.Sequence.ap(this,e)}}n.default=o},{"../../core":35}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{bind(e){return r.Sequence.concat(this.fmap(e))}}n.default=o},{"../../core":35}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{drop(e){return new r.Sequence((t=(()=>this.iterate()),n)=>r.Sequence.Iterator.when(t(),()=>n(),(t,o)=>r.Sequence.Thunk.index(t)<e?o():n(r.Sequence.Thunk.value(t),r.Sequence.Thunk.iterator(t))))}}n.default=o},{"../../core":35}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{dropUntil(e){return new r.Sequence((t=(()=>this.iterate()),n)=>r.Sequence.Iterator.when(t(),()=>n(),(t,o)=>e(r.Sequence.Thunk.value(t))?o():n(r.Sequence.Thunk.value(t),r.Sequence.Thunk.iterator(t))))}}n.default=o},{"../../core":35}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{dropWhile(e){return new r.Sequence((t=(()=>this.iterate()),n)=>r.Sequence.Iterator.when(t(),()=>n(),(t,o)=>e(r.Sequence.Thunk.value(t))?o():n(r.Sequence.Thunk.value(t),r.Sequence.Thunk.iterator(t))))}}n.default=o},{"../../core":35}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{extract(){const e=[];let t=()=>this.iterate();for(;;){const n=t();if(!r.Sequence.isIterable(n))return e;e.push(r.Sequence.Thunk.value(n)),t=r.Sequence.Thunk.iterator(n)}}}n.default=o},{"../../core":35}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{filter(e){return new r.Sequence((t=(()=>this.iterate()),n)=>r.Sequence.Iterator.when(t(),()=>n(),(t,o)=>e(r.Sequence.Thunk.value(t),r.Sequence.Thunk.index(t))?n(r.Sequence.Thunk.value(t),r.Sequence.Thunk.iterator(t)):o()))}}n.default=o},{"../../core":35}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{filterM(e){return r.Sequence.from([0]).bind(()=>{const t=this.extract();switch(t.length){case 0:return r.Sequence.from([[]]);default:{const n=t.shift();return e(n).bind(o=>o?0===t.length?r.Sequence.from([[n]]):r.Sequence.from(t).filterM(e).fmap(e=>[n,...e]):0===t.length?r.Sequence.from([[]]):r.Sequence.from(t).filterM(e))}}})}}n.default=o},{"../../core":35}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{fmap(e){return new r.Sequence((t=(()=>this.iterate()))=>r.Sequence.Iterator.when(t(),()=>r.Sequence.Data.cons(),t=>r.Sequence.Data.cons(e(r.Sequence.Thunk.value(t)),r.Sequence.Thunk.iterator(t))))}}n.default=o},{"../../core":35}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{foldr(e,t){return new r.Sequence((n=(()=>this.reduce().iterate()))=>r.Sequence.Iterator.when(n(),()=>r.Sequence.Data.cons(t),n=>r.Sequence.Data.cons(e(r.Sequence.Thunk.value(n),r.Sequence.resume(r.Sequence.Thunk.iterator(n)).foldr(e,t))))).bind(e=>e)}}n.default=o},{"../../core":35}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{group(e){return new r.Sequence(([t,n]=[()=>this.iterate(),[]],o)=>r.Sequence.Iterator.when(t(),()=>0===n.length?o():o(n),(t,i)=>0===n.length||e(n[0],r.Sequence.Thunk.value(t))?(n.push(r.Sequence.Thunk.value(t)),i()):o(n,[r.Sequence.Thunk.iterator(t),[r.Sequence.Thunk.value(t)]])))}}n.default=o},{"../../core":35}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{inits(){return r.Sequence.mappend(r.Sequence.from([[]]),this.scanl((e,t)=>[...e,t],[]).dropWhile(e=>0===e.length))}}n.default=o},{"../../core":35}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{iterate(){return this.iterate_()}iterate_(e,t=0){const n=this.cons(e,r.Sequence.Data.cons);switch(n.length){case 0:return[void 0,r.Sequence.Iterator.done,-1];case 1:return[n[0],()=>r.Sequence.Iterator.done(),t];case 2:return[n[0],()=>this.iterate_(n[1],t+1),t];default:throw r.Sequence.Exception.invalidDataError(n)}}}n.default=o},{"../../core":35}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{join(){return r.Sequence.concat(this)}}n.default=o},{"../../core":35}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{map(e){return new r.Sequence((t=(()=>this.iterate()))=>r.Sequence.Iterator.when(t(),()=>r.Sequence.Data.cons(),t=>r.Sequence.Data.cons(e(r.Sequence.Thunk.value(t),r.Sequence.Thunk.index(t)),r.Sequence.Thunk.iterator(t))))}}n.default=o},{"../../core":35}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{mapM(e){return r.Sequence.from([0]).bind(()=>{const t=this.extract();switch(t.length){case 0:return r.Sequence.mempty;default:{const n=t.shift();return e(n).bind(n=>0===t.length?r.Sequence.from([[n]]):r.Sequence.from(t).mapM(e).fmap(e=>[n,...e]))}}})}}n.default=o},{"../../core":35}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core"),o=new WeakMap;class i extends r.Sequence{memoize(){return new r.Sequence(([e,t]=[0,o.get(this)||o.set(this,new Map).get(this)],n)=>r.Sequence.Iterator.when(t.get(e)||t.set(e,e>0&&t.has(e-1)?r.Sequence.Thunk.iterator(t.get(e-1))():this.iterate()).get(e),()=>n(),o=>n(r.Sequence.Thunk.value(o),[e+1,t])))}}n.default=i},{"../../core":35}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{permutations(){return r.Sequence.from([0]).bind(()=>{const e=this.extract();return 0===e.length?r.Sequence.mempty:r.Sequence.from([e])}).bind(e=>r.Sequence.mappend(r.Sequence.from([e]),function e(t,n){return r.Sequence.Iterator.when(t.iterate(),()=>r.Sequence.mempty,t=>new r.Sequence((o,i)=>r.Sequence.Iterator.when(t,()=>i(),t=>{const o=r.Sequence.Thunk.value(t),s=r.Sequence.resume(r.Sequence.Thunk.iterator(t)).memoize();return i(n.permutations().foldr((e,t)=>(function(e,t){return function e(t,n,i){return r.Sequence.Iterator.when(n.iterate(),()=>[s,i],n=>{const s=r.Sequence.Thunk.value(n),[a,c]=e(e=>t(r.Sequence.mappend(r.Sequence.from([s]),e)),r.Sequence.resume(r.Sequence.Thunk.iterator(n)),i);return[r.Sequence.mappend(r.Sequence.from([s]),a),r.Sequence.mappend(r.Sequence.from([t(r.Sequence.mappend(r.Sequence.from([o]),r.Sequence.mappend(r.Sequence.from([s]),a))).extract()]),c)]})}(e=>e,e,t)[1]})(r.Sequence.from(e),t),e(s,r.Sequence.mappend(r.Sequence.from([o]),n))))})).bind(e=>e))}(r.Sequence.from(e),r.Sequence.mempty)))}}n.default=o},{"../../core":35}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{reduce(){return new r.Sequence(([e,t]=[0,new Map],n)=>r.Sequence.Iterator.when(t.get(e)||t.set(e,e>0&&t.has(e-1)?r.Sequence.Thunk.iterator(t.get(e-1))():this.iterate()).get(e),()=>n(),o=>n(r.Sequence.Thunk.value(o),[e+1,t])))}}n.default=o},{"../../core":35}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{scanl(e,t){return new r.Sequence(([n,o,i]=[t,()=>this.iterate(),0])=>r.Sequence.Iterator.when(o(),()=>0===i?r.Sequence.Data.cons(t):r.Sequence.Data.cons(),t=>r.Sequence.Data.cons(n=e(n,r.Sequence.Thunk.value(t)),[n,r.Sequence.Thunk.iterator(t),r.Sequence.Thunk.index(t)+1])))}}n.default=o},{"../../core":35}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{segs(){return r.Sequence.mappend(this.foldr((e,t)=>t.take(1).bind(n=>r.Sequence.mappend(r.Sequence.from([r.Sequence.mappend(r.Sequence.from([[e]]),r.Sequence.from(n).map(t=>[e,...t]))]),t)),r.Sequence.from([r.Sequence.from([])])).bind(e=>e),r.Sequence.from([[]]))}}n.default=o},{"../../core":35}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{sort(e){return r.Sequence.from(this.extract().sort(e))}}n.default=o},{"../../core":35}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{subsequences(){return r.Sequence.mappend(r.Sequence.from([[]]),r.Sequence.from([0]).bind(()=>(function e(t){return r.Sequence.Iterator.when(t.iterate(),()=>r.Sequence.mempty,t=>r.Sequence.mappend(r.Sequence.from([[r.Sequence.Thunk.value(t)]]),new r.Sequence((n,o)=>r.Sequence.Iterator.when(t,()=>o(),t=>o(e(r.Sequence.resume(r.Sequence.Thunk.iterator(t))).foldr((e,n)=>r.Sequence.mappend(r.Sequence.mappend(r.Sequence.from([e]),r.Sequence.from([[r.Sequence.Thunk.value(t),...e]])),n),r.Sequence.mempty)))).bind(e=>e)))})(this)))}}n.default=o},{"../../core":35}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{tails(){return r.Sequence.mappend(r.Sequence.from(this.extract().map((e,t,n)=>n.slice(t))),r.Sequence.from([[]]))}}n.default=o},{"../../core":35}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{take(e){return new r.Sequence((t=(()=>this.iterate()),n)=>r.Sequence.Iterator.when(e>0?t():r.Sequence.Iterator.done(),()=>n(),t=>r.Sequence.Thunk.index(t)+1<e?n(r.Sequence.Thunk.value(t),r.Sequence.Thunk.iterator(t)):n(r.Sequence.Thunk.value(t))))}}n.default=o},{"../../core":35}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{takeUntil(e){return new r.Sequence((t=(()=>this.iterate()),n)=>r.Sequence.Iterator.when(t(),()=>n(),t=>e(r.Sequence.Thunk.value(t))?n(r.Sequence.Thunk.value(t)):n(r.Sequence.Thunk.value(t),r.Sequence.Thunk.iterator(t))))}}n.default=o},{"../../core":35}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{takeWhile(e){return new r.Sequence((t=(()=>this.iterate()),n)=>r.Sequence.Iterator.when(t(),()=>n(),t=>e(r.Sequence.Thunk.value(t))?n(r.Sequence.Thunk.value(t),r.Sequence.Thunk.iterator(t)):n()))}}n.default=o},{"../../core":35}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{unique(){const e=new Set;return this.filter(t=>!e.has(t)&&!!e.add(t))}}n.default=o},{"../../core":35}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static concat(e){return new r.Sequence(([t,n]=[()=>e.iterate(),r.Sequence.Iterator.done],o)=>r.Sequence.Iterator.when(t(),()=>o(),(e,t)=>(n=n===r.Sequence.Iterator.done?()=>r.Sequence.Thunk.value(e).iterate():n,r.Sequence.Iterator.when(n(),()=>(n=r.Sequence.Iterator.done,t()),t=>o(r.Sequence.Thunk.value(t),[()=>e,r.Sequence.Thunk.iterator(t)])))))}}n.default=o},{"../../core":35}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static cycle(e){return new r.Sequence((function t([n,r]=[e[Symbol.iterator](),0],o){const i=n.next();return i.done?t([e[Symbol.iterator](),r+1],o):o(i.value,[n,r+1])})).reduce()}}n.default=o},{"../../core":35}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static difference(e,t,n){return new r.Sequence(([o,i]=[()=>e.iterate(),()=>t.iterate()],s)=>r.Sequence.Iterator.when(o(),()=>r.Sequence.Iterator.when(i(),()=>s(),e=>s(r.Sequence.Thunk.value(e),[r.Sequence.Iterator.done,r.Sequence.Thunk.iterator(e)])),(e,t)=>r.Sequence.Iterator.when(i(),()=>s(r.Sequence.Thunk.value(e),[r.Sequence.Thunk.iterator(e),r.Sequence.Iterator.done]),o=>{const a=n(r.Sequence.Thunk.value(e),r.Sequence.Thunk.value(o));return a<0?s(r.Sequence.Thunk.value(e),[r.Sequence.Thunk.iterator(e),()=>o]):a>0?s(r.Sequence.Thunk.value(o),[()=>e,r.Sequence.Thunk.iterator(o)]):(i=()=>r.Sequence.Thunk.iterator(o)(),t())})))}}n.default=o},{"../../core":35}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static from(e){return new r.Sequence(([t,n]=[e[Symbol.iterator](),0],r)=>{const o=t.next();return o.done?r():r(o.value,[t,n+1])}).reduce()}}n.default=o},{"../../core":35}],68:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static intersect(e,t,n){return new r.Sequence(([o,i]=[()=>e.iterate(),()=>t.iterate()],s)=>r.Sequence.Iterator.when(o(),()=>s(),(e,t)=>r.Sequence.Iterator.when(i(),()=>s(),(o,a)=>{const c=n(r.Sequence.Thunk.value(e),r.Sequence.Thunk.value(o));return c<0?(i=()=>o,t()):c>0?a():s(r.Sequence.Thunk.value(e),[r.Sequence.Thunk.iterator(e),r.Sequence.Thunk.iterator(o)])})))}}n.default=o},{"../../core":35}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static mappend(e,t){return r.Sequence.mconcat([e,t])}}n.default=o},{"../../core":35}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static mconcat(e){return[...e].reduce((e,t)=>(function(e,t){return new r.Sequence(([n,o]=[()=>e.iterate(),()=>t.iterate()],i)=>r.Sequence.Iterator.when(n(),()=>r.Sequence.Iterator.when(o(),()=>i(),e=>i(r.Sequence.Thunk.value(e),[r.Sequence.Iterator.done,r.Sequence.Thunk.iterator(e)])),e=>i(r.Sequence.Thunk.value(e),[r.Sequence.Thunk.iterator(e),o])))})(e,t),r.Sequence.mempty)}}n.default=o},{"../../core":35}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");let o=(()=>{class e extends r.Sequence{}return e.mempty=new r.Sequence((e,t)=>t()),e})();n.default=o},{"../../core":35}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");let o=(()=>{class e extends r.Sequence{}return e.mplus=r.Sequence.mappend,e})();n.default=o},{"../../core":35}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");let o=(()=>{class e extends r.Sequence{}return e.mzero=r.Sequence.mempty,e})();n.default=o},{"../../core":35}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static pure(e){return new r.Sequence((t,n)=>n(e))}}n.default=o},{"../../core":35}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static random(e=(()=>Math.random())){return"function"==typeof e?r.Sequence.from(new r.Sequence((t,n)=>n(e(),t))):this.random().map(t=>e[t*e.length|0])}}n.default=o},{"../../core":35}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static resume(e){return new r.Sequence((t=e,n)=>r.Sequence.Iterator.when(t(),()=>n(),e=>n(r.Sequence.Thunk.value(e),r.Sequence.Thunk.iterator(e))))}}n.default=o},{"../../core":35}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static Return(e){return new r.Sequence((t,n)=>n(e))}}n.default=o},{"../../core":35}],78:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static sequence(e){return e.reduce((e,t)=>e.fmap(e=>r.Sequence.mappend(e,t)),r.Sequence.Return(r.Sequence.from([])))}}n.default=o},{"../../core":35}],79:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static union(e,t,n){return new r.Sequence(([o,i]=[()=>e.iterate(),()=>t.iterate()],s)=>r.Sequence.Iterator.when(o(),()=>r.Sequence.Iterator.when(i(),()=>s(),e=>s(r.Sequence.Thunk.value(e),[r.Sequence.Iterator.done,r.Sequence.Thunk.iterator(e)])),e=>r.Sequence.Iterator.when(i(),()=>s(r.Sequence.Thunk.value(e),[r.Sequence.Thunk.iterator(e),r.Sequence.Iterator.done]),t=>{const o=n(r.Sequence.Thunk.value(e),r.Sequence.Thunk.value(t));return o<0?s(r.Sequence.Thunk.value(e),[r.Sequence.Thunk.iterator(e),()=>t]):o>0?s(r.Sequence.Thunk.value(t),[()=>e,r.Sequence.Thunk.iterator(t)]):s(r.Sequence.Thunk.value(e),[r.Sequence.Thunk.iterator(e),r.Sequence.Thunk.iterator(t)])})))}}n.default=o},{"../../core":35}],80:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../core");class o extends r.Sequence{static zip(e,t){return new r.Sequence(([n,o]=[()=>e.iterate(),()=>t.iterate()],i)=>r.Sequence.Iterator.when(n(),()=>i(),e=>r.Sequence.Iterator.when(o(),()=>i(),t=>i([r.Sequence.Thunk.value(e),r.Sequence.Thunk.value(t)],[r.Sequence.Thunk.iterator(e),r.Sequence.Thunk.iterator(t)]))))}}n.default=o},{"../../core":35}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.noop=void 0,n.noop=function(){}},{}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Observation=void 0;const r=e("./global"),o=e("./assign"),i=e("./array"),s=e("./exception");class a{constructor(e,t){this.parent=e,this.index=t,this.children=new r.Map,this.childrenIndexes=[],this.monitors=[],this.subscribers=[]}}n.Observation=class{constructor(e={}){this.id=0,this.node=new a(r.undefined,r.undefined),this.settings={limit:10,cleanup:!1},this.unrelaies=new r.WeakMap,o.extend(this.settings,e)}monitor(e,t,{once:n=!1}={}){if("function"!=typeof t)throw new r.Error(`Spica: Observation: Invalid listener: ${t}`);const{monitors:o}=this.seekNode(e,0);if(o.length===this.settings.limit)throw new r.Error("Spica: Observation: Exceeded max listener limit.");if(this.id===r.Number.MAX_SAFE_INTEGER)throw new r.Error("Spica: Observation: Max listener ID reached max safe integer.");const i={id:++this.id,type:0,namespace:e,listener:t,options:{once:n}};return o.push(i),()=>void this.off(e,i)}on(e,t,{once:n=!1}={}){if("function"!=typeof t)throw new r.Error(`Spica: Observation: Invalid listener: ${t}`);const{subscribers:o}=this.seekNode(e,0);if(o.length===this.settings.limit)throw new r.Error("Spica: Observation: Exceeded max listener limit.");if(this.id===r.Number.MAX_SAFE_INTEGER)throw new r.Error("Spica: Observation: Max listener ID reached max safe integer.");const i={id:++this.id,type:1,namespace:e,listener:t,options:{once:n}};return o.push(i),()=>void this.off(e,i)}once(e,t){return this.on(e,t,{once:!0})}off(e,t){const n=this.seekNode(e,1);if(n)switch(typeof t){case"object":{const e=0===t.type?n.monitors:n.subscribers;if(0===e.length||t.id<e[0].id||t.id>e[e.length-1].id)return;return void i.splice(e,e.indexOf(t),1)}case"function":{const e=n.subscribers;return void i.splice(e,e.findIndex(e=>e.listener===t),1)}case"undefined":return void function e({monitors:t,subscribers:n,childrenIndexes:r,children:o}){for(let t=0;t<r.length;++t)e(o.get(r[t]))&&(o.delete(r[t]),i.splice(r,t,1),--t);return i.splice(n,0),0===t.length}(n)}}emit(e,t,n){this.drain(e,t,n)}reflect(e,t){let n;return this.emit(e,t,(e,t)=>n=t),n}relay(e){if(this.unrelaies.has(e))return this.unrelaies.get(e);const t=e.monitor([],(e,t)=>void this.emit(t,e)),n=()=>(this.unrelaies.delete(e),void t());return this.unrelaies.set(e,n),n}refs(e){const t=this.seekNode(e,1);return t?i.push(this.refsBelow(t,0),this.refsBelow(t,1)).reduce((e,t)=>i.push(e,t),[]):[]}drain(e,t,n){const r=this.seekNode(e,1),o=[],i=r?this.refsBelow(r,1):[];for(let r=0;r<i.length;++r){const a=i[r];if(0!==a.length)for(let r=0,i=a[a.length-1].id;r<a.length&&a[r].id<=i;++r){const i=a[r];i.options.once&&this.off(i.namespace,i);try{const r=i.listener(t,e);n&&o.push(r)}catch(e){s.causeAsyncException(e)}for(r=r<a.length?r:a.length-1;r>=0&&a[r].id>i.id;--r);}}const a=this.refsAbove(r||this.seekNode(e,2),0);for(let n=0;n<a.length;++n){const r=a[n];if(0!==r.length)for(let n=0,o=r[r.length-1].id;n<r.length&&r[n].id<=o;++n){const o=r[n];o.options.once&&this.off(o.namespace,o);try{o.listener(t,e)}catch(e){s.causeAsyncException(e)}for(n=n<r.length?n:r.length-1;n>=0&&r[n].id>o.id;--n);}}if(n)try{n(t,o)}catch(e){s.causeAsyncException(e)}}refsAbove({parent:e,monitors:t,subscribers:n},r){const o=0===r?[t]:[n];for(;e;)0===r?o.push(e.monitors):o.push(e.subscribers),e=e.parent;return o}refsBelow(e,t){return this.refsBelow_(e,t,[])[0]}refsBelow_({monitors:e,subscribers:t,childrenIndexes:n,children:r},o,s){0===o?s.push(e):s.push(t);let a=0;for(let e=0;e<n.length;++e){const t=n[e],c=this.refsBelow_(r.get(t),o,s)[1];a+=c,0===c&&this.settings.cleanup&&(r.delete(t),i.splice(n,e,1),--e)}return[s,e.length+t.length+a]}seekNode(e,t){let n=this.node;for(let r=0;r<e.length;++r){const o=e[r],{childrenIndexes:i,children:s}=n;let c=s.get(o);if(!c){switch(t){case 1:return;case 2:return n}c=new a(n,o),i.push(o),s.set(o,c)}n=c}return n}}},{"./array":5,"./assign":6,"./exception":16,"./global":19}],83:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n.isPromiseLike=n.Internal=n.AtomicPromise=void 0;const o=e("./global"),i=e("./alias"),s=e("./array"),a=Symbol.for("spica/promise::internal");class c{constructor(e){this[Symbol.toStringTag]="Promise",this[r]=new u;try{e(e=>this[a].resolve(e),e=>this[a].reject(e))}catch(e){this[a].reject(e)}}static get[Symbol.species](){return c}static all(e){return new c((t,n)=>{const r=i.isArray(e)?e:[...e],s=o.Array(r.length);let c=0;for(let e=0;e<r.length;++e){const o=r[e];if(l(o)){if(d(o)){const{status:t}=o[a];switch(t.state){case 2:s[e]=t.result,++c;continue;case 3:n(t.result),e=r.length;continue}}o.then(n=>{s[e]=n,++c,c===r.length&&t(s)},t=>{n(t),e=r.length})}else s[e]=o,++c}c===r.length&&t(s)})}static race(e){return new c((t,n)=>{const r=i.isArray(e)?e:[...e];for(let e=0;e<r.length;++e){const o=r[e];if(!l(o))return t(o);if(d(o)){const{status:e}=o[a];switch(e.state){case 2:return t(e.result);case 3:return n(e.result)}}}let o=!1;for(let e=0;e<r.length;++e){if(r[e].then(e=>{t(e),o=!0},e=>{n(e),o=!0}),o)return}})}static resolve(e){return new c(t=>t(e))}static reject(e){return new c((t,n)=>n(e))}then(e,t){return new c((n,r)=>this[a].then(e,t,n,r))}catch(e){return this.then(o.undefined,e)}finally(e){return this.then(e,e).then(()=>this)}}n.AtomicPromise=c,r=a;class u{constructor(){this.status={state:0},this.reactable=!0,this.fulfillReactions=[],this.rejectReactions=[],this.isHandled=!1}get isPending(){return 0===this.status.state}resolve(e){if(0===this.status.state){if(!l(e))return this.status={state:2,result:e},this.resume();this.status={state:1,result:e},e.then(e=>{this.status={state:2,result:e},this.resume()},e=>{this.status={state:3,result:e},this.resume()})}}reject(e){if(0===this.status.state)return this.status={state:3,result:e},this.resume()}then(e,t,n,r){const{status:o,fulfillReactions:i,rejectReactions:s}=this;switch(o.state){case 2:if(i.length>0)break;try{return n(e?e(o.result):o.result)}catch(e){return r(e)}case 3:if(s.length>0)break;try{return t?n(t(o.result)):r(o.result)}catch(e){return r(e)}}3!==o.state&&i.push(t=>{try{n(e?e(t):t)}catch(e){r(e)}}),2!==o.state&&s.push(e=>{try{t?n(t(e)):r(e)}catch(e){r(e)}}),this.resume()}resume(){if(!this.reactable)return;const{status:e,fulfillReactions:t,rejectReactions:n}=this;switch(e.state){case 0:case 1:return;case 2:if(this.isHandled&&n.length>0&&s.splice(n,0),0===t.length)return;return this.isHandled=!0,void this.react(t,e.result);case 3:if(this.isHandled&&t.length>0&&s.splice(t,0),0===n.length)return;return this.isHandled=!0,void this.react(n,e.result)}}react(e,t){if(this.reactable=!1,e.length<5)for(;e.length>0;)e.shift()(t);else{for(let n=0;n<e.length;++n)e[n](t);s.splice(e,0)}this.reactable=!0}}function l(e){return null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}function d(e){return a in e}n.Internal=u,n.isPromiseLike=l},{"./alias":4,"./array":5,"./global":19}],84:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),o(e("./monad/sequence"),n)},{"./monad/sequence":34}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sqid=void 0;const r=e("./global"),o="0".repeat(15);let i=0;n.sqid=function e(t){if(0===arguments.length){if(i===r.Number.MAX_SAFE_INTEGER)throw new TypeError("Spica: sqid: sqid reached max safe integer.");return e(++i)}if("number"!=typeof t)throw new TypeError(`Spica: sqid: A parameter value must be a number: ${t}`);if(t>=0==!1)throw new TypeError(`Spica: sqid: A parameter value must be a positive number: ${t}`);if(t%1!=0)throw new TypeError(`Spica: sqid: A parameter value must be an integer: ${t}`);return(o+t).slice(-16)}},{"./global":19}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Supervisor=void 0;const r=e("./global"),o=e("./alias"),i=e("./coroutine"),s=e("./promise"),c=e("./future"),u=e("./observation"),l=e("./array"),d=e("./assign"),f=e("./clock"),p=e("./sqid"),h=e("./exception");let m=(()=>{var e;class t extends i.Coroutine{constructor(n={}){if(super(a((function*(){return this.state}))),this.state=new c.AtomicFuture,this.id=p.sqid(),this.settings={name:"",size:r.Infinity,timeout:r.Infinity,destructor:e=>void 0,scheduler:f.tick,resource:10},this.events_={init:new u.Observation,loss:new u.Observation,exit:new u.Observation},this.events=this.events_,this.workers=new r.Map,this.alive=!0,this.available=!0,this[e]={ask:()=>{throw new r.Error(`Spica: Supervisor: <${this.id}/${this.name}>: Cannot use coroutine port.`)},recv:()=>{throw new r.Error(`Spica: Supervisor: <${this.id}/${this.name}>: Cannot use coroutine port.`)},send:()=>{throw new r.Error(`Spica: Supervisor: <${this.id}/${this.name}>: Cannot use coroutine port.`)},connect:()=>{throw new r.Error(`Spica: Supervisor: <${this.id}/${this.name}>: Cannot use coroutine port.`)}},this.scheduled=!1,this.messages=[],this[i.Coroutine.init](),d.extend(this.settings,n),this.name=this.settings.name,this.constructor===t)throw new r.Error(`Spica: Supervisor: <${this.id}/${this.name}>: Cannot instantiate abstract classes.`);this.constructor.instances.add(this)}static get instances(){return this.hasOwnProperty("instances_")?this.instances_:this.instances_=new r.Set}static get count(){return this.instances.size}static get procs(){return[...this.instances].reduce((e,t)=>e+t.workers.size,0)}static clear(e){for(;this.instances.size>0;)for(const t of this.instances)t.terminate(e)}destructor(e){for(this.available=!1,this.clear(e),o.ObjectFreeze(this.workers);this.messages.length>0;){const[e,t]=this.messages.shift(),n="string"==typeof e?e:e[Symbol.iterator]().next().value;this.events_.loss.emit([n],[n,t])}this.alive=!1,this.constructor.instances.delete(this),o.ObjectFreeze(this),this.settings.destructor(e),this.state.bind(void 0===e?void 0:s.AtomicPromise.reject(e))}throwErrorIfNotAvailable(){if(!this.available)throw new r.Error(`Spica: Supervisor: <${this.id}/${this.name}>: A supervisor is already terminated.`)}register(e,t,n){if(n=n,this.throwErrorIfNotAvailable(),i.isCoroutine(t)){const r=t[t.constructor.port],o={init:e=>e,main:(e,t,n)=>r.ask(e).then(({value:e,done:r})=>r&&void n()||[e,t]),exit:e=>void t[t.constructor.terminate](e)};this.constructor.standalone.add(o);const i=this.register(e,o,n);return t.catch(i),i}if(function(e){return"AsyncGeneratorFunction"===e[Symbol.toStringTag]}(t)){let r;return this.register(e,{init:(e,n)=>(r=t(e,n),r.next().catch(n),e),main:(e,t,n)=>s.AtomicPromise.resolve(r.next(e)).then(({value:e,done:r})=>r&&void n()||[e,t]),exit:()=>void 0},n)}if("function"==typeof t){if(function(e){return"GeneratorFunction"===e[Symbol.toStringTag]}(t)){let r;return this.register(e,{init:(e,n)=>(r=t(e,n),r.next(),e),main:(e,t,n)=>{const{value:o,done:i}=r.next(e);return i&&n(),[o,t]},exit:()=>void 0},n)}return this.register(e,{init:e=>e,main:t,exit:()=>void 0},n)}if(this.workers.has(e))throw new r.Error(`Spica: Supervisor: <${this.id}/${this.name}/${e}>: Cannot register a process multiply with the same name.`);this.schedule();const o=new y(e,t,n,this,()=>void this.schedule(),this.constructor.standalone.has(t),this.events_,()=>this.workers.get(e)===o&&void this.workers.delete(e));return this.workers.set(e,o),o.terminate}call(e,t,n=this.settings.timeout,o=this.settings.timeout){if("function"!=typeof n)return new s.AtomicPromise((r,o)=>void this.call(e,t,(e,t)=>t?o(t):r(e),n));for(this.messages.push(["string"==typeof e?e:new v(this.workers,e),t,n,Date.now()+o]);this.messages.length>(this.available?this.settings.size:0);){const[e,t,n]=this.messages.shift(),o="string"==typeof e?e:e[Symbol.iterator]().next().value;this.events_.loss.emit([o],[o,t]);try{n(void 0,new r.Error(`Spica: Supervisor: <${this.id}/${this.name}>: A message overflowed.`))}catch(e){h.causeAsyncException(e)}}this.throwErrorIfNotAvailable(),this.schedule(),o>0&&o!==r.Infinity&&r.setTimeout(()=>void this.schedule(),o+3)}cast(e,t,n=this.settings.timeout){var r;let o;for(e of(this.throwErrorIfNotAvailable(),"string"==typeof e?[e]:new v(this.workers,e)))if(o=null===(r=this.workers.get(e))||void 0===r?void 0:r.call([t,Date.now()+n]))break;return e=e,!!o||(this.events_.loss.emit([e],[e,t]),!1)}refs(e){return void 0===e?[...this.workers.values()].map(t):this.workers.has(e)?[t(this.workers.get(e))]:[];function t(e){return[e.name,e.process,e.state,e.terminate]}}kill(e,t){return!!this.available&&(!!this.workers.has(e)&&this.workers.get(e).terminate(t))}clear(e){for(;this.workers.size>0;)for(const t of this.workers.values())t.terminate(e)}terminate(e){return!!this.available&&(this.destructor(e),this[i.Coroutine.exit](void 0),!0)}[i.Coroutine.terminate](e){this.terminate(e)}schedule(){if(!this.available||this.scheduled||0===this.messages.length)return;const e=new c.AtomicFuture(!1);e.finally(()=>{this.scheduled=!1,this.deliver()}),f.tick(()=>{this.settings.scheduler.call(void 0,e.bind),this.settings.scheduler===requestAnimationFrame&&r.setTimeout(e.bind,1e3)}),this.scheduled=!0}deliver(){var e;if(!this.available)return;const t=Date.now();for(let n=0,o=this.messages.length;this.available&&n<o;++n){if(this.settings.resource-(Date.now()-t)<=0)return void this.schedule();const[i,s,a,c]=this.messages[n];let u,d;for(d of"string"==typeof i?[i]:i)if(u=null===(e=this.workers.get(d))||void 0===e?void 0:e.call([s,c]))break;if(!(void 0===u&&Date.now()<c))if(l.splice(this.messages,n,1),--n,--o,void 0===u){this.events_.loss.emit([d],[d,s]);try{a(void 0,new r.Error("Spica: Supervisor: A process has failed."))}catch(e){h.causeAsyncException(e)}}else u.then(e=>void a(e),()=>void a(void 0,new r.Error("Spica: Supervisor: A process has failed.")))}}}return e=i.Coroutine.port,t.standalone=new r.WeakSet,t})();n.Supervisor=m;class v{constructor(e,t=(e=>e)){this.workers=e,this.selector=t}*[Symbol.iterator](){let e=0;for(const t of this.selector(this.workers.keys()))++e,yield t;0===e&&(yield"")}}class y{constructor(e,t,n,r,o,i,s,a){this.name=e,this.process=t,this.state=n,this.sv=r,this.schedule=o,this.events=s,this.destructor_=a,this.alive=!0,this.available=!0,this.initiated=!1,this.terminate=e=>!!this.alive&&(this.destructor(e),!0),i&&this.init()}destructor(e){this.alive=!1,this.available=!1,o.ObjectFreeze(this);try{this.destructor_()}catch(e){h.causeAsyncException(e)}this.initiated&&this.exit(e)}init(){this.initiated=!0,this.events.init.emit([this.name],[this.name,this.process,this.state]),this.state=this.process.init(this.state,this.terminate)}exit(e){try{this.process.exit(e,this.state),this.events.exit.emit([this.name],[this.name,this.process,this.state,e])}catch(t){this.events.exit.emit([this.name],[this.name,this.process,this.state,e]),this.sv.terminate(t)}}call([e,t]){const n=Date.now();if(this.available&&!(n>t))return new s.AtomicPromise((i,a)=>{o.isFinite(t)&&r.setTimeout(()=>void a(new r.Error),t-n),this.available=!1,this.initiated||(this.init(),this.alive)?s.AtomicPromise.resolve(this.process.main(e,this.state,this.terminate)).then(i,a):a()}).then(([e,t])=>(this.alive&&(this.schedule(),this.state=t,this.available=!0),e)).catch(e=>{throw this.schedule(),this.terminate(e),e})}}},{"./alias":4,"./array":5,"./assign":6,"./clock":11,"./coroutine":13,"./exception":16,"./future":18,"./global":19,"./observation":82,"./promise":83,"./sqid":85}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.debounce=n.throttle=void 0;const r=e("./list"),o=e("./global");n.throttle=function(e,t){let n=0,i=r.MList();return s=>{i.prepend(s),n>0||(n=o.setTimeout(()=>{n=0;const e=i;i=r.MList(),t(e.head,e)},e))}},n.debounce=function(e,t){let n=0,i=r.MList();return s=>{i.prepend(s),n>0||(n=o.setTimeout(()=>{n=0,o.setTimeout(()=>{if(n>0)return;const e=i;i=r.MList(),t(e.head,e)},i.length>1?e:0)},e))}}},{"./global":19,"./list":22}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tuple=void 0,n.tuple=function(...e){return e}},{}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isPrimitive=n.isType=n.type=void 0;const r=Object.prototype.toString.call.bind(Object.prototype.toString);function o(e){const t=null==e?e:typeof e;switch(t){case void 0:case null:return`${e}`;case"boolean":case"number":case"bigint":case"string":case"symbol":return t;default:return r(e).slice(8,-1)}}n.type=o,n.isType=function(e,t){switch(t){case"function":return"function"==typeof e;case"object":return null!==e&&"object"==typeof e;default:return o(e)===t}},n.isPrimitive=function(e){switch(typeof e){case"undefined":case"boolean":case"number":case"bigint":case"string":case"symbol":return!0;default:return null===e}}},{}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.URL=void 0;const r=e("./global"),o=e("./url/domain/format");var i=e("./url/domain/format");Object.defineProperty(n,"standardize",{enumerable:!0,get:function(){return i.standardize}});n.URL=class{constructor(e,t=r.location.href){this.url=new o.ReadonlyURL(e,t)}get reference(){var e;return this.reference_=null!==(e=this.reference_)&&void 0!==e?e:this.url.href}get resource(){return this.resource_=void 0===this.resource_?this.reference.slice(0,"?"===this.query?this.fragment?-this.fragment.length-1:-1:-this.fragment.length||this.reference.length):this.resource_}get origin(){var e;return this.origin_=null!==(e=this.origin_)&&void 0!==e?e:this.url.origin}get scheme(){var e;return this.scheme_=null!==(e=this.scheme_)&&void 0!==e?e:this.url.protocol.slice(0,-1)}get protocol(){var e;return this.protocol_=null!==(e=this.protocol_)&&void 0!==e?e:this.reference.slice(0,this.reference.indexOf(":")+1)}get host(){var e;return this.host_=null!==(e=this.host_)&&void 0!==e?e:this.url.host}get hostname(){var e;return this.hostname_=null!==(e=this.hostname_)&&void 0!==e?e:this.url.hostname}get port(){var e;return this.port_=null!==(e=this.port_)&&void 0!==e?e:this.url.port}get path(){var e;return this.path_=null!==(e=this.path_)&&void 0!==e?e:`${this.pathname}${this.query}`}get pathname(){var e;return this.pathname_=null!==(e=this.pathname_)&&void 0!==e?e:this.url.pathname}get query(){return this.query_=void 0===this.query_?this.reference.slice(~(~this.reference.slice(0,-this.fragment.length||this.reference.length).indexOf("?")||~this.reference.length),-this.fragment.length||this.reference.length):this.query_}get fragment(){return this.fragment_=void 0===this.fragment_?this.reference.slice(~(~this.reference.indexOf("#")||~this.reference.length)):this.fragment_}}},{"./global":19,"./url/domain/format":91}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ReadonlyURL=n._encode=n.standardize=void 0;const r=e("../../global"),o=e("../../alias"),i=e("../../memoize"),s=e("../../cache"),a=e("../../flip"),c=e("../../curry");var u;function l(e){return e.trim().replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[\uDC00-\uDFFF]/g,e=>2===e.length?e:"").replace(/%(?![0-9A-F]{2})|[^%\[\]]+/gi,encodeURI).replace(/\?[^#]+/,e=>"?"+e.slice(1).replace(/%[0-9A-F]{2}|[^=&]/gi,e=>e.length<3?encodeURIComponent(e):e)).replace(/%[0-9A-F]{2}/gi,e=>e.toUpperCase()).replace(/#.+/,e.slice(e.indexOf("#")).trim())}u||(u={}),n.standardize=function(e,t=r.location.href){return l(function(e,t){return new d(e,t).href}(e,t))},n._encode=l;let d=(()=>{class e{constructor(t,n){return e.new(t,n)}}return e.new=a.flip(c.uncurry(i.memoize(e=>i.memoize(t=>o.ObjectFreeze(new r.global.URL(function(e,t){return e.trim()||t}(t,e),e)),new s.Cache(100)),new s.Cache(100)))),e})();n.ReadonlyURL=d},{"../../alias":4,"../../cache":7,"../../curry":14,"../../flip":17,"../../global":19,"../../memoize":24}],92:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.uuid=void 0;const r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",{random:o}=Math;n.uuid=function(){let e="";for(let t=0;t<r.length;++t){const n=r[t];if("x"===n||"y"===n){const t=16*o()|0;e+=("x"==n?t:3&t|8).toString(16)}else e+=n}return e}},{}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("spica/global");var r=e("./src/dom/builder");Object.defineProperty(n,"Shadow",{enumerable:!0,get:function(){return r.Shadow}}),Object.defineProperty(n,"HTML",{enumerable:!0,get:function(){return r.HTML}}),Object.defineProperty(n,"SVG",{enumerable:!0,get:function(){return r.SVG}}),Object.defineProperty(n,"API",{enumerable:!0,get:function(){return r.API}});var o=e("./src/dom/proxy");Object.defineProperty(n,"proxy",{enumerable:!0,get:function(){return o.proxy}});var i=e("./src/util/dom");Object.defineProperty(n,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(n,"frag",{enumerable:!0,get:function(){return i.frag}}),Object.defineProperty(n,"html",{enumerable:!0,get:function(){return i.html}}),Object.defineProperty(n,"svg",{enumerable:!0,get:function(){return i.svg}}),Object.defineProperty(n,"text",{enumerable:!0,get:function(){return i.text}}),Object.defineProperty(n,"element",{enumerable:!0,get:function(){return i.element}}),Object.defineProperty(n,"define",{enumerable:!0,get:function(){return i.define}});var s=e("./src/util/listener");Object.defineProperty(n,"listen",{enumerable:!0,get:function(){return s.listen}}),Object.defineProperty(n,"once",{enumerable:!0,get:function(){return s.once}}),Object.defineProperty(n,"wait",{enumerable:!0,get:function(){return s.wait}}),Object.defineProperty(n,"delegate",{enumerable:!0,get:function(){return s.delegate}}),Object.defineProperty(n,"bind",{enumerable:!0,get:function(){return s.bind}}),Object.defineProperty(n,"currentTarget",{enumerable:!0,get:function(){return s.currentTarget}});var a=e("./src/util/query");Object.defineProperty(n,"apply",{enumerable:!0,get:function(){return a.apply}})},{"./src/dom/builder":94,"./src/dom/proxy":96,"./src/util/dom":97,"./src/util/listener":98,"./src/util/query":99,"spica/global":19}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SVG=n.HTML=n.Shadow=n.API=void 0;const r=e("spica/global"),o=e("spica/alias"),i=e("./proxy"),s=e("../util/dom");function a(e,t=(e=>e)){return new Proxy(()=>r.undefined,function(e,t){return{apply(e,t,[n,...r]){return this.get(e,n,e)(...r)},get:(n,a)=>n[a]||a in n||"string"!=typeof a?n[a]:n[a]=function(e,n){return function c(u,l,d){if("function"==typeof u)return c(r.undefined,r.undefined,u);if("function"==typeof l)return c(u,r.undefined,l);if(u!==r.undefined&&function(e){return"object"!=typeof e||o.ObjectValues(e).slice(-1).every(e=>"object"==typeof e)}(u))return c(r.undefined,u,d);const f=t(function(t,r,i){const c=t(n,e,r||{},i);if(e!==c.tagName.toLowerCase())throw new Error(`TypedDOM: Expected tag name is "${e}" but actually "${c.tagName.toLowerCase()}".`);if(t!==a){if(r)for(const e of o.ObjectKeys(r)){const t=r[e];"function"==typeof t&&c.removeEventListener(e,t)}s.define(c,r)}return c}(d||a,u,l));return 1===f.nodeType?new i.Elem(f,l):new i.Elem(f.host,l,f)};function a(e,t,n){return e(t,n)}}(a,e)}}(e,t))}n.API=a,n.Shadow=a(s.html,s.shadow),n.HTML=a(s.html),n.SVG=a(s.svg)},{"../util/dom":97,"./proxy":96,"spica/alias":4,"spica/global":19}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.uid=void 0;const r=e("spica/uuid").uuid().split("-").pop();let o=0;n.uid=function(){return`id-${r}-${++o}`}},{"spica/uuid":92}],96:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Elem=n.proxy=void 0;const r=e("spica/global"),o=e("spica/alias"),i=e("./identity"),s=e("../util/dom"),a=e("spica/array"),c=new r.WeakMap;function u(e){const t=c.get(e);if(t)return t;throw new Error("TypedDOM: This element has no proxy.")}n.proxy=u;Symbol.for("typed-dom/tag");function l({element:e}){if(e.parentElement&&c.has(e.parentElement))throw new Error("TypedDOM: Typed DOM children must not be used to another typed DOM.")}n.Elem=class{constructor(e,t,n=e){switch(this.element=e,this.children_=t,this.container=n,this.id_="",this.query_="",this.isPartialUpdate=!1,this.isInit=!0,!0){case t===r.undefined:this.type=0;break;case"string"==typeof t:this.type=1;break;case o.isArray(t):this.type=2;break;case t&&"object"==typeof t:this.type=3;break;default:throw new Error("TypedDOM: Invalid type children.")}switch(l(this),c.set(this.element,this),this.type){case 0:return void(this.isInit=!1);case 1:return s.define(this.container,[]),this.children_=this.container.appendChild(s.text("")),this.children=t,void(this.isInit=!1);case 2:return s.define(this.container,[]),this.children_=[],this.children=t,void(this.isInit=!1);case 3:return s.define(this.container,[]),this.children_=this.observe({...t}),this.children=t,void(this.isInit=!1);default:throw new Error("TypedDOM: Unreachable code.")}}get id(){return this.id_?this.id_:(this.id_=this.element.id.trim(),this.id_?this.id_:(this.id_=i.uid(),this.element.classList.add(this.id_),this.id_))}get query(){if(this.query_)return this.query_;switch(!0){case this.element!==this.container:return this.query_=":host";case this.id===this.element.id.trim():return this.query_=`#${this.id}`;default:return this.query_=`.${this.id}`}}observe(e){const t={};for(const n of o.ObjectKeys(e)){if(n in{})continue;let r=e[n];l(r),this.container.appendChild(r.element),t[n]={configurable:!0,enumerable:!0,get:()=>r,set:e=>{const t=r;if(e!==t)if(this.isPartialUpdate)if(r=e,e.element.parentNode===t.element.parentNode){const n=e.element.nextSibling!==t.element?e.element.nextSibling:t.element.nextSibling;this.container.replaceChild(e.element,t.element),this.container.insertBefore(t.element,n)}else this.container.insertBefore(e.element,t.element),this.container.removeChild(t.element);else this.children={...this.children_,[n]:e}}}}return o.ObjectDefineProperties(e,t)}scope(e){const t=e.element;switch(!1){case"type"in t:case"media"in t:case"STYLE"===t.tagName:return}const n=/(^|[,}])(\s*)\$scope(?![\w-])(?=[^;{}]*{)/g,r=t.innerHTML;if(-1===r.search(n))return;const o=this.query;if(/^[:#.][\w-]+$/.test(o)&&(t.innerHTML=r.replace(n,(e,t,n)=>`${t}${n}${o}`),t.firstElementChild))for(let e=t.children,n=0,r=e.length;n<r;++n)e[0].remove()}get children(){switch(this.type){case 1:if(this.children_.parentNode!==this.container){this.children_=r.undefined;for(let e=this.container.childNodes,t=0,n=e.length;t<n;++t){const n=e[t];if("wholeText"in n!=!1){this.children_=n;break}}}return this.children_.data;default:return this.children_}}set children(e){const t=[],n=[];let i=!1;switch(this.type){case 0:return;case 1:{if(!this.isInit&&e===this.children)return;const t=this.children_,n=t.data,o=e;if(t.data=o,o===n)return;return void this.element.dispatchEvent(new r.Event("change",{bubbles:!1,cancelable:!0}))}case 2:{const r=e,o=[];this.children_=o;const s=this.container.children;for(let e=0;e<r.length;++e){const t=r[e],a=s[e];t.element.parentNode!==this.container&&l(t),t.element!==a&&(t.element.parentNode!==this.container&&(this.scope(t),n.push(t)),this.container.insertBefore(t.element,a),i=!0),o.push(t)}for(let e=s.length;r.length<e--;){const e=s[r.length];c.has(e)&&(t.push(u(this.container.removeChild(e))),i=!0)}break}case 3:{const r=e,s=this.children_;for(const e of o.ObjectKeys(s)){const o=s[e],c=r[e];if(this.isInit||c!==o){if(c.element.parentNode!==this.container&&l(c),(this.isInit||c!==o&&c.element.parentNode!==o.element.parentNode)&&(this.scope(c),n.push(c),!this.isInit)){let e=0;e=t.lastIndexOf(c),e>-1&&a.splice(t,e,1),t.push(o),e=n.lastIndexOf(o),e>-1&&a.splice(n,e,1)}this.isPartialUpdate=!0,s[e]=r[e],this.isPartialUpdate=!1,i=!0}}break}}if(t.length){const e=new r.Event("disconnect",{bubbles:!1,cancelable:!0});for(const{element:n}of t)n.dispatchEvent(e)}if(n.length){const e=new r.Event("connect",{bubbles:!1,cancelable:!0});for(const{element:t}of n)t.dispatchEvent(e)}i&&this.element.dispatchEvent(new r.Event("change",{bubbles:!1,cancelable:!0}))}}},{"../util/dom":97,"./identity":95,"spica/alias":4,"spica/array":5,"spica/global":19}],97:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.define=n.element=n.text=n.svg=n.html=n.frag=n.shadow=void 0;const r=e("spica/global"),o=e("spica/alias"),i=e("spica/memoize");var s;function a(e){return r.document.createTextNode(e)}function c(e,t){const n=i.memoize(u,(e,t,n)=>`${t}:${n}`);return function(r,o,i){const s=r.includes("-")?u(e,t,r):n(e,t,r).cloneNode(!0);return f(o)?d(s,o):d(l(s,o),i)}}function u(e,t,n){if(!("createElement"in e))throw new Error("TypedDOM: Scoped custom elements are not supported on this browser.");switch(t){case"HTML":return e.createElement(n);case"SVG":return e.createElementNS("http://www.w3.org/2000/svg",n)}}function l(e,t){if(!t)return e;for(const n of o.ObjectKeys(t)){const r=t[n];switch(typeof r){case"string":e.setAttribute(n,r);continue;case"function":if(n.length<3)throw new Error(`TypedDOM: Attribute names for event listeners must have an event name but got "${n}".`);if("on"!==n.slice(0,2))throw new Error(`TypedDOM: Attribute names for event listeners must start with "on" but got "${n}".`);e.addEventListener(n.slice(2),r,{passive:["wheel","mousewheel","touchstart","touchmove"].includes(n.slice(2))});continue;case"object":e.removeAttribute(n);continue;default:continue}}return e}function d(e,t){switch(typeof t){case"undefined":return e;case"string":return d(e,[t])}if(!o.isArray(t)){if(!("length"in t))return d(e,[...t]);const n=[];for(let e=0,r=t.length;e<r;++e)n.push(t[e]);return d(e,n)}const n=e.firstChild?e.childNodes:[];let r=n.length;if(0===r)return e.append(...t),e;let i=0;e:for(let o=0;o<t.length;++o){if(i===r)return e.append(...t.slice(o)),e;const s=t[o];if("object"==typeof s&&11===s.nodeType){const t=s.childNodes.length;e.insertBefore(s,n[i]||null),i+=t,r+=t;continue}for(++i;r>t.length;){const e=n[i-1];if(p(e,s))continue e;e.remove(),--r}const c=n[i-1];p(c,s)||(r<t.length-o+i?(e.insertBefore("string"==typeof s?a(s):s,c),++r):e.replaceChild("string"==typeof s?a(s):s,c))}for(;i<r;)n[i].remove(),--r;return e}function f(e){return!!(null==e?void 0:e[r.Symbol.iterator])}function p(e,t){return"string"==typeof t?"wholeText"in e&&e.data===t:e===t}!function(e){e.shadows=new WeakMap,e.fragment=r.document.createDocumentFragment()}(s||(s={})),n.shadow=function e(t,o,i){if("string"==typeof t)return e(n.html(t),o,i);if(o&&!f(o))return e(t,r.undefined,o);const a=i===r.undefined?t.shadowRoot||s.shadows.get(t):"open"===i.mode?t.shadowRoot||r.undefined:s.shadows.get(t);return d(i&&"open"!==i.mode?a||s.shadows.set(t,t.attachShadow(i)).get(t):a||t.attachShadow(i||{mode:"open"}),a||o!=r.undefined?o:t.childNodes)},n.frag=function(e){return d(s.fragment.cloneNode(!0),e)},n.html=c(r.document,"HTML"),n.svg=c(r.document,"SVG"),n.text=a,n.element=c,n.define=function(e,t,n){return f(t)?d(e,t):d(l(e,t),n)}},{"spica/alias":4,"spica/global":19,"spica/memoize":24}],98:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.bind=n.delegate=n.wait=n.once=n.listen=n.currentTarget=void 0;const r=e("spica/global"),o=e("spica/promise"),i=e("spica/noop");function s(e,t,n,r=!1,o={}){return"string"==typeof n?a(e,t,n,r,{..."boolean"==typeof o?{capture:o}:o,once:!0}):c(e,t,n,{..."boolean"==typeof r?{capture:r}:r,once:!0})}function a(e,t,n,o,a={}){let u=i.noop;return c(e,n,e=>{var i,c;u();const l=e.target.shadowRoot?null===(i=e.composedPath()[0])||void 0===i?void 0:i.closest(t):null===(c=e.target)||void 0===c?void 0:c.closest(t);return l?u=s(l,n,o,a):r.undefined,e.returnValue},{...a,capture:!0})}function c(e,t,o,s=!1){e.addEventListener(t,c,s);let a=()=>void e.removeEventListener(t,c,s);return()=>void(a=a()||i.noop);function c(e){return n.currentTarget in e&&!e[n.currentTarget]?r.undefined:e[n.currentTarget]=e.currentTarget,o(e)}}n.currentTarget=Symbol.for("currentTarget"),n.listen=function(e,t,n,r=!1,o={}){return"string"==typeof n?a(e,t,n,r,o):c(e,t,n,r)},n.once=s,n.wait=function(e,t,n=!1,r={}){return new o.AtomicPromise(o=>"string"==typeof n?s(e,t,n,o,r):s(e,t,o,n))},n.delegate=a,n.bind=c},{"spica/global":19,"spica/noop":81,"spica/promise":83}],99:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.apply=void 0;const r=e("./dom");n.apply=function(e,t,n){const o=e.querySelectorAll(t);for(let e=0,t=o.length;e<t;++e)r.define(o[e],n);return o}},{"./dom":97}],100:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./layer/interface/service/gui");Object.defineProperty(n,"Pjax",{enumerable:!0,get:function(){return r.GUI}}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.GUI}});var o=e("./lib/router");Object.defineProperty(n,"router",{enumerable:!0,get:function(){return o.router}})},{"./layer/interface/service/gui":129,"./lib/router":139}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.route=void 0;const r=e("../domain/router/api");var o=e("../domain/event/router");Object.defineProperty(n,"RouterEvent",{enumerable:!0,get:function(){return o.RouterEvent}}),Object.defineProperty(n,"RouterEventType",{enumerable:!0,get:function(){return o.RouterEventType}}),Object.defineProperty(n,"RouterEventSource",{enumerable:!0,get:function(){return o.RouterEventSource}});var i=e("../domain/data/config");Object.defineProperty(n,"Config",{enumerable:!0,get:function(){return i.Config}}),Object.defineProperty(n,"scope",{enumerable:!0,get:function(){return i.scope}}),n.route=function(e,t,n,o){return r.route(new r.RouterEntity(e,t,new r.RouterEntityState(n.process,n.scripts)),o)}},{"../domain/data/config":104,"../domain/event/router":106,"../domain/router/api":107}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../domain/store/path");Object.defineProperty(n,"loadTitle",{enumerable:!0,get:function(){return r.loadTitle}}),Object.defineProperty(n,"savePosition",{enumerable:!0,get:function(){return r.savePosition}})},{"../domain/store/path":123}],103:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.savePosition=n.loadPosition=n.saveTitle=n.loadTitle=void 0;const r=e("spica/assign");function o(){window.history.replaceState(r.extend(window.history.state||{},{title:document.title}),document.title)}function i(){window.history.replaceState(r.extend(window.history.state||{},{position:{top:window.pageYOffset,left:window.pageXOffset}}),document.title)}o(),i(),n.loadTitle=function(){return window.history.state&&window.history.state.title||document.title},n.saveTitle=o,n.loadPosition=function(){return window.history.state&&window.history.state.position||{top:window.pageYOffset,left:window.pageXOffset}},n.savePosition=i},{"spica/assign":6}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Config=void 0;const r=e("spica/assign");var o=e("./config/scope");Object.defineProperty(n,"scope",{enumerable:!0,get:function(){return o.scope}});n.Config=class{constructor(e){this.areas=["body"],this.link="a",this.form="form:not([method])",this.replace="",this.fetch={rewrite:e=>e,cache:(e,t)=>"",headers:new Headers,timeout:3e3,wait:0},this.update={rewrite:(e,t)=>void 0,head:"base, meta, link",css:!0,script:!0,ignore:"",ignores:{extension:'[href^="chrome-extension://"]',security:'[src*=".scr.kaspersky-labs.com/"]'},reload:"",logger:""},this.sequence=new i,this.progressbar="display:none;position:absolute;bottom:0;left:0;width:0;height:2px;background:rgb(40, 105, 255);",this.scope={},Object.defineProperties(this.update,{ignore:{enumerable:!1,set(e){this.ignores._=e},get(){return Object.keys(this.ignores).map(e=>this.ignores[e]).filter(e=>e.trim().length>0).join(",")}}}),r.extend(this,e),this.fetch.headers=new Headers(this.fetch.headers),Object.freeze(this),this.fetch.headers.set("X-Requested-With","XMLHttpRequest"),this.fetch.headers.set("X-Pjax","1")}filter(e){return e.matches(":not([target])")}fallback(e,t){if(e instanceof HTMLAnchorElement)window.location.assign(e.href);else if(e instanceof HTMLFormElement)window.location.assign(e.action);else{if(!(e instanceof Window))throw t;window.location.reload(!0)}}};class i{async fetch(){return"fetch"}async unload(){return"unload"}async content(){return"content"}async ready(){return"ready"}async load(){}}},{"./config/scope":105,"spica/assign":6}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scope=void 0;const r=e("../../../../lib/router"),o=e("../../../domain/data/config"),i=e("spica/sequence"),s=e("spica/maybe"),a=e("spica/assign");n.scope=function(e,t){const n={"/":{},...e.scope};return i.Sequence.from(Object.keys(n).sort().reverse()).dropWhile(e=>!r.compare(e,t.orig)&&!r.compare(e,t.dest)).take(1).filter(e=>!!r.compare(e,t.orig)&&r.compare(e,t.dest)).map(e=>n[e]).map(t=>t?s.Just(new o.Config(a.extend({},e,t))):s.Nothing).extract().reduce((e,t)=>t,s.Nothing)}},{"../../../../lib/router":139,"../../../domain/data/config":104,"spica/assign":6,"spica/maybe":23,"spica/sequence":84}],106:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RouterEventLocation=n.RouterEventRequest=n.RouterEventMethod=n.RouterEventType=n.RouterEventSource=n.RouterEvent=void 0;const r=e("../../../lib/dom"),o=e("spica/url"),i=e("typed-dom");var s,a;n.RouterEvent=class{constructor(e){this.original=e,this.type=this.original.type.toLowerCase(),this.source=this.original[i.currentTarget],this.request=new c(this.source),this.location=new u(this.request.url),Object.freeze(this)}},function(e){e.Anchor=HTMLAnchorElement,e.Form=HTMLFormElement,e.Window=window.Window}(s=n.RouterEventSource||(n.RouterEventSource={})),function(e){e.click="click",e.submit="submit",e.popstate="popstate"}(n.RouterEventType||(n.RouterEventType={})),function(e){e.GET="GET",e.POST="POST"}(a=n.RouterEventMethod||(n.RouterEventMethod={}));class c{constructor(e){this.source=e,this.method=(()=>{if(this.source instanceof s.Anchor)return a.GET;if(this.source instanceof s.Form)return this.source.method.toUpperCase()===a.POST?a.POST:a.GET;if(this.source instanceof s.Window)return a.GET;throw new TypeError})(),this.url=(()=>{if(this.source instanceof s.Anchor)return new o.URL(o.standardize(this.source.href));if(this.source instanceof s.Form)return this.source.method.toUpperCase()===a.GET?new o.URL(o.standardize(this.source.action.split(/[?#]/)[0]+`?${r.serialize(this.source)}`)):new o.URL(o.standardize(this.source.action.split(/[?#]/)[0]));if(this.source instanceof s.Window)return new o.URL(o.standardize(window.location.href));throw new TypeError})(),this.body=(()=>this.source instanceof s.Form&&this.method===a.POST?new FormData(this.source):null)(),Object.freeze(this)}}n.RouterEventRequest=c;class u{constructor(e){this.dest=e,this.orig=new o.URL(o.standardize(window.location.href)),Object.freeze(this)}}n.RouterEventLocation=u},{"../../../lib/dom":136,"spica/url":90,"typed-dom":93}],107:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.route=void 0;const r=e("./module/fetch"),o=e("./module/update"),i=e("./module/update/content"),s=e("../store/path"),a=e("spica/either");var c=e("./model/eav/entity");Object.defineProperty(n,"RouterEntity",{enumerable:!0,get:function(){return c.RouterEntity}}),Object.defineProperty(n,"RouterEntityState",{enumerable:!0,get:function(){return c.RouterEntityState}}),n.route=async function(e,t){return a.Right(void 0).bind(e.state.process.either).bind(()=>!function(e,t){return i.separate({src:e,dst:e},t).extract(()=>!1,()=>!0)}(t.document,e.config.areas)?a.Left(new Error("Failed to match areas.")):a.Right(void 0)).fmap(()=>r.fetch(e.event.request,e.config,e.state.process)).fmap(async n=>(await n).fmap(([n,r])=>o.update(e,n,r,{document:t.document,position:s.loadPosition})).extract(a.Left)).extract(a.Left)}},{"../store/path":123,"./model/eav/entity":108,"./module/fetch":110,"./module/update":112,"./module/update/content":114,"spica/either":15}],108:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RouterEntityState=n.RouterEntity=void 0;n.RouterEntity=class{constructor(e,t,n){this.config=e,this.event=t,this.state=n,Object.freeze(this)}};n.RouterEntityState=class{constructor(e,t){this.process=e,this.scripts=t,Object.freeze(this)}}},{}],109:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FetchResponse=void 0;const r=e("../../../../../../lib/html"),o=e("spica/url");n.FetchResponse=class{constructor(e,t){if(this.url=e,this.xhr=t,this.header=e=>this.xhr.getResponseHeader(e),this.document="document"===this.xhr.responseType?this.xhr.responseXML.cloneNode(!0):r.parse(this.xhr.responseText).extract(),e.origin!==new o.URL(t.responseURL).origin)throw new Error("Redirected to another origin.");Object.defineProperty(this.document,"URL",{configurable:!0,enumerable:!0,value:e.reference,writable:!1}),r.fix(this.document),Object.freeze(this)}}},{"../../../../../../lib/html":138,"spica/url":90}],110:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fetch=void 0;const r=e("../module/fetch/xhr"),o=e("spica/clock");n.fetch=async function({method:e,url:t,body:n},{fetch:{rewrite:i,cache:s,headers:a,timeout:c,wait:u},sequence:l},d){window.dispatchEvent(new Event("pjax:fetch"));const[f,p]=await Promise.all([l.fetch(void 0,{path:t.path,method:e,headers:a,body:n}),r.xhr(e,t,a,n,c,i,s,d),o.wait(u)]);return p.bind(d.either).fmap(e=>[e,f])}},{"../module/fetch/xhr":111,"spica/clock":11}],111:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.match_=n.xhr=void 0;const r=e("../../model/eav/value/fetch"),o=e("spica/promise"),i=e("spica/sequence"),s=e("spica/either"),a=e("spica/cache"),c=e("spica/url"),u=new a.Cache(99),l=new a.Cache(99);function d(e,t){return i.Sequence.intersect(i.Sequence.from(n(e||"").sort()),i.Sequence.from(n(t).sort()),(e,t)=>e.localeCompare(t)).take(1).extract().length>0;function n(e){return e.split(/\s*;\s*/).filter(e=>e.length>0)}}n.xhr=function(e,t,n,i,a,f,p,h){(n=new Headers(n)).set("Accept",n.get("Accept")||"text/html");const m=new c.URL(c.standardize(f(t.path)));"GET"===e&&l.has(m.path)&&Date.now()>l.get(m.path).expiry&&n.set("If-None-Match",n.get("If-None-Match")||l.get(m.path).etag);const v="GET"===e&&p(m.path,n)||void 0;return new o.AtomicPromise(o=>{if(v&&u.has(v))return o(s.Right(u.get(v)(t,m)));const f=new XMLHttpRequest;f.open(e,m.path,!0);for(const[e,t]of n)f.setRequestHeader(e,t);f.responseType=window.navigator.userAgent.includes("Edge")?"text":"document",f.timeout=a,f.send(i),f.addEventListener("abort",()=>void o(s.Left(new Error("Failed to request a page by abort.")))),f.addEventListener("error",()=>void o(s.Left(new Error("Failed to request a page by error.")))),f.addEventListener("timeout",()=>void o(s.Left(new Error("Failed to request a page by timeout.")))),f.addEventListener("load",()=>void function(e,t){return s.Right(e).bind(e=>{const n=new c.URL(c.standardize(e.responseURL));switch(!0){case!e.responseURL:return s.Left(new Error("Failed to get the response URL."));case n.origin!==new c.URL(window.location.origin).origin:return s.Left(new Error("Redirected to another origin."));case!/2..|304/.test(`${e.status}`):return s.Left(new Error("Failed to validate the status of response."));case!e.response:return"GET"===t&&304===e.status&&l.has(n.path)?s.Right(l.get(n.path).xhr):s.Left(new Error("Failed to get the response body."));case!d(e.getResponseHeader("Content-Type"),"text/html"):return s.Left(new Error("Failed to validate the content type of response."));default:return s.Right(e)}})}(f,e).fmap(t=>{const n=new c.URL(c.standardize(t.responseURL));if("GET"===e){const e=new Map(t.getResponseHeader("Cache-Control")?t.getResponseHeader("Cache-Control").trim().split(/\s*,\s*/).filter(e=>e.length>0).map(e=>e.split("=").concat("")):[]);for(const r of new Set([m.path,n.path]))t.getResponseHeader("ETag")&&!e.has("no-store")?l.set(r,{etag:t.getResponseHeader("ETag"),expiry:e.has("max-age")&&!e.has("no-cache")&&Date.now()+1e3*+e.get("max-age")||0,xhr:t}):l.delete(r)}return(e,o)=>new r.FetchResponse(n.path===o.path?e:o.path!==m.path&&v?e:n,t)}).fmap(e=>(v&&u.set(v,e),e(t,m))).extract(e=>void o(s.Left(e)),e=>void o(s.Right(e)))),h.register(()=>void f.abort())})},n.match_=d},{"../../model/eav/value/fetch":109,"spica/cache":7,"spica/either":15,"spica/promise":83,"spica/sequence":84,"spica/url":90}],112:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.update=void 0;const r=e("../../event/router"),o=e("../module/update/blur"),i=e("../module/update/url"),s=e("../module/update/title"),a=e("../module/update/head"),c=e("../module/update/content"),u=e("../module/update/css"),l=e("../module/update/script"),d=e("../module/update/focus"),f=e("../module/update/scroll"),p=e("../../store/path"),h=e("spica/promise"),m=e("spica/either"),v=e("spica/hlist");n.update=function({event:e,config:t,state:n},y,g,b){const{process:w}=n,_={src:y.document,dst:b.document};return h.AtomicPromise.resolve(g).then(w.either).then(e=>e.bind(()=>c.separate(_,t.areas).extract(()=>m.Left(new Error("Failed to separate the areas.")),()=>e)).fmap(e=>(window.dispatchEvent(new Event("pjax:unload")),t.sequence.unload(e,{...y,url:y.url.reference})))).then(e=>m.Either.sequence(e)).then(w.promise).then(e=>e.bind(e=>c.separate(_,t.areas).fmap(([t])=>[e,t]).extract(()=>m.Left(new Error("Failed to separate the areas.")),w.either)).bind(([e,n])=>(t.update.rewrite(_.src,n),c.separate(_,t.areas).fmap(([,t])=>[e,t]).extract(()=>m.Left(new Error("Failed to separate the areas.")),w.either)))).then(w.promise).then(g=>g.fmap(([g,x])=>v.HList().unfold(()=>(o.blur(_.dst),i.url(new r.RouterEventLocation(y.url),_.src.title,e.type,e.source,t.replace),s.title(_),p.saveTitle(),a.head(_,t.update.head,t.update.ignore),w.either(c.content(_,x)).fmap(([e,t])=>[e,h.AtomicPromise.all(t)]))).unfold(async r=>(await r).fmap(async([r])=>{t.update.css&&u.css(_,t.update.ignore),b.document.dispatchEvent(new Event("pjax:content"));const o=await t.sequence.content(g,r),i=t.update.script?await l.script(_,n.scripts,t.update,10*Math.max(t.fetch.timeout,1e3),w):await w.either([[],h.AtomicPromise.resolve(w.either([]))]);return d.focus(e.type,_.dst),f.scroll(e.type,_.dst,{hash:e.location.dest.fragment,position:b.position}),p.savePosition(),b.document.dispatchEvent(new Event("pjax:ready")),[i.fmap(([e,t])=>[e,t.then(e=>e.extract())]),await t.sequence.ready(o)]}).fmap(e=>e.then(([e,t])=>e.fmap(e=>[e,t]))).extract(e=>h.AtomicPromise.resolve(m.Left(e)))).reverse())).then(w.promise).then(e=>e.fmap(([e,n])=>(h.AtomicPromise.all([e,n]).then(([e,n])=>e.bind(([,e])=>n.fmap(([[,n],r])=>void h.AtomicPromise.all([e,n]).then(w.either).then(e=>e.fmap(([e])=>(window.dispatchEvent(new Event("pjax:load")),void t.sequence.load(r,e))).extract(()=>void 0)))).extract(()=>void 0)),n))).then(e=>m.Either.sequence(e).then(e=>e.join())).then(e=>e.fmap(([e])=>e))}},{"../../event/router":106,"../../store/path":123,"../module/update/blur":113,"../module/update/content":114,"../module/update/css":115,"../module/update/focus":116,"../module/update/head":117,"../module/update/script":118,"../module/update/scroll":119,"../module/update/title":121,"../module/update/url":122,"spica/either":15,"spica/hlist":21,"spica/promise":83}],113:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.blur=void 0,n.blur=function(e){e===window.document&&e.activeElement!==e.body&&(e.activeElement.blur(),e.body.focus())}},{}],114:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n._wait=n._split=n.separate=n.content=void 0;const r=e("./script"),o=e("spica/promise"),i=e("spica/maybe"),s=e("spica/array"),a=e("typed-dom");function c(e){return(e.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g)||[]).map(e=>e.trim()).reduce((e,t)=>t?e.fmap(e=>s.push(e,[t])):i.Nothing,i.Just([]))}function u(e){return o.AtomicPromise.race([new o.AtomicPromise(t=>void a.once(e,"load",t)),new o.AtomicPromise(t=>void a.once(e,"abort",t)),new o.AtomicPromise(t=>void a.once(e,"error",t))])}n.content=function(e,t,n={replace:(e,t)=>void t.parentNode.replaceChild(e,t)}){return[t.map(e=>e.dst).reduce(s.push,[]),t.map((function(t){return t.src.map((n,r)=>({src:e.dst.importNode(t.src[r].cloneNode(!0),!0),dst:t.dst[r]})).map(e=>(!function(e){const t=[...a.apply(e.src,"script")].map(r.escape).reduce((e,t)=>()=>(e(),void t()),()=>void 0);n.replace(e.src,e.dst),t()}(e),[...a.apply(e.src,"img, iframe, frame")].map(u))).reduce(s.push,[])})).reduce(s.push,[])]},n.separate=function(e,t){return t.reduce((t,n)=>i.Maybe.mplus(t,function(e,t){return c(t).bind(t=>t.reduce((t,n)=>t.bind(t=>{const r={src:[...a.apply(e.src,n)],dst:[...a.apply(e.dst,n)]};return r.src.length>0&&r.src.length===r.dst.length?i.Just(s.push(t,[r])):i.Nothing}),i.Just([])))}(e,n).fmap(e=>[n,e])),i.Nothing)},n._split=c,n._wait=u},{"./script":118,"spica/array":5,"spica/maybe":23,"spica/promise":83,"typed-dom":93}],115:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.css=void 0;const r=e("./sync"),o=e("typed-dom");n.css=function(e,t){const n='link[rel~="stylesheet"], style';return void["head","body"].map(t=>[e.src.querySelector(t),e.dst.querySelector(t)]).forEach(([e,t])=>void r.sync(r.pair(i(e),i(t),(e,t)=>e.outerHTML===t.outerHTML),t));function i(e){return[...o.apply(e,n)].filter(e=>!t||!e.matches(t))}}},{"./sync":120,"typed-dom":93}],116:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.focus=void 0;const r=e("../../../event/router"),o=e("typed-dom");n.focus=function(e,t){switch(e){case r.RouterEventType.click:case r.RouterEventType.submit:return void[...o.apply(t,"[autofocus]")].slice(-1).filter(e=>e.closest("html")===window.document.documentElement&&e!==t.activeElement).forEach(e=>void e.focus());case r.RouterEventType.popstate:return;default:throw new TypeError(e)}}},{"../../../event/router":106,"typed-dom":93}],117:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.head=void 0;const r=e("./sync"),o=e("typed-dom");n.head=function(e,t,n){return n+=t.includes("link")?', link[rel~="stylesheet"]':"",void r.sync(r.pair(i(e.src.head),i(e.dst.head),(e,t)=>e.outerHTML===t.outerHTML),e.dst.head);function i(e){return[...o.apply(e,t)].filter(e=>!n||!e.matches(n))}}},{"./sync":120,"typed-dom":93}],118:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.escape=n._evaluate=n._fetch=n.script=void 0;const s=e("../../../../../lib/error"),a=e("spica/promise"),c=e("spica/either"),u=e("spica/url"),l=e("spica/array"),d=e("spica/tuple"),f=e("spica/clock"),p=e("typed-dom");async function h(e,t){return e.hasAttribute("src")?"module"===e.type.toLowerCase()?c.Right([e,""]):a.AtomicPromise.race([window.fetch(e.src,{headers:new Headers({Accept:"application/javascript"}),integrity:e.integrity}),f.wait(t).then(()=>a.AtomicPromise.reject(new Error(`${e.src}: Timeout.`)))]).then(async t=>t.ok?c.Right([e,await t.text()]):e.matches("[src][async]")?y(e).then(()=>c.Right([e,""]),()=>c.Left(new Error(`${e.src}: ${t.statusText}`))):c.Left(new Error(t.statusText)),e=>c.Left(e)):c.Right([e,e.text])}function m(t,n,r,o,l,d){const f=!!(t=t.ownerDocument===document?t:document.importNode(t.cloneNode(!0),!0)).parentElement&&t.parentElement.matches(r.trim()||"_"),p=document.querySelector(f?t.parentElement.id?`#${t.parentElement.id}`:t.parentElement.tagName:"_")||document.body,h=v(t);p.appendChild(t),h(),!f&&t.remove();const m=a.AtomicPromise.resolve(l).then((function(){if(!d.alive)throw new s.FatalError("Expired.");if(t.matches('[type="module"][src]'))return a.AtomicPromise.resolve(Promise.resolve().then(()=>i(e(t.src)))).catch(e=>e.message.startsWith("Failed to load ")&&t.matches("[src][async]")?y(t).catch(()=>a.AtomicPromise.reject(e)):a.AtomicPromise.reject(e)).then(()=>(t.dispatchEvent(new Event("load")),c.Right(t)),e=>(t.dispatchEvent(new Event("error")),c.Left(new s.FatalError(e instanceof Error?e.message:e+""))));try{if(o.has(new u.URL(u.standardize(window.location.href)).reference))throw new s.FatalError("Expired.");return(0,eval)(n),t.hasAttribute("src")&&t.dispatchEvent(new Event("load")),a.AtomicPromise.resolve(c.Right(t))}catch(e){return t.hasAttribute("src")&&t.dispatchEvent(new Event("error")),a.AtomicPromise.resolve(c.Left(new s.FatalError(e instanceof Error?e.message:e+"")))}}));return t.matches("[src][async]")?c.Right(m):c.Left(m)}function v(e){const t=e.hasAttribute("src")?e.getAttribute("src"):null,n=e.text;return e.removeAttribute("src"),e.text="",()=>(e.text=" ",e.text=n,"string"==typeof t?void e.setAttribute("src",t):void 0)}function y(e){return new u.URL(u.standardize(e.src)).origin===new u.URL(u.standardize(window.location.href)).origin?a.AtomicPromise.reject(new Error):(e=p.html("script",Object.values(e.attributes).reduce((e,{name:t,value:n})=>(e[t]=n,e),{}),[...e.childNodes]),new a.AtomicPromise((t,n)=>(e.addEventListener("load",()=>void t()),e.addEventListener("error",n),document.body.appendChild(e),void e.remove())))}n.script=function(e,t,n,r,o,i={fetch:h,evaluate:m}){const s=[...p.apply(e.src,"script")].filter(e=>!e.type||/(?:application|text)\/(?:java|ecma)script|module/i.test(e.type)).filter(e=>!e.matches(n.ignore.trim()||"_")).filter(e=>!e.hasAttribute("src")||(!t.has(new u.URL(u.standardize(e.src)).reference)||e.matches(n.reload.trim()||"_"))),{ss:f,as:v}=s.reduce((e,t)=>{switch(!0){case t.matches("[src][async], [src][defer]"):e.as.push(t);break;default:e.ss.push(t)}return e},{ss:[],as:[]});return a.AtomicPromise.all([a.AtomicPromise.all(y(f)).then(g),a.AtomicPromise.all(y(v)).then(g)]).then(async([e,t])=>e.fmap(async e=>(await e).fmap(([e,n])=>[e,n.then(async e=>t.fmap(async t=>(await t).fmap(([t,n])=>a.AtomicPromise.all([e,c.Right(t),n]).then(e=>e.reduce((e,t)=>e.bind(e=>t.fmap(t=>l.push(e,t)))))).extract(c.Left)).extract(c.Left))])).extract(c.Left));function y(e){return e.map(e=>i.fetch(e,r))}function g(e){return e.reduce((e,t)=>t.bind(()=>e),e.reduce((e,r)=>e.bind(o.either).bind(([e,s])=>r.fmap(([r,s])=>i.evaluate(r,s,n.logger,t,a.AtomicPromise.all(e),o)).bind(t=>t.extract(t=>c.Right(d.tuple(l.push(e,[t]),s)),t=>c.Right(d.tuple(e,l.push(s,[t])))))),c.Right([[],[]]))).fmap(([e,t])=>a.AtomicPromise.all(e).then(e=>c.Either.sequence(e)).then(e=>e.fmap(e=>d.tuple(e,Promise.all(t).then(e=>c.Either.sequence(e))))))}},n._fetch=h,n._evaluate=m,n.escape=v},{"../../../../../lib/error":137,"spica/array":5,"spica/clock":11,"spica/either":15,"spica/promise":83,"spica/tuple":88,"spica/url":90,"typed-dom":93}],119:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n._hash=n.scroll=void 0;const r=e("../../../event/router");function o(e,t,n={scrollToElement:e=>void e.scrollIntoView()}){const r=t.slice(1);if(0===r.length)return!1;const o=e.getElementById(r)||e.getElementsByName(r)[0];return!!o&&(n.scrollToElement(o),!0)}n.scroll=function(e,t,n,i={scrollToElement:e=>void e.scrollIntoView(),scrollToPosition:({top:e,left:t})=>void window.scrollTo(t,e),hash:o}){switch(e){case r.RouterEventType.click:if(i.hash(t,n.hash,i))return;return void i.scrollToPosition({top:0,left:0});case r.RouterEventType.submit:return void i.scrollToPosition({top:0,left:0});case r.RouterEventType.popstate:return void i.scrollToPosition(n.position());default:throw new TypeError(e)}},n._hash=o},{"../../../event/router":106}],120:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.pair=n.sync=void 0;const r=e("spica/either"),o=e("spica/array");function i(e,t,n){t.map(t=>e.ownerDocument.importNode(t.cloneNode(!0),!0)).forEach(t=>void e.insertBefore(t,n))}function s(e){e.remove()}n.sync=function(e,t,n={before:i,remove:s}){return void e.forEach(([e,r])=>(n.before(function(e){return e?e.parentElement:t}(r),e.slice(-1).some(e=>!!r&&e.outerHTML===r.outerHTML)?e.slice(0,-1):e,r),r&&0===e.length?void n.remove(r):void 0))},n.pair=function(e,t,n){const i=function(e,t,n){return e.reduce((e,i)=>0===t.length?e.set(null,o.push(e.get(null)||[],[i])):t.reduce((e,t)=>e.bind(e=>!e.has(t)&&n(i,t)?(e.set(t,o.push(e.get(null)||[],[i])),e.delete(null),r.Left(e)):r.Right(e)),r.Right(e)).fmap(e=>e.set(null,o.push(e.get(null)||[],[i]))).extract(e=>e),new Map)}(e,t,n);return t.filter(e=>!i.has(e)).forEach(e=>void i.set(e,[])),[...i].map(([e,t])=>[t,e])}},{"spica/array":5,"spica/either":15}],121:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.title=void 0,n.title=function(e){e.dst.title=e.src.title}},{}],122:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n._isReplaceable=n._isRegisterable=n.url=void 0;const r=e("../../../event/router");function o(e,t){if(t.dest.reference===t.orig.reference)return!1;switch(e){case r.RouterEventType.click:case r.RouterEventType.submit:return!0;case r.RouterEventType.popstate:return!1;default:throw new TypeError(e)}}function i(e,t,n){switch(e){case r.RouterEventType.click:case r.RouterEventType.submit:return t.matches(n.trim()||"_");case r.RouterEventType.popstate:return!1;default:throw new TypeError(e)}}e("typed-dom").bind(document,"pjax:ready",()=>void window.history.replaceState(window.history.state,window.document.title)),n.url=function(e,t,n,r,s){switch(!0){case i(n,r,s):return void window.history.replaceState({},t,e.dest.reference);case o(n,e):return void window.history.pushState({},t,e.dest.reference);default:return}},n._isRegisterable=o,n._isReplaceable=i},{"../../../event/router":106,"typed-dom":93}],123:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),o(e("../../data/store/state"),n)},{"../../data/store/state":103}],124:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ClickView=void 0;const r=e("spica/coroutine"),o=e("typed-dom");class i extends r.Coroutine{constructor(e,t,n){super(a((function*(){return this.finally(o.delegate(e,t,"click",e=>{e.currentTarget instanceof HTMLAnchorElement&&n(e)}))}))),this[r.Coroutine.init]()}}n.ClickView=i},{"spica/coroutine":13,"typed-dom":93}],125:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NavigationView=void 0;const r=e("../../service/state/url"),o=e("spica/coroutine"),i=e("spica/url"),s=e("typed-dom");class c extends o.Coroutine{constructor(e,t){super(a((function*(){return this.finally(s.bind(e,"popstate",n=>{i.standardize(e.location.href)!==r.docurl.href&&t(n)}))}))),this[o.Coroutine.init]()}}n.NavigationView=c},{"../../service/state/url":135,"spica/coroutine":13,"spica/url":90,"typed-dom":93}],126:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ScrollView=void 0;const r=e("../../service/state/url"),o=e("spica/coroutine"),i=e("spica/url"),s=e("spica/throttle"),c=e("typed-dom");class u extends o.Coroutine{constructor(e,t){super(a((function*(){return this.finally(c.bind(e,"scroll",s.debounce(100,n=>{i.standardize(e.location.href)===r.docurl.href&&t(n)}),{passive:!0}))}))),this[o.Coroutine.init]()}}n.ScrollView=u},{"../../service/state/url":135,"spica/coroutine":13,"spica/throttle":87,"spica/url":90,"typed-dom":93}],127:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SubmitView=void 0;const r=e("spica/coroutine"),o=e("typed-dom");class i extends r.Coroutine{constructor(e,t,n){super(a((function*(){return this.finally(o.delegate(e,t,"submit",e=>{e.currentTarget instanceof HTMLFormElement&&n(e)}))}))),this[r.Coroutine.init]()}}n.SubmitView=i},{"spica/coroutine":13,"typed-dom":93}],128:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.API=void 0;const r=e("./router"),o=e("./state/process"),i=e("../../../lib/html"),s=e("spica/assign"),a=e("typed-dom");function c(e,t){const n=document.createElement("a");n.href=e,i.parse("").extract().body.appendChild(n),a.once(n,"click",t),a.once(n,"click",e=>void e.preventDefault()),n.click()}n.API=class{static assign(e,t,n={document:window.document,router:r.route}){let i;return c(e,e=>i=n.router(new r.Config(t),new r.RouterEvent(e),o.process,n)),i}static replace(e,t,n={document:window.document,router:r.route}){let i;return c(e,e=>i=n.router(new r.Config(s.extend({},t,{replace:"*"})),new r.RouterEvent(e),o.process,n)),i}}},{"../../../lib/html":138,"./router":130,"./state/process":132,"spica/assign":6,"typed-dom":93}],129:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GUI=void 0;const r=e("./api"),o=e("../module/view/click"),i=e("../module/view/submit"),s=e("../module/view/navigation"),a=e("../module/view/scroll"),c=e("./router");e("./state/scroll-restoration");const u=e("./state/process"),l=e("../../application/store"),d=e("spica/supervisor"),f=e("spica/copropagator");let p=(()=>{class e extends r.API{constructor(t,n={document:window.document,router:c.route}){super(),this.option=t,this.io=n,this.view=new h(this.option,this.io),e.resources.clear(),e.resources.register("view",this.view)}assign(e){return r.API.assign(e,this.option,this.io)}replace(e){return r.API.replace(e,this.option,this.io)}}return e.resources=new class extends d.Supervisor{},e})();n.GUI=p;class h extends f.Copropagator{constructor(e,t){const n=new c.Config(e),r=e=>void t.router(n,new c.RouterEvent(e),u.process,t);super([new o.ClickView(t.document,n.link,r),new i.SubmitView(t.document,n.form,r),new s.NavigationView(window,r),new a.ScrollView(window,l.savePosition)])}}},{"../../application/store":102,"../module/view/click":124,"../module/view/navigation":125,"../module/view/scroll":126,"../module/view/submit":127,"./api":128,"./router":130,"./state/process":132,"./state/scroll-restoration":134,"spica/copropagator":12,"spica/supervisor":86}],130:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n._validate=n.route=n.RouterEventSource=n.RouterEvent=n.Config=void 0;const r=e("../../application/router");Object.defineProperty(n,"Config",{enumerable:!0,get:function(){return r.Config}}),Object.defineProperty(n,"RouterEvent",{enumerable:!0,get:function(){return r.RouterEvent}}),Object.defineProperty(n,"RouterEventSource",{enumerable:!0,get:function(){return r.RouterEventSource}});const o=e("./state/url"),i=e("../service/state/env"),s=e("../../../lib/error"),a=e("../../application/store"),c=e("spica/url"),u=e("spica/cancellation"),l=e("spica/maybe"),d=e("spica/clock");function f(e,t,n){if(n.original.defaultPrevented)return!1;switch(n.type){case r.RouterEventType.click:return s(e)&&(i=e,!(new c.URL(o.docurl.href).resource===i.resource&&""!==i.fragment))&&!p(e)&&!n.source.hasAttribute("download")&&!function(e){return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}(n.original)&&t.filter(n.source);case r.RouterEventType.submit:return s(e);case r.RouterEventType.popstate:return s(e)&&!p(e);default:return!1}var i;function s(e){return new c.URL(o.docurl.href).origin===e.origin}}function p(e){const t=new c.URL(o.docurl.href);return t.resource===e.resource&&t.fragment!==e.fragment}e("typed-dom").bind(window,"pjax:unload",()=>window.history.scrollRestoration="auto",!0),n.route=function(e,t,n,h){switch(t.type){case r.RouterEventType.click:case r.RouterEventType.submit:a.savePosition();break;case r.RouterEventType.popstate:h.document.title=a.loadTitle()}return l.Just(0).guard(f(t.request.url,e,t)).bind(()=>r.scope(e,(({orig:e,dest:t})=>({orig:e.pathname,dest:t.pathname}))(t.location))).fmap(async e=>{t.original.preventDefault(),n.cast("",new Error("Aborted."));const a=new u.Cancellation,l=n.register("",e=>(l(),a.cancel(e),d.never)),[f]=await i.env;return window.history.scrollRestoration="manual",r.route(e,t,{process:a,scripts:f},h).then(e=>e.fmap(async([e,t])=>(l(),o.docurl.sync(),e.filter(e=>e.hasAttribute("src")).forEach(e=>void f.add(new c.URL(c.standardize(e.src)).reference)),void(await t).filter(e=>e.hasAttribute("src")).forEach(e=>void f.add(new c.URL(c.standardize(e.src)).reference)))).extract()).catch(n=>(l(),o.docurl.sync(),window.history.scrollRestoration="auto",a.alive||n instanceof s.FatalError?void e.fallback(t.source,n):void 0))}).extract(()=>{switch(n.cast("",new Error("Aborted.")),t.type){case r.RouterEventType.click:case r.RouterEventType.submit:return o.docurl.sync(),!1;case r.RouterEventType.popstate:return p(t.location.dest)?(o.docurl.sync(),!1):(e.fallback(t.source,new Error("Disabled.")),o.docurl.sync(),!0)}},()=>!0)},n._validate=f},{"../../../lib/error":137,"../../application/router":101,"../../application/store":102,"../service/state/env":131,"./state/url":135,"spica/cancellation":8,"spica/clock":11,"spica/maybe":23,"spica/url":90,"typed-dom":93}],131:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.env=void 0;const r=e("./script");n.env=Promise.all([r.scripts,new Promise(e=>void setTimeout(e))])},{"./script":133}],132:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.process=void 0;const r=e("spica/supervisor");n.process=new class extends r.Supervisor{}},{"spica/supervisor":86}],133:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scripts=void 0;const r=e("spica/url"),o=e("typed-dom");n.scripts=new Set,o.bind(window,"pjax:unload",()=>void o.apply(document,"script[src]").forEach(e=>void n.scripts.add(new r.URL(r.standardize(e.src)).reference)))},{"spica/url":90,"typed-dom":93}],134:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("typed-dom").bind(window,"unload",()=>window.history.scrollRestoration="auto",!1)},{"typed-dom":93}],135:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.docurl=void 0;const r=e("spica/url");e("typed-dom").bind(window,"hashchange",()=>void n.docurl.sync()),n.docurl=new class{constructor(){this.url=r.standardize(window.location.href)}get href(){return this.url}sync(){this.url=r.standardize(window.location.href)}}},{"spica/url":90,"typed-dom":93}],136:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.serialize=void 0,n.serialize=function(e){return Array.from(e.elements).filter(e=>{if(e.disabled)return!1;switch(e.nodeName.toLowerCase()){case"input":switch(e.type.toLowerCase()){case"checkbox":case"radio":return e.checked;case"submit":case"button":case"image":case"reset":case"file":return!1;default:return!0}case"select":case"textarea":return!0;default:return!1}}).filter(e=>"string"==typeof e.name&&"string"==typeof e.value).map(e=>[encodeURIComponent(t(e.name)),encodeURIComponent(t(e.value))].join("=")).join("&");function t(e){return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[\uDC00-\uDFFF]/g,e=>2===e.length?e:"")}}},{}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FatalError=void 0;class r extends Error{constructor(e){super(e)}}n.FatalError=r,Error.prototype.name="Error",r.prototype.name="FatalError"},{}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n._fixNoscript=n.fix=n.parse=void 0;const r=e("spica/maybe"),o=e("spica/either"),i=e("typed-dom");function s(e){a(e).forEach(([e,t])=>e.textContent=t.textContent)}function a(e){return[...i.apply(e,"noscript")].filter(e=>e.children.length>0).map(e=>{const t=e.cloneNode(!0);return t.textContent=e.innerHTML,[e,t]})}n.parse=[function(e){const t=(new DOMParser).parseFromString(e,"text/html");return s(t),t},function(e){const t=window.document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),s(t),t}].reduce((e,t)=>e.bind(()=>!function(e){try{const t=e('\n<html lang="en" class="html">\n  <head>\n    <link href="/">\n    <title>&amp;</title>\n    <noscript><style>/**/</style></noscript>\n  </head>\n  <body>\n    <noscript>noscript</noscript>\n    <a href="/"></a>\n    <script>document.head.remove();<\/script>\n    <img src="abc">\n  </body>\n</html>\n');switch(!1){case"&"===t.title:case!!t.querySelector('html.html[lang="en"]'):case!!t.querySelector("head > link").href:case!!t.querySelector("body > a").href:case!t.querySelector("head > noscript > *"):case"document.head.remove();"===t.querySelector("script").innerHTML:case t.querySelector("img").src.endsWith("abc"):case"<style>/**/</style>"===t.querySelector("head > noscript").textContent:case"noscript"===t.querySelector("body > noscript").textContent:throw void 0}return!0}catch(e){return!1}}(t)?e:o.Left(t)),o.Right(()=>r.Nothing)).extract(e=>t=>r.Just(e(t))),n.fix=s,n._fixNoscript=a},{"spica/either":15,"spica/maybe":23,"typed-dom":93}],139:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n._match=n._expand=n.compare=n.router=void 0;const r=e("spica/url"),o=e("spica/sequence"),i=e("spica/curry"),s=e("spica/flip"),a=e("spica/memoize");function c(e,t){const n=/\/|[^/]+\/?/g,r=/\/$/;return o.Sequence.zip(o.Sequence.from(u(e)),o.Sequence.cycle([t])).map(([e,t])=>[e.match(n)||[],e.match(r)?t.match(n)||[]:t.replace(r,"").match(n)||[]]).filter(([e,t])=>e.length<=t.length&&0===o.Sequence.zip(o.Sequence.from(e),o.Sequence.from(t)).dropWhile(([e,t])=>l(e,t)).take(1).extract().length).take(1).extract().length>0}n.router=function(e){return t=>{const{path:n,pathname:a}=new r.URL(r.standardize(t));return o.Sequence.from(Object.keys(e).filter(e=>"/"===e[0]).sort().reverse()).filter(i.curry(s.flip(c))(a)).map(t=>e[t]).take(1).extract().pop().call(e,n)}},n.compare=c;const u=a.memoize(e=>{if(e.match(/\*\*|[\[\]]/))throw new Error(`Invalid pattern: ${e}`);return""===e?[e]:o.Sequence.from(e.match(/{[^{}]*}|.[^{]*/g)).map(e=>e.match(/^{[^{}]*}$/)?e.slice(1,-1).split(","):[e]).mapM(o.Sequence.from).map(e=>e.join("")).bind(t=>t===e?o.Sequence.from([t]):o.Sequence.from(u(t))).unique().extract()});n._expand=u;const l=a.memoize((e,t)=>{return("."!==t[0]||![..."?*"].includes(e[0]))&&function e(t,n){const[r="",...i]=[...t],[s="",...a]=[...n];switch(r){case"":return""===s;case"?":return""!==s&&"/"!==s&&e(i.join(""),a.join(""));case"*":return"/"===s?e(i.join(""),n):o.Sequence.zip(o.Sequence.cycle([i.join("")]),o.Sequence.from(n).tails().map(e=>e.join(""))).filter(([t,n])=>e(t,n)).take(1).extract().length>0;default:return s===r&&e(i.join(""),a.join(""))}}(function e(t){const n=t.replace(/\*(\?+)\*?/g,"$1*");return n===t?n:e(n)}(e),t)},(e,t)=>`${e} ${t}`);n._match=l},{"spica/curry":14,"spica/flip":17,"spica/memoize":24,"spica/sequence":84,"spica/url":90}],"pjax-api":[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./src/export");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i.default}}),o(e("./src/export"),n)},{"./src/export":100}]},{},[1,2,3,"pjax-api"]),"undefined"!=typeof self&&self,i=[],void 0===(s="function"==typeof(o=function(){return r("pjax-api")})?o.apply(t,i):o)||(e.exports=s)},function(e,t){!function(e,t){"use strict";if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var n=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},o.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(e,"resize",this._checkForIntersections,!0),i(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),n=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(o){var i=o.element,s=a(i),c=this._rootContainsTarget(i),u=o.entry,l=t&&c&&this._computeTargetAndRootIntersection(i,n),d=o.entry=new r({time:e.performance&&performance.now&&performance.now(),target:i,boundingClientRect:s,rootBounds:n,intersectionRect:l});u?t&&c?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(n,r){if("none"!=e.getComputedStyle(n).display){for(var o,i,s,c,l,d,f,p,h=a(n),m=u(n),v=!1;!v;){var y=null,g=1==m.nodeType?e.getComputedStyle(m):{};if("none"==g.display)return;if(m==this.root||m==t?(v=!0,y=r):m!=t.body&&m!=t.documentElement&&"visible"!=g.overflow&&(y=a(m)),y&&(o=y,i=h,s=void 0,c=void 0,l=void 0,d=void 0,f=void 0,p=void 0,s=Math.max(o.top,i.top),c=Math.min(o.bottom,i.bottom),l=Math.max(o.left,i.left),d=Math.min(o.right,i.right),p=c-s,!(h=(f=d-l)>=0&&p>=0&&{top:s,bottom:c,left:l,right:d,width:f,height:p})))break;m=u(m)}return h}},o.prototype._getRootRect=function(){var e;if(this.root)e=a(this.root);else{var n=t.documentElement,r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==n||i==r||i<n!=i<r)return!0}},o.prototype._rootIsInDom=function(){return!this.root||c(t,this.root)},o.prototype._rootContainsTarget=function(e){return c(this.root||t,e)},o.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},o.prototype._unregisterInstance=function(){var e=n.indexOf(this);-1!=e&&n.splice(e,1)},e.IntersectionObserver=o,e.IntersectionObserverEntry=r}function r(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function o(e,t){var n,r,o,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){n(),o=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function i(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function a(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(e,t){for(var n=t;n;){if(n==e)return!0;n=u(n)}return!1}function u(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}}(window,document)},function(e,t,n){var r,o;
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */!function(i,s){"use strict";r=[n(7)],void 0===(o=function(e){return function(e,t){var n=e.jQuery,r=e.console;function o(e,t){for(var n in t)e[n]=t[n];return e}var i=Array.prototype.slice;function s(e,t,a){if(!(this instanceof s))return new s(e,t,a);var c,u=e;("string"==typeof e&&(u=document.querySelectorAll(e)),u)?(this.elements=(c=u,Array.isArray(c)?c:"object"==typeof c&&"number"==typeof c.length?i.call(c):[c]),this.options=o({},this.options),"function"==typeof t?a=t:o(this.options,t),a&&this.on("always",a),this.getImages(),n&&(this.jqDeferred=new n.Deferred),setTimeout(this.check.bind(this))):r.error("Bad element for imagesLoaded "+(u||e))}s.prototype=Object.create(t.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&a[t]){for(var n=e.querySelectorAll("img"),r=0;r<n.length;r++){var o=n[r];this.addImage(o)}if("string"==typeof this.options.background){var i=e.querySelectorAll(this.options.background);for(r=0;r<i.length;r++){var s=i[r];this.addElementBackgroundImages(s)}}}};var a={1:!0,9:!0,11:!0};function c(e){this.img=e}function u(e,t){this.url=e,this.element=t,this.img=new Image}return s.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var n=/url\((['"])?(.*?)\1\)/gi,r=n.exec(t.backgroundImage);null!==r;){var o=r&&r[2];o&&this.addBackground(o,e),r=n.exec(t.backgroundImage)}},s.prototype.addImage=function(e){var t=new c(e);this.images.push(t)},s.prototype.addBackground=function(e,t){var n=new u(e,t);this.images.push(n)},s.prototype.check=function(){var e=this;function t(t,n,r){setTimeout((function(){e.progress(t,n,r)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(e){e.once("progress",t),e.check()})):this.complete()},s.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&r&&r.log("progress: "+n,e,t)},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},c.prototype=Object.create(t.prototype),c.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},c.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},c.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},c.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},c.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},u.prototype=Object.create(c.prototype),u.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},u.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},u.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},s.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((n=t).fn.imagesLoaded=function(e,t){return new s(this,e,t).jqDeferred.promise(n(this))})},s.makeJQueryPlugin(),s}(i,e)}.apply(t,r))||(e.exports=o)}("undefined"!=typeof window?window:this)},function(e,t,n){var r,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(r=function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},r=n[e]=n[e]||[];return-1==r.indexOf(t)&&r.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var r=n.indexOf(t);return-1!=r&&n.splice(r,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var r=this._onceEvents&&this._onceEvents[e],o=0;o<n.length;o++){var i=n[o];r&&r[i]&&(this.off(e,i),delete r[i]),i.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?r.call(t,n,t,e):r)||(e.exports=o)},function(e,t,n){const r=n(9).EventEmitter,o=n(10),i="https://www.youtube.com/iframe_api",s={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"cued"},a={INVALID_PARAM:2,HTML5_ERROR:5,NOT_FOUND:100,UNPLAYABLE_1:101,UNPLAYABLE_2:150},c=[];e.exports=class extends r{constructor(e,t){super();const n="string"==typeof e?document.querySelector(e):e;n.id?this._id=n.id:this._id=n.id="ytplayer-"+Math.random().toString(16).slice(2,8),this._opts=Object.assign({width:640,height:360,autoplay:!1,captions:void 0,controls:!0,keyboard:!0,fullscreen:!0,annotations:!0,modestBranding:!1,related:!0,timeupdateFrequency:1e3,playsInline:!0},t),this.videoId=null,this.destroyed=!1,this._api=null,this._autoplay=!1,this._player=null,this._ready=!1,this._queue=[],this._interval=null,this._startInterval=this._startInterval.bind(this),this._stopInterval=this._stopInterval.bind(this),this.on("playing",this._startInterval),this.on("unstarted",this._stopInterval),this.on("ended",this._stopInterval),this.on("paused",this._stopInterval),this.on("buffering",this._stopInterval),this._loadIframeAPI((e,t)=>{if(e)return this._destroy(new Error("YouTube Iframe API failed to load"));this._api=t,this.videoId&&this.load(this.videoId,this._autoplay)})}load(e,t=!1){this.destroyed||(this.videoId=e,this._autoplay=t,this._api&&(this._player?this._ready&&(t?this._player.loadVideoById(e):this._player.cueVideoById(e)):this._createPlayer(e)))}play(){this._ready?this._player.playVideo():this._queueCommand("play")}pause(){this._ready?this._player.pauseVideo():this._queueCommand("pause")}stop(){this._ready?this._player.stopVideo():this._queueCommand("stop")}seek(e){this._ready?this._player.seekTo(e,!0):this._queueCommand("seek",e)}setVolume(e){this._ready?this._player.setVolume(e):this._queueCommand("setVolume",e)}getVolume(){return this._ready&&this._player.getVolume()||0}mute(){this._ready?this._player.mute():this._queueCommand("mute")}unMute(){this._ready?this._player.unMute():this._queueCommand("unMute")}isMuted(){return this._ready&&this._player.isMuted()||!1}setSize(e,t){this._ready?this._player.setSize(e,t):this._queueCommand("setSize",e,t)}setPlaybackRate(e){this._ready?this._player.setPlaybackRate(e):this._queueCommand("setPlaybackRate",e)}setPlaybackQuality(e){this._ready?this._player.setPlaybackQuality(e):this._queueCommand("setPlaybackQuality",e)}getPlaybackRate(){return this._ready&&this._player.getPlaybackRate()||1}getAvailablePlaybackRates(){return this._ready&&this._player.getAvailablePlaybackRates()||[1]}getDuration(){return this._ready&&this._player.getDuration()||0}getProgress(){return this._ready&&this._player.getVideoLoadedFraction()||0}getState(){return this._ready&&s[this._player.getPlayerState()]||"unstarted"}getCurrentTime(){return this._ready&&this._player.getCurrentTime()||0}destroy(){this._destroy()}_destroy(e){this.destroyed||(this.destroyed=!0,this._player&&(this._player.stopVideo&&this._player.stopVideo(),this._player.destroy()),this.videoId=null,this._id=null,this._opts=null,this._api=null,this._player=null,this._ready=!1,this._queue=null,this._stopInterval(),this.removeListener("playing",this._startInterval),this.removeListener("paused",this._stopInterval),this.removeListener("buffering",this._stopInterval),this.removeListener("unstarted",this._stopInterval),this.removeListener("ended",this._stopInterval),e&&this.emit("error",e))}_queueCommand(e,...t){this.destroyed||this._queue.push([e,t])}_flushQueue(){for(;this._queue.length;){const e=this._queue.shift();this[e[0]].apply(this,e[1])}}_loadIframeAPI(e){if(window.YT&&"function"==typeof window.YT.Player)return e(null,window.YT);c.push(e),Array.from(document.getElementsByTagName("script")).some(e=>e.src===i)||o(i).catch(e=>{for(;c.length;){c.shift()(e)}}),"function"!=typeof window.onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=()=>{for(;c.length;){c.shift()(null,window.YT)}})}_createPlayer(e){if(this.destroyed)return;const t=this._opts;this._player=new this._api.Player(this._id,{width:t.width,height:t.height,videoId:e,playerVars:{autoplay:t.autoplay?1:0,cc_load_policy:null!=t.captions?!1!==t.captions?1:0:void 0,hl:null!=t.captions&&!1!==t.captions?t.captions:void 0,cc_lang_pref:null!=t.captions&&!1!==t.captions?t.captions:void 0,controls:t.controls?2:0,disablekb:t.keyboard?0:1,enablejsapi:1,fs:t.fullscreen?1:0,iv_load_policy:t.annotations?1:3,modestbranding:t.modestBranding?1:0,origin:window.location.origin,playsinline:t.playsInline?1:0,rel:t.related?1:0,wmode:"opaque"},events:{onReady:()=>this._onReady(e),onStateChange:e=>this._onStateChange(e),onPlaybackQualityChange:e=>this._onPlaybackQualityChange(e),onPlaybackRateChange:e=>this._onPlaybackRateChange(e),onError:e=>this._onError(e)}})}_onReady(e){this.destroyed||(this._ready=!0,this.load(this.videoId,this._autoplay),this._flushQueue())}_onStateChange(e){if(this.destroyed)return;const t=s[e.data];if(!t)throw new Error("Unrecognized state change: "+e);["paused","buffering","ended"].includes(t)&&this._onTimeupdate(),this.emit(t),["unstarted","playing","cued"].includes(t)&&this._onTimeupdate()}_onPlaybackQualityChange(e){this.destroyed||this.emit("playbackQualityChange",e.data)}_onPlaybackRateChange(e){this.destroyed||this.emit("playbackRateChange",e.data)}_onError(e){if(this.destroyed)return;const t=e.data;return t!==a.HTML5_ERROR?t===a.UNPLAYABLE_1||t===a.UNPLAYABLE_2||t===a.NOT_FOUND||t===a.INVALID_PARAM?this.emit("unplayable",this.videoId):void this._destroy(new Error("YouTube Player Error. Unknown error code: "+t)):void 0}_onTimeupdate(){this.emit("timeupdate",this.getCurrentTime())}_startInterval(){this._interval=setInterval(()=>this._onTimeupdate(),this._opts.timeupdateFrequency)}_stopInterval(){clearInterval(this._interval),this._interval=null}}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(i(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),s=(u=n.slice()).length,c=0;c<s;c++)u[c].apply(this,a);return!0},n.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(s=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function o(){this.removeListener(e,o),n||(n=!0,t.apply(this,arguments))}return o.listener=t,this.on(e,o),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){e.exports=function(e,t,n){return new Promise((r,o)=>{const i=document.createElement("script");i.async=!0,i.src=e;for(const[e,n]of Object.entries(t||{}))i.setAttribute(e,n);i.onload=()=>{i.onerror=i.onload=null,r(i)},i.onerror=()=>{i.onerror=i.onload=null,o(new Error(`Failed to load ${e}`))},(n||document.head||document.getElementsByTagName("head")[0]).appendChild(i)})}},function(e,t,n){"use strict";n.r(t);n(12);function r(e,t){for(let n=e;n;n=n.parentElement)if(n.classList.contains(t))return n}var o=n(1),i=n.n(o);n(5);const s=n(6);var a=n(2),c=n(3);function u(e){const t=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1;const r=function e(t,n){return t&&(n(t)?t:e(t.parentNode,n))}(t.target||t.srcElement,(function(e){return e.classList.contains("js-pswp-element")}));if(!r)return;const o=r.closest(e),i=o.getElementsByClassName("js-pswp-element"),s=i.length;let a=0,c="";for(let e=0;e<s;e++)if(1===i[e].nodeType){if(i[e]===r){c=a;break}a++}return c>=0&&n(c,o),!1},n=function(e,t,n,r){const o=document.querySelectorAll(".pswp")[0],i=function(e){const t=e.getElementsByClassName("js-pswp-element"),n=t.length;let r=[];for(let e=0;e<n;e++){const n=t[e];if(1!==n.nodeType)continue;const o=n.getElementsByClassName("js-pswp-open")[0],i=o.getAttribute("data-size").split("x"),s={src:o.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)};n.getElementsByClassName("js-pswp-caption")[0]&&(s.title=n.getElementsByClassName("js-pswp-caption")[0].innerHTML),o.getElementsByClassName("js-pswp-img")[0]&&(s.msrc=o.getElementsByClassName("js-pswp-img")[0].getAttribute("data-src")),s.el=n,r.push(s)}return r}(t),s={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:0,showAnimationDuration:0,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,galleryUID:t.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){const t=i[e].el.getElementsByClassName("js-pswp-img")[0],n=window.pageYOffset||document.documentElement.scrollTop,r=t.getBoundingClientRect();return{x:r.left,y:r.top+n,w:r.width}}};if(r)if(s.galleryPIDs){for(let t=0;t<i.length;t++)if(i[t].pid==e){s.index=t;break}}else s.index=parseInt(e,10)-1;else s.index=parseInt(e,10);isNaN(s.index)||(n&&(s.showAnimationDuration=0),new a(o,c,i,s).init())},r=document.querySelectorAll(e);for(let e=0,n=r.length;e<n;e++){r[e].setAttribute("data-pswp-uid",e+1);const n=r[e].getElementsByClassName("js-pswp-open");for(let e=0;e<n.length;e++)n[e].onclick=t}const o=function(){const e=window.location.hash.substring(1);let t={};if(e.length<5)return t;const n=e.split("&");for(let e=0;e<n.length;e++){if(!n[e])continue;const r=n[e].split("=");r.length<2||(t[r[0]]=r[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t}();o.pid&&o.gid&&n(o.pid,r[o.gid-1],!0,!0)}var l=n(0),d=n.n(l);function f(){const e=document.getElementById("grab"),t=document.getElementById("grab-circle"),n=document.getElementById("bar"),r=document.getElementById("main-1");let o=window.innerWidth,i="",s="";e.addEventListener("click",e=>{e.preventDefault()}),IS_TOUCH&&e.addEventListener("touchstart",e=>{e.preventDefault()});const a=e=>{i=1;let n=1;s=setInterval((function(){i=n/1e6+1.0001*i,t.style.transform=`scale(${i})`,n++}),1)},c=t=>{const o=t.target;e.classList.add("is-dragging"),o.style.left=`${t.page.x}px`,r.style.width=`${t.page.x}px`,n.style.left=`${t.page.x}px`,IS_TOUCH&&(o.style.top=`${t.client.y}px`);let i=0,s=0,a=0;const c=document.querySelector(".hidden-el-left");c&&(i=parseFloat(c.getAttribute("data-pos"))||0);const u=document.querySelector(".hidden-el-right");u&&(s=parseFloat(u.getAttribute("data-pos"))||0);const l=document.querySelector(".hidden-el-footer-left");l&&(a=parseFloat(l.getAttribute("data-pos"))||0),c&&(i>=t.page.x?c.classList.add("is-show"):c.classList.remove("is-show")),u&&(s<=t.page.x?u.classList.add("is-show"):u.classList.remove("is-show")),l&&(a>=t.page.x?l.classList.add("is-show"):l.classList.remove("is-show"))},u=i=>{const a=i.client.x;a<0?(e.style.left="0px",n.style.left="0px",r.style.width="0px"):o<a&&(e.style.left=`${o}px`,n.style.left=`${o}px`,r.style.width=`${o}px`),clearInterval(s),t.style.transform="scale(1)",e.classList.remove("is-dragging")},l=()=>{if(o=window.innerWidth,document.body.classList.add("is-grab-init"),IS_TOUCH){const t=window.innerHeight;e.style.top=`${t/2}px`}e.style.left=null,n.style.left=null,r.style.width=null,setTimeout((function(){document.body.classList.remove("is-grab-init")}),600)};if(IS_TOUCH?window.addEventListener("resize",()=>{o=window.innerWidth}):(document.addEventListener("pointermove",t=>{e.style.top=`${t.clientY}px`}),window.addEventListener("resize",l)),window.addEventListener("orientationchange",l),document.body.classList.contains("is-init")){const e=document.getElementById("flg").dataset.color;t.style.backgroundColor=e&&t?e:"#ffffff",l(),document.body.classList.add("is-grab-change"),setTimeout((function(){document.body.classList.remove("is-grab-change")}),1e3)}else{if(d()(e).draggable({autoScroll:!1,inertia:!1,listeners:{start(e){a(e)},move(e){c(e)},end(e){u(e)}}}),IS_TOUCH){const t=window.innerHeight;e.style.top=`${t/2}px`}else e.style.top=null;e.classList.add("is-show")}}var p=n(4);function h(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}function m(e){const t=window.getComputedStyle(e);return e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)}const v=n(8);const y=()=>{!function(){if(document.documentMode){var e=function(){var e,t=document.querySelectorAll("svg[viewBox]");if(t)for(var n,r,o,i,s=0,a=t.length;s<a;s++)n=t[s],/noFixSvgIntrinsicSizing/.test(n.className.baseVal)||(n.hasAttribute("preserveAspectRatio")&&/slice/.test(n.getAttribute("preserveAspectRatio"))&&(n.style.overflow="hidden"),o=window.getComputedStyle(n,"").width,i=window.getComputedStyle(n,"").height,n.style.width="",n.style.height="","150px"!==(r=window.getComputedStyle(n,"").height)?(n.style.width=o,n.style.height=i):(r=window.getComputedStyle(n,"").width,(o=1*/([0-9\.]+)px/.exec(r)[1])*(i=(e=(e=n.getAttribute("viewBox")).split(" "))&&e[3]/e[2])>document.documentElement.offsetHeight&&(n.style.height=o*i+"px",r=window.getComputedStyle(n,"").width,o=1*/([0-9\.]+)px/.exec(r)[1]),n.style.width=r,n.style.height=o*i+"px"))};document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("resize",e,!1)}}(),function(){const e=document.querySelectorAll("a, button, .hov");if(IS_TOUCH)for(let t=0;t<e.length;t++){const n=e[t];n.addEventListener("touchstart",(function(e){this.classList.add("hover");const t=r(n,"js-hover-parent");t&&t.classList.add("hover-parent")})),n.addEventListener("touchend",(function(e){this.classList.remove("hover");const t=r(n,"js-hover-parent");t&&t.classList.remove("hover-parent")}))}else for(let t=0;t<e.length;t++){const n=e[t];n.addEventListener("mouseenter",(function(e){this.classList.add("hover");const t=r(n,"js-hover-parent");t&&t.classList.add("hover-parent")})),n.addEventListener("mouseleave",(function(e){this.classList.remove("hover");const t=r(n,"js-hover-parent");t&&t.classList.remove("hover-parent")}))}}(),function(){const e=()=>{const e=document.querySelectorAll(".js-content-height-container");if(e){let t=new Array;for(let n=0;n<e.length;n++){const r=e[n].querySelectorAll(".js-content-height");for(let e=0;e<r.length;e++){const n=r[e];n.style.height="auto";const o=n.offsetHeight;t[e]?t[e]<o&&(t[e]=o):t[e]=o}}for(let n=0;n<e.length;n++){const r=e[n].querySelectorAll(".js-content-height");for(let e=0;e<r.length;e++){r[e].style.height=`${t[e]}px`}}}},t=()=>{setTimeout(()=>{const e=document.querySelector(".main-content-1"),t=document.querySelector(".main-content-2");if(e&&t){e.style.height="auto",t.style.height="auto";const n=e.offsetHeight,r=t.offsetHeight;let o="";o=n>r?n:r,e.style.height=`${o}px`,t.style.height=`${o}px`}},0)};e(),t(),window.addEventListener("resize",()=>{e(),t()}),window.addEventListener("orientationchange",()=>{e(),t()})}(),function(){const e=document.querySelector(".js-popup-video"),t=document.querySelector(".js-popup-video-canvas"),n=document.querySelector(".js-popup-video-element"),r=document.querySelectorAll(".js-popup-video-close"),o=document.querySelectorAll(".js-popup-youtube-trigger"),i=document.querySelectorAll(".js-popup-vimeo-trigger");let s="";if(o)for(let r=0;r<o.length;r++){const i=o[r];i.addEventListener("click",(function(r){document.body.classList.add("is-popup-video-active"),e.classList.add("is-youtube");const o=i.getAttribute("data-video-w"),a=i.getAttribute("data-video-h");o&a&&(t.setAttribute("width",o),t.setAttribute("height",a),o<=a&&e.classList.add("is-vertical"));const c=i.getAttribute("data-youtube-id");n.innerHTML+='<div class="js-popup-video-yt"></div>',s=new v(".js-popup-video-yt",{playsInline:!0,related:!1}),e.classList.add("is-active"),s.load(c),setTimeout(()=>{s.play(),e.querySelector(".js-popup-video-container").classList.add("is-active")},1200),r.preventDefault()}))}if(i)for(let r=0;r<i.length;r++){const o=i[r];o.addEventListener("click",(function(r){document.body.classList.add("is-popup-video-active"),e.classList.add("is-vimeo");const i=o.getAttribute("data-video-w"),s=o.getAttribute("data-video-h");i&s&&(t.setAttribute("width",i),t.setAttribute("height",s),i<=s&&e.classList.add("is-vertical"));const a=`<iframe src="https://player.vimeo.com/video/${o.getAttribute("data-vimeo-id")}?autoplay=1" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>`;n.innerHTML=a,e.classList.add("is-active"),setTimeout(()=>{e.querySelector(".js-popup-video-container").classList.add("is-active")},1200),r.preventDefault()}))}if(r)for(let o=0;o<r.length;o++){r[o].addEventListener("click",(function(r){document.body.classList.remove("is-popup-video-active"),e.classList.remove("is-active"),e.classList.contains("is-youtube")?(e.classList.remove("is-youtube"),e.querySelector(".js-popup-video-container").classList.remove("is-active"),setTimeout(()=>{t.setAttribute("width",16),t.setAttribute("height",9),e.classList.remove("is-vertical"),n.querySelector(".js-popup-video-yt").remove()},600)):e.classList.contains("is-vimeo")&&(e.classList.remove("is-vimeo"),e.querySelector(".js-popup-video-container").classList.remove("is-active"),setTimeout(()=>{t.setAttribute("width",16),t.setAttribute("height",9),e.classList.remove("is-vertical"),n.querySelector("iframe").remove()},600)),r.preventDefault()}))}if(document.body.classList.contains("is-init")){const e=document.querySelector(".js-popup-video"),t=document.querySelector(".js-popup-video-element").querySelector("iframe");document.body.classList.remove("is-popup-video-active"),e.classList.remove("is-active","is-youtube","is-vimeo"),e.querySelector(".js-popup-video-container").classList.remove("is-active"),t&&setTimeout(()=>{t.remove()},600)}}(),u(".js-pswp-container"),f(),function(){const e=document.querySelector(".hidden-el-left"),t=document.querySelector(".hidden-el-right"),n=document.querySelector(".hidden-el-footer-left");let r="",o="",i="";const s=()=>{if(e){const t=h(e).left,n=m(e);r=t+n,e.setAttribute("data-pos",r)}},a=()=>{if(t){const e=h(t);o=e.left,t.setAttribute("data-pos",o)}},c=()=>{if(n){const e=h(n).left,t=m(n);i=e+t,n.setAttribute("data-pos",i)}},u=(e,t)=>{e.target.classList.add("is-dragging"),s(),a(),c()},l=(e,t)=>{const n=e.target,r=(parseFloat(n.getAttribute("data-x"))||0)+e.dx,o=(parseFloat(n.getAttribute("data-y"))||0)+e.dy;n.style.transform=`translate(${r}px,${o}px)`,n.setAttribute("data-x",r),n.setAttribute("data-y",o)},f=(e,t)=>{e.target.classList.remove("is-dragging"),setTimeout(()=>{s(),a(),c()},0)};window.addEventListener("orientationchange",()=>{e&&(e.style.transform="",e.setAttribute("data-x",0),e.setAttribute("data-y",0),s()),t&&(t.style.transform="",t.setAttribute("data-x",0),t.setAttribute("data-y",0),a()),n&&(n.style.transform="",n.setAttribute("data-x",0),n.setAttribute("data-y",0),c())}),e&&(s(),d()(e).draggable({autoScroll:!1,inertia:!1,modifiers:[d.a.modifiers.restrictRect({restriction:"parent",endOnly:!0})],listeners:{start(e){u(e)},move(e){l(e)},end(e){f(e)}}})),t&&(a(),d()(t).draggable({autoScroll:!1,inertia:!1,modifiers:[d.a.modifiers.restrictRect({restriction:"parent",endOnly:!0})],listeners:{start(e){u(e)},move(e){l(e)},end(e){f(e)}}})),n&&(c(),d()(n).draggable({autoScroll:!1,inertia:!1,modifiers:[d.a.modifiers.restrictRect({restriction:"parent",endOnly:!0})],listeners:{start(e){u(e)},move(e){l(e)},end(e){f(e)}}}))}(),function(){const e=i()(".lozad",{rootMargin:"1000px 0px",threshold:.1,load:function(e){const t=e.getAttribute("data-src");e.setAttribute("src",t),s(e,{background:!0},()=>{e.classList.add("loaded");const t=r(e,"js-lozad-parent");t&&t.classList.add("loaded")})}}),t=i()(".lozad-bg",{rootMargin:"1000px 0px",threshold:.1,load:function(e){const t=e.getAttribute("data-src");e.style.backgroundImage=`url(${t})`,s(e,{background:!0},()=>{e.classList.add("loaded");const t=r(e,"js-lozad-parent");t&&t.classList.add("loaded")})}});e.observe(),t.observe();const n=document.querySelectorAll(".lozad-first");if(n)for(let t=0;t<n.length;t++){const r=n[t];e.triggerLoad(r)}const o=document.querySelectorAll(".lozad-first-bg");if(o)for(let e=0;e<o.length;e++){const n=o[e];t.triggerLoad(n)}}()};y(),document.body.classList.add("is-init"),new p.Pjax({areas:["#flg, .main-container","body"],update:{css:!1,script:!1}}),document.addEventListener("pjax:ready",(function(e){y(),document.body.classList.remove("is-popup-video-active"),gtag("config",ga_code,{page_path:location.pathname})}))},function(e,t){}]);
//# sourceMappingURL=site.js.map